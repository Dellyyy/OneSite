<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–∫ —è –ø—Ä–æ–≤–µ–ª –ª–µ—Ç–æ</title>
    <link rel="icon" type="image/x-icon" href="sun_siteicon.ico">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: url('background_dark.jpg') center/cover fixed;
            min-height: 100vh;
            color: #f0f0f0;
            transition: background 0.5s ease-in-out;
        }

        body.light-theme {
            background: url('background_light.jpg') center/cover fixed;
        }

        .container {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* –õ–µ–≤–æ–µ –º–µ–Ω—é - –∏–∑–º–µ–Ω–µ–Ω —Ü–≤–µ—Ç –Ω–∞ —Å–µ—Ä—ã–π */
        .left-sidebar {
            background: rgba(80, 80, 80, 0.9);
            border: 2px solid #a0a0a0;
            border-radius: 15px;
            padding: 20px;
            height: fit-content;
            box-shadow: 0 0 20px rgba(160, 160, 160, 0.2);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 20px;
        }

        .side-menu {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .side-btn {
            background: linear-gradient(135deg, #606060 0%, #1a1a1a 100%);
            border: 2px solid #a0a0a0;
            border-radius: 8px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #f0f0f0;
            font-size: 1em;
            font-weight: bolder;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-align: center;
        }

        .side-btn.main-btn {
            background: linear-gradient(135deg, #7c7c7c 0%, #616161 100%);
        }

        .side-btn:hover {
            background: linear-gradient(135deg, #707070 0%, #606060 100%);
            transform: translateX(5px);
            box-shadow: 0 0 15px rgba(160, 160, 160, 0.3);
        }

        .side-btn.main-btn:hover {
            background: linear-gradient(135deg, #b0b0b0 0%, #909090 100%);
        }

        /* –ö–Ω–æ–ø–∫–∏ –º–∏–Ω–∏-–∏–≥—Ä - —Ç–µ–ø–µ—Ä—å –≤ —Ä—è–¥ */
        .games-container {
            margin-top: 30px;
            display: flex;
            flex-direction: row;
            gap: 20px;
            justify-content: center;
            align-items: center;
        }

        .game-btn {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            border: 2px solid #a0a0a0;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 2em;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 15px rgba(46, 204, 113, 0.4);
        }

        .game-btn.aimlabs {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }

        .game-btn:hover {
            transform: scale(1.1);
        }

        .game-label {
            font-size: 0.8em;
            color: #c8c8c8;
            text-align: center;
            margin-top: 5px;
        }

        /* –ö–æ–Ω—Ç—Ä–æ–ª—ã –≥—Ä–æ–º–∫–æ—Å—Ç–∏ */
        .volume-controls {
            margin-top: 20px;
            padding: 15px;
            background: rgba(70, 70, 70, 0.6);
            border-radius: 10px;
            border: 1px solid #a0a0a0;
        }

        .volume-control {
            margin-bottom: 10px;
        }

        .volume-control:last-child {
            margin-bottom: 0;
        }

        .volume-label {
            display: block;
            margin-bottom: 5px;
            color: #d0d0d0;
            font-size: 0.9em;
        }

        .volume-slider {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            appearance: none;
            background: #505050;
            outline: none;
            border-radius: 4px;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #a0a0a0;
            cursor: pointer;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 30px;
            background: rgba(80, 80, 80, 0.8);
            border: 2px solid #a0a0a0;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            min-height: 120px;
            position: relative;
        }

        .logo-text {
            font-size: 2.8em;
            color: #f0f0f0;
            text-shadow: 0 0 10px rgba(240, 240, 240, 0.5);
            margin: 0 auto;
        }

        .logo-image {
            position: absolute;
            left: 30px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            z-index: 10;
        }

        .logo-image img {
            width: 80px;
            height: 80px;
            object-fit: contain;
            transition: transform 0.3s ease;
        }

        .logo-image:hover img {
            transform: scale(1.1);
        }

        .page {
            display: none;
            padding: 40px;
            background: rgba(80, 80, 80, 0.8);
            border: 2px solid #a0a0a0;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            min-height: 400px;
        }

        .page h2 {
            margin-bottom: 25px;
            text-align: center;
            font-size: 2.2em;
            color: #f0f0f0;
            border-bottom: 2px solid #a0a0a0;
            padding-bottom: 15px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ –ò–≥—Ä—ã */
        .games-section-title {
            text-align: center;
            font-size: 1.8em;
            color: #f0f0f0;
            margin-bottom: 30px;
            padding: 10px;
            background: rgba(70, 70, 70, 0.6);
            border-radius: 10px;
            border: 1px solid #a0a0a0;
        }

        .games-grid {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 40px;
        }

        .game-tile {
            flex: 1;
            background: rgba(70, 70, 70, 0.7);
            border: 2px solid #a0a0a0;
            border-radius: 12px;
            padding: 15px;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
        }

        .game-tile:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(160, 160, 160, 0.2);
        }

        .game-image {
            width: 100%;
            height: 150px;
            background-color: #505050;
            border-radius: 8px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            color: #a0a0a0;
            overflow: hidden;
        }

        .game-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .game-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #f0f0f0;
            margin-bottom: 10px;
            text-align: center;
        }

        .game-description {
            color: #d0d0d0;
            font-size: 0.9em;
            line-height: 1.4;
            flex-grow: 1;
        }

        .other-games {
            background: rgba(70, 70, 70, 0.6);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #a0a0a0;
        }

        .other-games h3 {
            color: #f0f0f0;
            margin-bottom: 15px;
            text-align: center;
        }

        .other-games p {
            color: #d0d0d0;
            line-height: 1.6;
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ - –∏–∑–º–µ–Ω–µ–Ω —Ü–≤–µ—Ç –Ω–∞ —Å–µ—Ä—ã–π */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: rgba(80, 80, 80, 0.95);
            border: 3px solid #a0a0a0;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            max-width: 500px;
            box-shadow: 0 0 30px rgba(160, 160, 160, 0.3);
        }

        .modal h3 {
            color: #f0f0f0;
            margin-bottom: 20px;
        }

        .modal-btn {
            background: linear-gradient(135deg, #606060 0%, #505050 100%);
            border: 2px solid #a0a0a0;
            border-radius: 8px;
            padding: 12px 25px;
            color: #f0f0f0;
            cursor: pointer;
            margin: 10px 5px;
            transition: all 0.2s ease;
        }

        .modal-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(160, 160, 160, 0.3);
        }

        /* –†—É–ª–µ—Ç–∫–∞ - –∏–∑–º–µ–Ω–µ–Ω —Ü–≤–µ—Ç –Ω–∞ —Å–µ—Ä—ã–π */
        .roulette-game {
            background: rgba(80, 80, 80, 0.95);
            border: 3px solid #a0a0a0;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            width: 600px;
            max-width: 90vw;
        }

        .game-info {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .balance {
            font-weight: bold;
            color: #2ecc71;
        }

        .bet-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
        }

        .bet-amount {
            font-size: 1.2em;
            font-weight: bold;
            color: #f39c12;
        }

        .bet-btn {
            background: linear-gradient(135deg, #606060 0%, #505050 100%);
            border: 2px solid #a0a0a0;
            border-radius: 6px;
            padding: 8px 12px;
            color: #f0f0f0;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .bet-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 8px rgba(160, 160, 160, 0.3);
        }

        .betting-area {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .bet-field {
            width: 120px;
            height: 120px;
            border: 3px solid #a0a0a0;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .bet-field.red {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
        }

        .bet-field.black {
            background: linear-gradient(135deg, #505050 0%, #000000 100%);
            color: white;
        }

        .bet-field.selected {
            box-shadow: 0 0 20px rgba(247, 220, 111, 0.8);
            border-color: #f7dc6f;
        }

        .bet-field:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(160, 160, 160, 0.4);
        }

        .spin-btn {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            border: 2px solid #a0a0a0;
            border-radius: 8px;
            padding: 12px 30px;
            color: #f0f0f0;
            cursor: pointer;
            font-weight: bold;
            margin: 15px 0;
            transition: all 0.2s ease;
        }

        .spin-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(46, 204, 113, 0.4);
        }

        .result-display {
            margin: 15px 0;
            padding: 12px;
            background: rgba(96, 96, 96, 0.5);
            border-radius: 8px;
            border: 2px solid #a0a0a0;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .result-text {
            font-size: 1.1em;
            font-weight: bold;
            text-align: center;
        }

        .win { color: #2ecc71; }
        .lose { color: #e74c3c; }

        .money-maker {
            margin-top: 15px;
            padding: 10px;
            background: rgba(96, 96, 96, 0.5);
            border-radius: 8px;
            border: 2px solid #a0a0a0;
        }

        .dodep-btn {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            border: 2px solid #a0a0a0;
            border-radius: 6px;
            padding: 8px 12px;
            color: #f0f0f0;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .dodep-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(243, 156, 18, 0.4);
        }

        /* AimLabs - –∏–∑–º–µ–Ω–µ–Ω —Ü–≤–µ—Ç –Ω–∞ —Å–µ—Ä—ã–π */
        .aim-game {
            background: rgba(80, 80, 80, 0.95);
            border: 3px solid #a0a0a0;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            width: 800px;
            max-width: 90vw;
        }

        .game-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            font-size: 1.2em;
        }

        .game-area {
            position: relative;
            width: 700px;
            height: 400px;
            background: rgba(96, 96, 96, 0.5);
            border: 2px solid #a0a0a0;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px auto;
        }

        .target {
            position: absolute;
            width: 40px;
            height: 40px;
            background: radial-gradient(circle, #e74c3c 0%, #c0392b 70%);
            border: 2px solid #a0a0a0;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.1s ease;
        }

        .target:hover {
            transform: scale(1.1);
        }

        .crosshair {
            position: absolute;
            width: 20px;
            height: 20px;
            pointer-events: none;
            border: 2px solid #a0a0a0;
            border-radius: 50%;
            opacity: 0.7;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #505050;
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, #e74c3c 0%, #f39c12 100%);
            width: 0%;
            transition: width 0.3s ease;
        }

        .results {
            margin-top: 20px;
            padding: 15px;
            background: rgba(96, 96, 96, 0.5);
            border-radius: 10px;
            border: 2px solid #a0a0a0;
        }

        @keyframes glow {
            0%, 100% { text-shadow: 0 0 10px rgba(240, 240, 240, 0.3); }
            50% { text-shadow: 0 0 20px rgba(240, 240, 240, 0.6); }
        }

        .glow {
            animation: glow 3s ease-in-out infinite;
        }

        /* –°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–Ω–æ–ø–∫–∞ - –í–°–ï–ì–î–ê —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–∏–¥–∏–º–æ–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        .secret-button {
            position: fixed;
            width: 20px;
            height: 20px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 9999;
            cursor: pointer;
        }

        .secret-button:hover {
            opacity: 1 !important; /* –í–∞–∂–Ω–æ: –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }

        .secret-button img {
            width: 100%;
            height: 100%;
        }

        /* –¢–µ–º–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä - 75% –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—è */
        .dark-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.75);
            z-index: 10000;
            display: none;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .dark-overlay.active {
            opacity: 1;
        }

        /* –°–µ–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ–∫—Å—Ç */
        .secret-text {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-family: 'Courier New', monospace;
            font-size: 24px;
            text-align: center;
            z-index: 10001;
            opacity: 0;
            transition: opacity 0.8s ease;
            text-shadow: 2px 2px 0 #000, -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000;
        }

        .secret-text.visible {
            opacity: 1;
        }

        /* –°–µ–∫—Ä–µ—Ç–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç 404 */
        .secret-404 {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            cursor: pointer;
            z-index: 999;
            transition: transform 0.3s ease;
        }

        .secret-404:hover {
            transform: scale(1.1);
        }

        .secret-404 img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        /* –û—à–∏–±–∫–∞ 404 */
        .error-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .error-content {
            background: rgba(80, 80, 80, 0.95);
            border: 3px solid #a0a0a0;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            max-width: 600px;
            box-shadow: 0 0 30px rgba(160, 160, 160, 0.3);
        }

        .error-404 {
            font-size: 6em;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 20px;
            animation: bounce404 2s infinite;
        }

        @keyframes bounce404 {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .error-text {
            color: #f0f0f0;
            font-size: 1.5em;
            margin-bottom: 30px;
        }

        .error-btn {
            background: linear-gradient(135deg, #606060 0%, #505050 100%);
            border: 2px solid #a0a0a0;
            border-radius: 8px;
            padding: 12px 25px;
            color: #f0f0f0;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .error-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(160, 160, 160, 0.3);
        }
        .dark-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.75);
            z-index: 10000;
            display: none;
            opacity: 0;
            transition: opacity 1s ease;
            box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.9); /* –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ç–µ–Ω—å –ø–æ –∫—Ä–∞—è–º */
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫ */
        .secret-buttons-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10002;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –î–∞/–ù–µ—Ç */
        .secret-buttons {
            display: flex;
            justify-content: center;
            gap: 40px;
        }

        .secret-btn {
            background: none;
            border: none;
            color: white;
            font-family: 'Courier New', monospace;
            font-size: 28px;
            cursor: pointer;
            padding: 15px 30px;
            transition: all 0.3s ease;
            text-shadow: 2px 2px 0 #000, -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000;
        }

        .secret-btn:hover {
            transform: scale(1.1);
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
        }

        /* –î–µ–ª–∞–µ–º —Å–µ–∫—Ä–µ—Ç–Ω—É—é –∫–Ω–æ–ø–∫—É –≤–∏–¥–∏–º–æ–π –ø–æ—Å–ª–µ 3 –Ω–∞–∂–∞—Ç–∏–π */
        .secret-button.visible {
            opacity: 1 !important;
        }

        .secret-button.visible:hover {
            opacity: 1 !important;
        }

        /* –ù–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –î–∞/–ù–µ—Ç */
        .yes-no-container {
            position: fixed;
            top: 60%;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10003;
            display: flex;
            gap: 50px;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .yes-no-container.visible {
            opacity: 1;
        }

        .yes-no-button {
            background: none;
            border: none;
            color: white;
            font-family: 'Courier New', monospace;
            font-size: 32px;
            cursor: pointer;
            text-shadow: 2px 2px 0 #000, -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000;
            transition: all 0.3s ease;
            padding: 10px 20px;
        }

        .yes-no-button:hover {
            transform: scale(1.1);
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
        }
                .logo-container.darkened {
            background: rgba(40, 40, 40, 0.9);
            transition: background 0.5s ease;
        }

        .logo-text.darkened {
            color: #a0a0a0;
            text-shadow: 0 0 5px rgba(160, 160, 160, 0.3);
            transition: all 0.5s ease;
        }
        
        .music-player {
            margin-top: 20px;
            padding: 15px;
            background: rgba(70, 70, 70, 0.6);
            border-radius: 10px;
            border: 1px solid #a0a0a0;
        }

        .player-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .player-btn {
            background: linear-gradient(135deg, #606060 0%, #505050 100%);
            border: 2px solid #a0a0a0;
            border-radius: 6px;
            padding: 8px 12px;
            color: #f0f0f0;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .player-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 8px rgba(160, 160, 160, 0.3);
        }

        .track-info {
            text-align: center;
            color: #d0d0d0;
            font-size: 0.9em;
            margin-bottom: 10px;
            height: 20px;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è —Ç—Ä—è—Å–∫–∏ —ç–∫—Ä–∞–Ω–∞ */
        @keyframes screenShake {
            0%, 100% { transform: translateX(0) translateY(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px) translateY(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px) translateY(10px); }
        }

        .screen-shake {
            animation: screenShake 0.5s ease-in-out;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ */
        body.interface-locked .container {
            filter: brightness(0.7) contrast(0.9);
            transition: all 0.5s ease;
        }

        body.interface-locked .left-sidebar,
        body.interface-locked .main-content,
        body.interface-locked .page,
        body.interface-locked .logo-container,
        body.interface-locked .volume-controls {
            background: rgba(255, 0, 0, 0) !important;
            border-color: #666 !important;
        }

        /* –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã –¥–ª—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
        body.interface-locked .left-sidebar {
            border-radius: 15px !important;
        }

        body.interface-locked .main-content > * {
            border-radius: 15px !important;
        }

        body.interface-locked .page {
            border-radius: 15px !important;
        }

        body.interface-locked .logo-container {
            border-radius: 15px !important;
        }

        body.interface-locked .volume-controls {
            border-radius: 10px !important;
        }

        body.interface-locked .side-btn,
        body.interface-locked .game-btn,
        body.interface-locked .player-btn {
            background: linear-gradient(135deg, #454545 0%, #353535 100%) !important;
            border-color: #777 !important;
            color: #999 !important;
            border-radius: 8px !important;
        }

        body.interface-locked .side-btn {
            border-radius: 8px !important;
        }

        body.interface-locked .game-btn {
            border-radius: 50% !important;
        }

        body.interface-locked .player-btn {
            border-radius: 6px !important;
        }

        body.interface-locked .logo-text {
            color: #999 !important;
            text-shadow: 0 0 3px rgba(153, 153, 153, 0.2) !important;
        }

        body.interface-locked .volume-label {
            color: #999 !important;
        }

        body.interface-locked .volume-slider {
            background: #454545 !important;
            border-radius: 4px !important;
        }

        body.interface-locked .volume-slider::-webkit-slider-thumb {
            background: #777 !important;
            border-radius: 50% !important;
        }

        /* –£–±–∏—Ä–∞–µ–º –æ–±—â–µ–µ –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ */
        body.interface-locked::before {
            display: none;
        }

        body.interface-locked .side-btn,
        body.interface-locked .game-btn,
        body.interface-locked .secret-404,
        body.interface-locked .player-btn {
            pointer-events: none;
            opacity: 0.5;
            cursor: not-allowed;
        }

        body.interface-locked .music-player {
            opacity: 0.7;
            border-radius: 10px !important;
        }

        body.interface-locked .music-player::after {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            color: #e74c3c;
            text-shadow: 0 0 10px rgba(231, 76, 60, 0.5);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è */
        .system-damage-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.507);
            z-index: 10010;
            display: none; /* –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ */
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .system-damage-overlay.active {
            opacity: 1;
            cursor: pointer; /* –î–æ–±–∞–≤–ª—è–µ–º –∫—É—Ä—Å–æ—Ä-—É–∫–∞–∑–∞—Ç–µ–ª—å */
        }

        .system-damage-text {
            color: white;
            font-family: 'Courier New', monospace;
            font-size: 24px;
            text-align: center;
            opacity: 0;
            transition: opacity 1s ease;
            text-shadow: 2px 2px 0 #000, -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000;
        }

        .system-damage-text.visible {
            opacity: 1;
        }

        /* –°–∫—Ä—ã–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å–µ–∫—Ä–µ—Ç–Ω—É—é –∫–Ω–æ–ø–∫—É –≤ —Å–ª–æ–º–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ */
        body.interface-locked .secret-button {
            display: none;
        }

        /* –ù–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –¥–ª—è —Å–ª–æ–º–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ */
        .broken-clover {
            position: fixed;
            width: 20px;
            height: 20px;
            cursor: pointer;
            z-index: 9999;
            transition: transform 0.3s ease;
            display: none; /* –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ */
        }

        .broken-clover:hover {
            transform: scale(1.1);
        }
        

        .broken-clover img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        body.interface-locked .broken-clover {
            display: block;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –ø–æ—Å–ª–µ –ø–æ–ª–æ–º–∫–∏ */
        .logo-text.broken {
            color: #e74c3c !important;
            text-shadow: 0 0 10px rgba(231, 76, 60, 0.5) !important;
            animation: glitch 0.5s infinite;
        }

        @keyframes glitch {
            0% { text-shadow: 0 0 10px rgba(231, 76, 60, 0.5); }
            50% { text-shadow: 0 0 15px rgba(231, 76, 60, 0.8); }
            100% { text-shadow: 0 0 10px rgba(231, 76, 60, 0.5); }
        }

        .logo-text.broken {
            color: #e74c3c !important;
            text-shadow: 0 0 10px rgba(231, 76, 60, 0.5) !important;
            animation: glitch 2s infinite;
        }

        .hidden-content {
            display: none !important;
        }

        .side-btn {
            transition: all 0.4s ease; /* –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —ç—Ç–æ —Å–≤–æ–π—Å—Ç–≤–æ –µ—Å—Ç—å */
        }

        /* PixelPaint - —Å—Ç–∏–ª–∏ –∫–∞–∫ —É –¥—Ä—É–≥–∏—Ö –∏–≥—Ä */
        .pixel-game {
            background: rgba(80, 80, 80, 0.95);
            border: 3px solid #a0a0a0;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            width: 1000px;
            max-width: 95vw;
            height: 600px;
            display: flex;
            flex-direction: row;
            gap: 20px;
        }

        .pixel-controls-panel {
            width: 250px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            overflow-y: auto;
            max-height: 100%;
            padding-right: 10px;
        }

        .pixel-controls-panel::-webkit-scrollbar {
            width: 8px;
        }

        .pixel-controls-panel::-webkit-scrollbar-track {
            background: #505050;
            border-radius: 4px;
        }

        .pixel-controls-panel::-webkit-scrollbar-thumb {
            background: #a0a0a0;
            border-radius: 4px;
        }

        .pixel-canvas-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }


        .pixel-btn {
            background: linear-gradient(135deg, #606060 0%, #505050 100%);
            border: 2px solid #a0a0a0;
            border-radius: 6px;
            padding: 8px 12px;
            color: #f0f0f0;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9em;
        }

        .pixel-btn-clear {
            background: linear-gradient(135deg, #5f0707 0%, #ff0505 100%);
            border: 2px solid #a0a0a0;
            border-radius: 6px;
            padding: 8px 12px;
            color: #f0f0f0;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9em;
        }

        .pixel-btn-clear:hover {
            box-shadow: 0 0 8px rgba(255, 73, 73, 0.568);
            background: linear-gradient(135deg, #5f0707 0%, #ff0505 100%);
        }

        .pixel-btn:hover {
            box-shadow: 0 0 8px rgba(160, 160, 160, 0.3);
            background: linear-gradient(135deg, #707070 0%, #606060 100%);
        }

        .color-palette {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin: 10px 0;
            justify-content: center;
        }

        .color-item {
            width: 30px;
            height: 30px;
            border: 2px solid #a0a0a0;
            border-radius: 4px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .color-item:hover {
            transform: scale(1.1);
        }

        .color-item.selected {
            border-color: #f7dc6f;
            box-shadow: 0 0 10px rgba(247, 220, 111, 0.8);
        }

        .pixel-area {
            position: relative;
            width: 645px;
            height: 405px;
            background: #1a1a1a;
            border: 2px solid #a0a0a0;
            overflow: hidden;
            cursor: crosshair;
        }

        .pixel {
            position: absolute;
            width: 10px;
            height: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .pixel-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 10px 10px;
            pointer-events: none;
        }

        .canvas-tabs {
            display: flex;
            gap: 5px;
            margin: 10px 0;
            justify-content: center;
            flex-wrap: wrap;
        }

        .canvas-tab {
            background: linear-gradient(135deg, #606060 0%, #505050 100%);
            border: 1px solid #a0a0a0;
            border-radius: 4px;
            padding: 10px 30px 10px 15px; /* –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Å—Ç–æ —Å–ø—Ä–∞–≤–∞ –¥–ª—è –∫–Ω–æ–ø–∫–∏ */
            cursor: pointer;
            font-size: 0.9em;
            text-align: center;
            transition: all 0.2s ease;
            position: relative;
            min-height: 18px;
        }

        .canvas-tab.editing {
            background: linear-gradient(135deg, #7c7c7c 0%, #616161 100%);
            border-color: #f7dc6f;
            padding: 10px 15px; /* –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–π padding –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ */
        }

        .rename-btn {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #a0a0a0;
            cursor: pointer;
            font-size: 0.8em;
            padding: 2px 5px;
            opacity: 0;
            transition: opacity 0.2s ease;
            z-index: 2;
        }

        .canvas-tab:hover .rename-btn {
            opacity: 1;
        }

        .rename-btn:hover {
            color: #f7dc6f;
        }

        .rename-input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #f7dc6f;
            border-radius: 3px;
            color: #f0f0f0;
            font-size: 0.9em;
            padding: 2px 5px;
            width: 100%;
            text-align: center;
            font-family: 'Courier New', monospace;
            margin: -2px 0;
        }

        .rename-input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.15);
        }

        .canvas-tab.active {
            background: linear-gradient(135deg, #7c7c7c 0%, #616161 100%);
            border-color: #f7dc6f;
        }

        .template-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.3;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ PixelPaint –≤ games-container */
        .game-btn.pixelpaint {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
        }

        .color-picker-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .color-preview {
            width: 30px;
            height: 30px;
            border: 2px solid #a0a0a0;
            border-radius: 4px;
            cursor: pointer;
        }

        .color-palette-input {
            display: none;
        }

        .template-controls {
            background: rgba(70, 70, 70, 0.6);
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #a0a0a0;
            margin-top: 10px;
        }

        .template-slider {
            width: 100%;
            margin: 10px 0;
        }

        .template-movement {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-top: 10px;
        }

        .movement-buttons {
            display: grid;
            grid-template-areas: 
                ". up ."
                "left center right"
                ". down .";
            grid-template-columns: 1fr 1fr 1fr;
            gap: 5px;
            margin-top: 5px;
        }

        .movement-btn.up { grid-area: up; }
        .movement-btn.left { grid-area: left; }
        .movement-btn.center { grid-area: center; }
        .movement-btn.right { grid-area: right; }
        .movement-btn.down { grid-area: down; }

        .movement-btn {
            background: linear-gradient(135deg, #606060 0%, #505050 100%);
            border: 1px solid #a0a0a0;
            border-radius: 4px;
            padding: 8px;
            color: #f0f0f0;
            cursor: pointer;
            font-size: 0.9em;
            min-width: 40px;
        }

        .movement-btn:hover {
            background: linear-gradient(135deg, #707070 0%, #606060 100%);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–∞–Ω–µ–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ */
        .tools-panel {
            background: rgba(70, 70, 70, 0.6);
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #a0a0a0;
            margin-top: 10px;
        }

        .tool-btn {
            background: linear-gradient(135deg, #606060 0%, #505050 100%);
            border: 1px solid #a0a0a0;
            border-radius: 4px;
            padding: 8px 12px;
            color: #f0f0f0;
            cursor: pointer;
            font-size: 0.9em;
            margin: 2px;
            transition: all 0.2s ease;
            width: 100%;
            text-align: center;
        }

        .tool-btn.active {
            background: linear-gradient(135deg, #7c7c7c 0%, #616161 100%);
            border-color: #f7dc6f;
        }

        .tool-btn:hover {
            background: linear-gradient(135deg, #707070 0%, #606060 100%);
        }

        .tool-controls {
            margin-top: 10px;
            padding: 10px;
            background: rgb(29, 29, 29);
            border-radius: 5px;
            display: none;
        }

        .tool-controls.active {
            display: block;
        }

        .tool-label {
            color: #d0d0d0;
            font-size: 0.8em;
            margin-bottom: 5px;
        }

        .selection-controls {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .color-replace-controls {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .color-replace-controls > div {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }

        .selection-area {
            position: absolute;
            border: 2px dashed #f7dc6f;
            background: rgba(247, 220, 111, 0.1);
            pointer-events: none;
            z-index: 10;
        }

        .pipette-mode {
            cursor: crosshair !important;
        }

        .pipette-mode .pixel {
            cursor: crosshair !important;
        }

        .color-replace-preview {
            width: 30px;
            height: 30px;
            border: 2px solid #a0a0a0;
            border-radius: 4px;
            flex-shrink: 0;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –ø–∞–Ω–µ–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ */
        .tool-info-panel {
            background: rgba(70, 70, 70, 0.6);
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #a0a0a0;
            margin-top: 10px;
            width: 100%;
            max-width: 640px;
            text-align: center;
        }

        .selected-tool {
            color: #f7dc6f;
            font-weight: bold;
            font-size: 1em;
            margin-bottom: 8px;
        }

        .tool-description {
            color: #d0d0d0;
            font-size: 0.9em;
            line-height: 1.4;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ undo/redo */
        .undo-redo-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .undo-btn, .redo-btn {
            background: linear-gradient(135deg, #606060 0%, #505050 100%);
            border: 2px solid #a0a0a0;
            border-radius: 6px;
            padding: 8px 12px;
            color: #f0f0f0;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9em;
            flex: 1;
            text-align: center;
        }

        .undo-btn:hover, .redo-btn:hover {
            background: linear-gradient(135deg, #707070 0%, #606060 100%);
            box-shadow: 0 0 8px rgba(160, 160, 160, 0.3);
        }

        .undo-btn:disabled, .redo-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: linear-gradient(135deg, #454545 0%, #353535 100%);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –Ω–µ–¥–∞–≤–Ω–∏—Ö —Ü–≤–µ—Ç–æ–≤ */
        .recent-colors-container {
            margin: 15px 0;
        }

        .recent-colors-label {
            color: #d0d0d0;
            font-size: 0.9em;
            text-align: center;
            margin-bottom: 8px;
        }

        .recent-colors {
            display: flex;
            gap: 5px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .recent-color-item {
            width: 25px;
            height: 25px;
            border: 2px solid #a0a0a0;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .recent-color-item:hover {
            transform: scale(1.1);
            border-color: #f7dc6f;
        }

        .recent-color-item.empty {
            background: repeating-linear-gradient(
                45deg,
                #505050,
                #505050 2px,
                #606060 2px,
                #606060 4px
            );
            border-color: #666;
            cursor: default;
        }

        .recent-color-item.empty:hover {
            transform: none;
            border-color: #666;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —á–µ–∫–±–æ–∫—Å–∞ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–≥–æ —Ñ–æ–Ω–∞ */
        .transparent-bg-control {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 10px 0;
            padding: 8px;
            background: rgba(70, 70, 70, 0.6);
            border-radius: 6px;
            border: 1px solid #a0a0a0;
        }

        .transparent-checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #f7dc6f;
        }

        .transparent-label {
            color: #f0f0f0;
            font-size: 0.9em;
            cursor: pointer;
        }

        .transparent-label:hover {
            color: #f7dc6f;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –æ—Ç–º–µ–Ω—ã –≤—ã–¥–µ–ª–µ–Ω–∏—è */
        .deselect-btn {
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
            border: 2px solid #a0a0a0;
            border-radius: 6px;
            padding: 8px 12px;
            color: #f0f0f0;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            margin-top: 5px;
        }

        .deselect-btn:hover {
            background: linear-gradient(135deg, #A0522D 0%, #8B4513 100%);
            box-shadow: 0 0 8px rgba(160, 82, 45, 0.4);
        }

        .deselect-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: linear-gradient(135deg, #454545 0%, #353535 100%);
        }

    </style>
</head>
<body>
    <!-- –ê—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –∑–≤—É–∫–æ–≤ -->
    <audio id="hoverSound" preload="auto">
        <source src="cursor.wav" type="audio/mpeg">
    </audio>
    <audio id="clickSound" preload="auto">
        <source src="select.wav" type="audio/mpeg">
    </audio>
    <audio id="cancelSound" preload="auto">
        <source src="quit.wav" type="audio/mpeg">
    </audio>
    <!-- –ù–æ–≤—ã–π –∑–≤—É–∫ –¥–ª—è —Ä–∞–∑–±–∏—Ç–∏—è —Å—Ç–µ–∫–ª–∞ -->
    <audio id="glassSound" preload="auto">
        <source src="shatter.wav" type="audio/mpeg">
    </audio>

    <audio id="music1" preload="auto">
        <source src="IntoTheLight.ogg" type="audio/ogg">
    </audio>
    <audio id="music2" preload="auto">
        <source src="ChildrenOfTheRuins_piano.ogg" type="audio/ogg">
    </audio>
    <audio id="music3" preload="auto">
        <source src="OnLittleCatFeet.ogg" type="audio/ogg">
    </audio>
    <audio id="music4" preload="auto">
        <source src="ToSleep.ogg" type="audio/ogg">
    </audio>
    <audio id="music5" preload="auto">
        <source src="MyBurdenIsLight.ogg" type="audio/ogg">
    </audio>
    <audio id="music6" preload="auto">
        <source src="NikoAndTheWorldMachine.ogg" type="audio/ogg">
    </audio>
    <audio id="musicBroken" preload="auto">
        <source src="MyBurdenIsDead.ogg" type="audio/ogg">
    </audio>

    <!-- –ü–æ—Å–ª–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ -->
    <audio id="paintSound" preload="auto">
        <source src="paint_pixel.mp3" type="audio/mpeg">
    </audio>
    <audio id="removeSound" preload="auto">
        <source src="remove_pixel.mp3" type="audio/mpeg">
    </audio>

    <div class="container">
        <!-- –õ–µ–≤–æ–µ –º–µ–Ω—é -->
        <div class="left-sidebar">
            <div class="side-menu">
                <div class="side-btn main-btn" onclick="showPage('main'); playClickSound()">–ì–ª–∞–≤–Ω–∞—è</div>
                <div class="side-btn" onclick="showPage('trips'); playClickSound()" onmouseover="playHoverSound()">–ü–æ–µ–∑–¥–∫–∏</div>
                <div class="side-btn" onclick="showPage('media'); playClickSound()" onmouseover="playHoverSound()">–§–∏–ª—å–º—ã, —Å–µ—Ä–∏–∞–ª—ã, –∞–Ω–∏–º–µ</div>
                <div class="side-btn" onclick="showPage('games'); playClickSound()" onmouseover="playHoverSound()">–ò–≥—Ä—ã</div>
                <div class="side-btn" onclick="showPage('it'); playClickSound()" onmouseover="playHoverSound()">IT-–¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å</div>
                <div class="side-btn" onclick="showPage('achievements'); playClickSound()" onmouseover="playHoverSound()">–ü–æ—Ö–≤–∞—Å—Ç–∞—Ç—å—Å—è</div>
                <div class="side-btn" onclick="showPage('sufferings'); playClickSound()" onmouseover="playHoverSound()">–°—Ç—Ä–∞–¥–∞–Ω–∏—è</div>
            </div>
            
        <!-- –ö–Ω–æ–ø–∫–∏ –º–∏–Ω–∏-–∏–≥—Ä - —Ç–µ–ø–µ—Ä—å –≤ —Ä—è–¥ -->
        <div class="games-container">
            <div>
                <div class="game-btn" onclick="showModal('rouletteGame'); playClickSound()" onmouseover="playHoverSound()">üé∞</div>
                <div class="game-label">–†—É–ª–µ—Ç–∫–∞</div>
            </div>
            <div>
                <div class="game-btn aimlabs" onclick="showModal('aimGame'); playClickSound()" onmouseover="playHoverSound()">üéØ</div>
                <div class="game-label">AimLabs</div>
            </div>
            <div>
                <div class="game-btn pixelpaint" onclick="showModal('pixelGame'); playClickSound()" onmouseover="playHoverSound()">üé®</div>
                <div class="game-label">PixelPaint</div>
            </div>
        </div>
            
            <div class="music-player" id="musicPlayer">
                <div class="track-info" id="trackInfo">–ú—É–∑—ã–∫–∞ –≤—ã–∫–ª—é—á–µ–Ω–∞</div>
                <div class="player-controls">
                    <button class="player-btn" onclick="prevTrack()" onmouseover="playHoverSound()">‚èÆ</button>
                    <button class="player-btn" onclick="togglePlay()" onmouseover="playHoverSound()" id="playBtn">‚ñ∂</button>
                    <button class="player-btn" onclick="nextTrack()" onmouseover="playHoverSound()">‚è≠</button>
                </div>
            </div>

            <!-- –ö–æ–Ω—Ç—Ä–æ–ª—ã –≥—Ä–æ–º–∫–æ—Å—Ç–∏ -->
            <div class="volume-controls">
                <div class="volume-control">
                    <label class="volume-label">–ì—Ä–æ–º–∫–æ—Å—Ç—å –∑–≤—É–∫–æ–≤</label>
                    <input type="range" class="volume-slider" id="sfxVolume" min="0" max="100" value="50" oninput="updateVolume()">
                </div>
                <div class="volume-control">
                    <label class="volume-label">–ì—Ä–æ–º–∫–æ—Å—Ç—å –º—É–∑—ã–∫–∏</label>
                    <input type="range" class="volume-slider" id="musicVolume" min="0" max="100" value="50" oninput="updateVolume()">
                </div>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="main-content">
            <!-- –õ–æ–≥–æ—Ç–∏–ø -->
            <div class="logo-container">
                <div class="logo-image" onclick="toggleLamp()">
                    <img id="lampImage" src="sun_off.png" alt="–õ–µ—Ç–æ 2024">
                </div>
                <div class="logo-text glow">–ö–∞–∫ —è –ø—Ä–æ–≤—ë–ª —ç—Ç–æ –ª–µ—Ç–æ</div>
            </div>

            <!-- –°—Ç—Ä–∞–Ω–∏—Ü—ã -->
            <div id="main" class="page">
                <h2>–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h2>
                <div class="content">
                    <p style="font-size: 19px;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –º–æ–π —Å–∞–π—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —è —Ä–∞—Å—Å–∫–∞–∂—É –æ —Å–≤–æ–∏—Ö –ª–µ—Ç–Ω–∏—Ö –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è—Ö! –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º, –∫–∞–∫ —è –ø—Ä–æ–≤–µ–ª –ª–µ—Ç–æ, 
                    –º–æ–∏ —É–≤–ª–µ—á–µ–Ω–∏—è –∏ –∏–Ω—Ç–µ—Ä–µ—Å—ã, –∞ —Ç–∞–∫–∂–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –º–∏–Ω–∏-–∏–≥—Ä, –∫–æ—Ç–æ—Ä—ã–µ —è —Å–æ–∑–¥–∞–ª —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.</p>
                    <p style="font-size: 19px;">–õ–µ—Ç–æ - —ç—Ç–æ –≤—Ä–µ–º—è –æ—Ç–∫—Ä—ã—Ç–∏–π, –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π –∏ –Ω–æ–≤—ã—Ö –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–π. –í —ç—Ç–æ–º –≥–æ–¥—É –º–Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ—Å–µ—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –º–µ—Å—Ç, 
                    –Ω–∞—É—á–∏—Ç—å—Å—è –Ω–æ–≤—ã–º –Ω–∞–≤—ã–∫–∞–º –∏ –ø—Ä–æ—Å—Ç–æ —Ö–æ—Ä–æ—à–æ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–æ–º –≤—ã –º–æ–∂–µ—Ç–µ —É–∑–Ω–∞—Ç—å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö —Å–∞–π—Ç–∞.</p>
                    <p style="font-size: 19px;">–ù–µ –∑–∞–±—É–¥—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–æ–º–∫–æ—Å—Ç—å –∑–≤—É–∫–æ–≤ –∏ –º—É–∑—ã–∫–∏ —Å –ø–æ–º–æ—â—å—é –ø–æ–ª–∑—É–Ω–∫–æ–≤ –≤ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏, –∞ —Ç–∞–∫–∂–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –º–∏–Ω–∏-–∏–≥—Ä—ã, 
                    –∫–æ—Ç–æ—Ä—ã–µ —è –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª. –ü—Ä–∏—è—Ç–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞! <br><br><br><br><br><p style="font-size: 19px;">P.S.</p><br><p style="font-size: 19px;">–Ø –Ω–∞—à—ë–ª –¥–æ—Å—Ç—É–ø –∫ —Å–µ–∫—Ä–µ—Ç–Ω–æ–º—É —Ñ–∞–π–ª—É. –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ <strong>—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–º—É —Ç–µ—Ä–º–∏–Ω–∞–ª—É</strong>. –ù–∞–π–¥–∏ <strong>–ö–ª–µ–≤–µ—Ä</strong> –≤ —É–≥–ª—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –Ω–∞–∂–º–∏ –Ω–∞ –Ω–µ–≥–æ. –¢–µ—Ä–º–∏–Ω–∞–ª –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å–ø—É—Å—Ç—è –ø–∞—Ä—É —Å–µ–∫—É–Ω–¥.</p>
                </div>
            </div>

            <div id="trips" class="page">
                <h2>–ú–æ–∏ –ª–µ—Ç–Ω—ã–µ –ø–æ–µ–∑–¥–∫–∏</h2>
                <div class="content">
                    <p style="font-size: 25px;">–≠—Ç–∏–º –ª–µ—Ç–æ–º —è –ø–æ—á—Ç–∏ –Ω–∏–∫—É–¥–∞ –Ω–µ –µ–∑–¥–∏–ª. –í –æ—Å–Ω–æ–≤–Ω–æ–º ‚Äî –¥–æ—Ä–æ–≥–∞ –Ω–∞ —Ä–∞–±–æ—Ç—É –∏ –æ–±—Ä–∞—Ç–Ω–æ. –ò–Ω–æ–≥–¥–∞ –≤—ã–±–∏—Ä–∞–ª—Å—è –Ω–∞ —Ä—ã–±–∞–ª–∫—É: —Å–∏–¥–µ–ª —Å —É–¥–æ—á–∫–æ–π –Ω–∞ –±–µ—Ä–µ–≥—É, –Ω–∏–∫—É–¥–∞ –Ω–µ —Ç–æ—Ä–æ–ø–∏–ª—Å—è. –ê –µ—â—ë –±—ã–ª–∏ –ø—Ä–æ—Å—Ç—ã–µ –ø—Ä–æ–≥—É–ª–∫–∏ —Å –¥—Ä—É–∑—å—è–º–∏ –ø–æ –≤–µ—á–µ—Ä–∞–º. –ë–µ–∑ –ø–ª–∞–Ω–æ–≤, –ø—Ä–æ—Å—Ç–æ —à–ª–∏ –∏ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–ª–∏. –ù–µ –±—ã–ª–æ –≥—Ä–∞–Ω–¥–∏–æ–∑–Ω—ã—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π, –Ω–æ –≤ —ç—Ç–æ–π —Ç–∏—Ö–æ–π –∏ –ø—Ä–∏–≤—ã—á–Ω–æ–π –ø—Ä–æ—Å—Ç–æ—Ç–µ —Ç–æ–∂–µ –±—ã–ª —Å–≤–æ–π —É—é—Ç –∏ —Å–≤–æ–π –º–∞–ª–µ–Ω—å–∫–∏–π –ª–µ—Ç–Ω–∏–π –≤–∞–π–±.</p>
                </div>
            </div>

<div id="media" class="page">
    <h2>–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω–æ–µ –ª–µ—Ç–æ–º</h2>
    
    <div class="games-section-title">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω–æ–µ –ª–µ—Ç–æ–º</div>
    
    <div class="games-grid">
        <div class="game-tile">
            <div class="game-image" style="position: relative; width: 100%; padding-top: 56.25%; overflow: hidden;">
                <img src="SquidGame3.jpg" alt="SG3" onerror="this.style.display='none'; this.parentElement.innerHTML='üé¨';" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
            </div>
            <div class="game-title">–ò–≥—Ä–∞ –≤ –ö–∞–ª—å–º–∞—Ä–∞ 3</div>
            <div class="game-description">
                –í —Ü–µ–ª–æ–º, —ç—Ç–∞ –¥–æ—Ä–∞–º–∞ –º–Ω–µ –æ—á–µ–Ω—å –ø–æ–Ω—Ä–∞–≤–∏–ª–∞—Å—å. –ù–∞—á–∏–Ω–∞—è —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å—é–∂–µ—Ç–Ω—ã–º–∏ –ø–æ–≤–æ—Ä–æ—Ç–∞–º–∏ –∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—è –∫–æ–Ω—Ü–æ–≤–∫–æ–π. –ù–æ —Å–æ –í—Ç–æ—Ä–æ–≥–æ —Å–µ–∑–æ–Ω–∞ –Ω–∞—á–∞–ª–∏—Å—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–æ–ø—Ä–æ—Å—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –∑–∞—á–µ–º –Ω—É–∂–Ω–æ –±—ã–ª–æ —Ä–∞—Å—Ç—è–≥–∏–≤–∞—Ç—å —Å–µ—Ä–∏–∞–ª –¥–æ —Ç—Ä–µ—Ç—å–µ–≥–æ —Å–µ–∑–æ–Ω–∞? –ó–∞—á–µ–º –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å –≤—Ç–æ—Ä–æ–π —Å–µ–∑–æ–Ω –∂–∏—Ä–Ω—ã–º –º–Ω–æ–≥–æ—Ç–æ—á–∏–µ–º? –í–æ–æ–±—â–µ–º —Ç–∞–∫–æ–π –ø–æ–≤–æ—Ä–æ—Ç —Å–æ–±—ã—Ç–∏–π –º–Ω–µ –Ω–µ –æ—á–µ–Ω—å –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è, –Ω–æ –≤—Å–µ—Ä–∞–≤–Ω–æ —Å –Ω–µ—Ç–µ—Ä–ø–µ–Ω—å–µ–º –∂–¥–∞–ª —Ç—Ä–µ—Ç—å–µ–≥–æ —Å–µ–∑–æ–Ω–∞. –í–æ –≤—Ç–æ—Ä–æ–º —Å–µ–∑–æ–Ω–µ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–∞—Å—å —Å—Ü–µ–Ω–∞ —Å "–†–µ–≤–æ–ª—é—Ü–∏–µ–π" —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–≥—Ä—ã –ø—Ä–æ—Ç–∏–≤ –µ—ë —Å–æ–∑–¥–∞—Ç–µ–ª—è. –ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞—Å–ø–∏—Å–∞—Ç—å –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è, —Ç.–∫. —Å—É–ø–µ—Ä –∫—Ä—É—Ç–æ–º—É –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—É "–†–æ—Å—Ç–µ–ª–µ–∫–æ–º—É" —ç—Ç–æ –Ω–µ –æ—á–µ–Ω—å –ø–æ–Ω—Ä–∞–≤–∏—Ç—Å—è.
                –ï—Å–ª–∏ –≥–æ–≤–æ—Ä–∏—Ç—å –ø—Ä–æ —Ç—Ä–µ—Ç–∏–π —Å–µ–∑–æ–Ω, —Ç–æ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å —Ç–æ, —á—Ç–æ –ì–ª–∞–≤–Ω—ã–π –ì–µ—Ä–æ–π –ø–æ—Ç–µ—Ä—è–ª —Å–º—ã—Å–ª –∂–∏–∑–Ω–∏, —Ç.–∫. –µ–≥–æ –ø–ª–∞–Ω –ø–æ "–û—Å—Ç–∞–Ω–æ–≤–∫–µ" –∏–≥—Ä –ø—Ä–æ–≤–∞–ª–∏–ª—Å—è, –Ω–æ –ø–æ—Ç–æ–º –æ–Ω –≤—Å–µ –∂–µ –æ–±—Ä–µ–ª —Å–º—ã—Å–ª –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏–≥—Ä–∞—Ç—å, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ—Å—Ç–∞–≤–∏–ª —Å–µ–±–µ —Ü–µ–ª—å —Å–ø–∞—Å—Ç–∏ –º–ª–∞–¥–µ–Ω—Ü–∞ –ò–≥—Ä–æ–∫–∞ 222. –ö–æ–Ω—Ü–æ–≤–∫–∞ –¥–ª—è –º–µ–Ω—è –æ–∫–∞–∑–∞–ª–∞–º—å –æ—á–µ–Ω—å –≥—Ä—É—Å—Ç–Ω–æ–π, –Ω–æ —è —Å—á–∏—Ç–∞—é –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π.
                –ü–æ –∏—Ç–æ–≥—É —Å–∫–∞–∂—É, —á—Ç–æ —Å–µ—Ä–∏–∞–ª –º–Ω–µ –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è, –ø–æ—Å—Ç–∞–≤–∏–ª –±—ã –µ–º—É 7.5/10.
            </div>
        </div>
        
        <div class="game-tile">
            <div class="game-image" style="position: relative; width: 100%; padding-top: 56.25%; overflow: hidden;">
                <img src="HTTYD.jpg" alt="HTTYD" onerror="this.style.display='none'; this.parentElement.innerHTML='üé¨';" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
            </div>
            <div class="game-title">–ö–∞–∫ –ø—Ä–∏—Ä—É—á–∏—Ç—å –¥—Ä–∞–∫–æ–Ω–∞ –≤ –∫–∏–Ω–æ</div>
            <div class="game-description">
                –ü–∞—Ä—É –ª–µ—Ç –Ω–∞–∑–∞–¥, —è –ø–æ—Å–º–æ—Ç—Ä–µ–ª –º—É–ª—å—Ç—Ñ–∏–ª—å–º "–ö–∞–∫ –ø—Ä–∏—Ä—É—á–∏—Ç—å –¥—Ä–∞–∫–æ–Ω–∞". –ú–Ω–µ —ç—Ç–æ—Ç –º—É–ª—å—Ç—Ñ–∏–ª—å–º –æ—á–µ–Ω—å –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è, –∏ –æ–Ω —Å—Ç–∞–ª –º–æ–∏–º –ª—é–±–∏–º—ã–º. –¢–æ–≥–¥–∞ —è –¥–∞–∂–µ –ø–æ–¥—É–º–∞—Ç—å –Ω–µ –º–æ–≥, —á—Ç–æ —Å–ø—É—Å—Ç—è —Ü–µ–ª—ã—Ö 15 –ª–µ—Ç, —Å—Ç—É–¥–∏—è –≤—ã–ø—É—Å—Ç–∏—Ç –µ–≥–æ —Ñ–∏–ª—å–º-–≤–µ—Ä—Å–∏—é. –ù–æ –µ—Å–ª–∏ –≥–æ–≤–æ—Ä–∏—Ç—å —á–µ—Å—Ç–Ω–æ, —Ç–æ —è –Ω–µ –±—ã–ª –∏–º –≤–ø–µ—á–∞—Ç–ª—ë–Ω. –ú—É–ª—å—Ç—Ñ–∏–ª—å–º –º–Ω–µ –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è –±–æ–ª—å—à–µ, —á–µ–º —Ñ–∏–ª—å–º, –Ω–æ –Ω—É–∂–Ω–æ –æ—Ç–¥–∞—Ç—å –¥–æ–ª–∂–Ω–æ–µ, –∞–∫—Ç–µ—Ä—ã –ø–æ–¥–æ–±—Ä–∞–Ω—ã —Ö–æ—Ä–æ—à–æ, —Ö–æ—Ç—å –∏ –Ω–µ –≤–µ–∑–¥–µ. –í —Ü–µ–ª–æ–º —è –±—ã –ø–æ—Å—Ç–∞–≤–∏–ª –µ–º—É 7/10.
            </div>
        </div>
    </div>
    
    <div class="other-games">
        <h3>–î—Ä—É–≥–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã</h3>
        <p style="font-size: 20px;">–Ø –Ω–µ –æ—Å–æ–±—ã–π –ª—é–±–∏—Ç–µ–ª—å —Å–º–æ—Ç—Ä–µ—Ç—å —Ñ–∏–ª—å–º—ã, —Å–µ—Ä–∏–∞–ª—ã –∏ —É–∂ —Ç–µ–º –±–æ–ª–µ–µ –∞–Ω–∏–º–µ, —Ö–æ—Ç—è —è –∫ —ç—Ç–æ–º—É –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ –æ—Ç–Ω–æ—à—É—Å—å. –í —Å–∫–æ—Ä–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø–ª–∞–Ω–∏—Ä—É—é –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ-—Ç–æ –µ—â–µ.</p>
    </div>
</div>

            <div id="games" class="page">
                <h2>–õ–µ—Ç–Ω—ã–µ –∏–≥—Ä—ã</h2>
                <div class="games-section-title">–õ—é–±–∏–º—ã–µ –∏–≥—Ä—ã</div>
                
                <div class="games-grid">
                    <div class="game-tile">
                        <div class="game-image">
                            <img src="cs2.jpg" alt="C–æunter-Strik–µ 2" onerror="this.style.display='none'; this.parentElement.innerHTML='üéÆ';">
                        </div>
                        <div class="game-title">–°–æunt–µr-Strik–µ 2</div>
                        <div class="game-description">
                            –°–∫–æ–ª—å–∫–æ –º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å —Ö–æ—Ä–æ—à–µ–≥–æ –ø—Ä–æ –Ω–∞—à—É –Ω–µ—Ä–µ–≥–∞—é—â—É—é –∫–æ–Ω—Ç—Ä—É? –Ø –¥—É–º–∞—é... –ü–∞–ª—å—Ü–µ–≤ –æ–¥–Ω–æ–π —Ä—É–∫–∏ –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. –ò–≥—Ä–∞ –Ω–µ–ø–ª–æ—Ö–∞—è, –µ—Å–ª–∏ –≤ –Ω–µ–µ –Ω–µ –∏–≥—Ä–∞—Ç—å. –ß—Ç–æ —è –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ –∏ –¥–µ–ª–∞–ª —ç—Ç–∏–º –ª–µ—Ç–æ–º. –í –æ—Å–Ω–æ–≤–Ω–æ–º –∑–∞—Ö–æ–¥–∏–ª —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é, –≤–µ–¥—å –∏–º–µ–Ω–Ω–æ –ø–æ —Å—Ä–µ–¥–∞–º, —è –º–æ–≥—É –≤—ã–±–∏—Ç—å —Å–µ–±–µ —Å—É–ø–µ—Ä-–∫–µ–π—Å –∑–∞ 26 —Ä—É–±–ª–µ–π. –ú–¥–∞... –ù–æ –∑–∞—Ç–æ —É –º–µ–Ω—è –Ω–∞–∏–≥—Ä–∞–Ω–Ω–æ –≤ –Ω–µ–π 2000 —á–∞—Å–æ–≤(—ç—Ç–æ –º–∞–ª–æ –∫—Å—Ç–∞—Ç–∏). –í—Å—ë.
                        </div>
                    </div>
                    
                    <div class="game-tile">
                        <div class="game-image">
                            <img src="ONESHOT.jpg" alt="OneShot" onerror="this.style.display='none'; this.parentElement.innerHTML='üéÆ';">
                        </div>
                        <div class="game-title">OneShot</div>
                        <div class="game-description">
                            –≠—Ç–∞ –∏–≥—Ä–∞ –≤—ã—à–ª–∞ –≤ 2016 –≥–æ–¥–∞, –Ω–æ —Ä–µ—à–∏–ª –ø–æ–∏–≥—Ä–∞—Ç—å –≤ –Ω–µ–µ —Ç–æ–ª—å–∫–æ —ç—Ç–∏–º –ª–µ—Ç–æ–º. –≠—Ç–∞ –∏–≥—Ä–∞ –ø—Ä–æ–∏–∑–≤–µ–ª–∞ –Ω–∞ –º–µ–Ω—è –Ω–µ–∏–º–æ–≤–µ—Ä–Ω–æ–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ, —Ö–æ—Ç—è –ø–æ —Å—É—Ç–∏, —ç—Ç–æ –ø—Ä–æ—Å—Ç–∞—è —Ö–æ–¥–∏–ª–∫–∞-—Å–æ–±–∏—Ä–∞–ª–∫–∞ –≤ –ø–∏–∫—Å–µ–ª—å–Ω–æ–º —Å—Ç–∏–ª–µ, –Ω–æ —á—Ç–æ-—Ç–æ –≤ –Ω–µ–π –µ—Å—Ç—å —Ç–∞–∫–æ–µ, —á—Ç–æ –Ω–µ –∑–∞—Å—Ç–∞–≤–∏—Ç –º–µ–Ω—è –∑–∞–±—ã—Ç—å –æ –Ω–µ–π –¥–∞–∂–µ —Å–ø—É—Å—Ç—è 20 –ª–µ—Ç. –ö—Å—Ç–∞—Ç–∏ —Å–ø–∞—Å–∏–±–æ —ç—Ç–æ–π –∏–≥—Ä–µ –∑–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–≤—É–∫–æ–≤—ã—Ö —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–π –Ω–∞ –º–æ—ë–º —Å–∞–π—Ç–µ :)
                        </div>
                    </div>
                    
                    <div class="game-tile">
                        <div class="game-image">
                            <img src="eft.jpg" alt="EFT" onerror="this.style.display='none'; this.parentElement.innerHTML='üéÆ';">
                        </div>
                        <div class="game-title">Escape From Tarkov</div>
                        <div class="game-description">
                            –†–µ–π–¥, —Å—Ö—Ä–æ–Ω, –ø–æ—Ç–æ–º –æ–ø—è—Ç—å —Ä–µ–π–¥, –≥–æ–ª–æ–≤–∞-–≥–ª–∞–∑–∞ –æ—Ç –¥–∏–∫–æ–≥–æ, —Å—Ö—Ä–æ–Ω, —Ä–µ–π–¥... –ò —Ç–∞–∫ –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ 400 —á–∞—Å–æ–≤ –≥–µ–π–º–ø–ª–µ—è. O—Ä—É–∂–∏e –∫–ª–∏–Ω–∏—Ç, –≤—Ä–∞–≥–∏ –Ω–µ —É–º–∏—Ä–∞—é—Ç, –∞ —Ç—ã –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ—Ç–ª–µ—Ç–∞–µ—à—å –æ—Ç –æ–¥–Ω–æ–π —Ç—ã—á–∫–∏. –ù–æ –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —ç—Ç–æ, —ç—Ç–∞ –∏–≥—Ä–∞ —Ö–æ—Ä–æ—à–∞, –≤–µ–¥—å –∫—Ç–æ-—Ç–æ –¥–æ–ª–∂–µ–Ω –∑–∞–∫—Ä—ã–≤–∞—Ç—å –∫–≤–µ—Å—Ç—ã —Ç–æ–≥–æ —Å–∞–º–æ–≥–æ –ï–≥–µ—Ä—è. –ü–ª—é—Å–æ–º, –∑–∞ —ç—Ç–æ –ª–µ—Ç–æ —è –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ –≤—ã–ø–æ–ª–Ω–∏–ª –≤—Å–µ –∫–≤–µ—Å—Ç—ã –¥–ª—è –ø–æ–¥—Å—É–º–∫–∞ –ö–∞–ø–ø—ã, –≤ –∫–æ—Ç–æ—Ä—ã–π —è –º–æ–≥—É –ø–æ–ª–æ–∂–∏—Ç—å –±–æ–ª—å—à–µ –Ω–∞–ª—É—Ç–∞–Ω–Ω–æ–≥–æ –¥–æ–±—Ä–∞, –Ω–µ –±–æ—è—Å—å, —á—Ç–æ –ø–æ—Ç–µ—Ä—è—é –µ–≥–æ. –í–æ–æ–±—â–µ–º –∏–≥—Ä–∞ –∏–º–±–∞, –≤—Å–µ–º —Å–æ–≤–µ—Ç—É—é.
                        </div>
                    </div>
                </div>
                
                <div class="other-games">
                    <h3>–î—Ä—É–≥–∏–µ –∏–≥—Ä—ã</h3>
                    <p style="font-size: 18px;"><strong>‚Ä¢ Geometry Dash</strong> - –ø—Ä–æ—Å—Ç–∞—è 2D –∏–≥—Ä–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π —è –Ω–∞–∏–≥—Ä–∞–ª 700 —á–∞—Å–æ–≤... –ú–¥–∞. –ò–≥—Ä–∞—é –≤ –Ω–µ—ë —Å–æ —à–∫–æ–ª—ã, –∞ –µ—Å–ª–∏ –±—ã—Ç—å —Ç–æ—á–Ω–µ, —Ç–æ —Å–æ –≤—Ç–æ—Ä–æ–≥–æ –∫–ª–∞—Å—Å–∞. –ò–∑-–∑–∞ –Ω–µ–µ –º–Ω–µ –ø—Ä–∏—à–ª–æ—Å—å –º–µ–Ω—è—Ç—å —ç–∫—Ä–∞–Ω –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –∏ –ø–æ–∫—É–ø–∞—Ç—å –Ω–æ–≤—ã–π –∂–µ—Å—Ç–∫–∏–π –¥–∏—Å–∫ –Ω–∞ –Ω–æ—É—Ç–±—É–∫. –î—É–º–∞–µ—Ç–µ —è –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–µ—Ä–µ—Å—Ç–∞–ª –≤ –Ω–µ–µ –∏–≥—Ä–∞—Ç—å? –ö–æ–Ω–µ—á–Ω–æ –∂–µ –Ω–µ—Ç.<br><br></p>
                    <p style="font-size: 18px;"><strong>‚Ä¢ Minecraft</strong> - –∫–∞–∫ –∂–µ –±–µ–∑ –Ω–µ–≥–æ? –≠—Ç–∏–º –ª–µ—Ç–æ–º, –Ω–∞ –¥–Ω–µ —Ä–æ–∂–¥–µ–Ω–∏—è –ú–∞–º—ã, —è –Ω–∞–ø–∏–ª—Å—è –∏ –∫—É–ø–∏–ª —Å–µ–±–µ –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã–π –∫–ª—é—á –ú–∞–π–Ω–∞ –∑–∞ 1500 —Ä—É–±–ª–µ–π :)<br><br></p>
                    <p>–í–æ–æ–±—â–µ, —É –º–µ–Ω—è –º–Ω–æ–≥–æ –∏–≥—Ä, –Ω–æ –æ–±–æ –≤—Å–µ—Ö –ø–∏—Å–∞—Ç—å –Ω–µ—Ç —Å–º—ã—Å–ª–∞, –¥–∞ –∏ –∏–≥—Ä–∞–ª —è –ª–µ—Ç–æ–º –≤ –Ω–∏—Ö —Ä–µ–¥–∫–æ.</p>
                </div>
            </div>

            <div id="it" class="page">
                <h2>IT –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å</h2>
                <div class="content">
                    <p style="font-size: 25px;">–õ–µ—Ç–æ–º –º–µ–Ω—è –ø—Ä–∏–≥–ª–∞—Å–∏–ª–∏ –Ω–∞ –ø–æ–¥—Ä–∞–±–æ—Ç–∫—É –≤ –æ—Ç–¥–µ–ª —Ä–µ–∫–ª–∞–º—ã –≥–∏–ø–µ—Ä–º–∞—Ä–∫–µ—Ç–∞. –í —ç—Ç–æ–º –æ—Ç–¥–µ–ª–µ —è, —Ä–∞–±–æ—Ç–∞—è –∑–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º, –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ <strong>Adobe Illustrator</strong> –¥–µ–ª–∞–ª –∏ –ø–µ—á–∞—Ç–∞–ª —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø–ª–∞–∫–∞—Ç—ã –∏ —Ü–µ–Ω–Ω–∏–∫–∏ –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞. –°–≤—è–∑–∞–Ω–æ –ª–∏ —ç—Ç–æ —Å IT? –Ø –Ω–µ –∑–Ω–∞—é. –ù–æ —Å–∫–∞–∑–∞—Ç—å –º–Ω–µ –±–æ–ª—å—à–µ –Ω–µ—á–µ–≥–æ.</p>
                </div>
            </div>

            <div id="achievements" class="page">
                <h2>–ü–æ—Ö–≤–∞—Å—Ç–∞—Ç—å—Å—è</h2>
                <div class="content">
                    <p style="font-size: 30px;"><strong>–í–æ–æ–±—â–µ-—Ç–æ —Ö–≤–∞—Å—Ç–∞—Ç—å—Å—è –Ω–µ —Ö–æ—Ä–æ—à–æ. –ù–æ —Ç–∞–∫ —É–∂ –∏ –±—ã—Ç—å...</strong><br><br></p>
                    <p style="font-size: 25px;">–ò–∑ –ø—Ä–æ—à–ª–æ–≥–æ –ø—É–Ω–∫—Ç–∞, –≤—ã —É–∑–Ω–∞–ª–∏, —á—Ç–æ —è —Ä–∞–±–æ—Ç–∞–ª —ç—Ç–∏–º –ª–µ—Ç–æ–º(–∫—Ä—É—Ç–æ –¥–∞?), –∏ —Å —ç—Ç–æ–π —Ä–∞–±–æ—Ç—ã –º–Ω–µ —É–¥–∞–ª–æ—Å—å –Ω–µ–ø–ª–æ—Ö–æ —Ç–∞–∫ –ø—Ä–∏–ø–æ–¥–Ω—è—Ç—å —Å–≤–æ–π –∫–∞–ø–∏—Ç–∞–ª.<br><br></p>
                    <p style="font-size: 25px;">–ï—â–µ –º–æ–≥—É –ø–æ—Ö–≤–∞—Å—Ç–∞—Ç—å—Å—è —Ç–µ–º, —á—Ç–æ —è –∫—É–ø–∏–ª —Å–µ–±–µ –Ω–æ–≤—ã–π —Å–ø–∏–Ω–Ω–∏–Ω–≥ –¥–ª—è —Ä—ã–±–∞–ª–∫–∏.</p>
                </div>
            </div>

            <div id="sufferings" class="page">
                <h2>–õ–µ—Ç–Ω—ã–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏</h2>
                <div class="content">
                    <p style="font-size: 27px;"><strong>–ê –∫—Ç–æ —Å–µ–π—á–∞—Å –Ω–µ —Å—Ç—Ä–∞–¥–∞–µ—Ç?</strong><br><br></p>
                    <p style="font-size: 20px;">–õ–∏—á–Ω–æ —è —ç—Ç–∏–º –ª–µ—Ç–æ–º —Å—Ç—Ä–∞–¥–∞–ª —Ç–æ–ª—å–∫–æ –Ω–µ–≤—ã–Ω–æ—Å–∏–º–æ–π –∂–∞—Ä–æ–π, –æ—Å–æ–±–µ–Ω–Ω–æ, –∫–æ–≥–¥–∞ –∏–¥–µ—à—å —É—Å—Ç–∞–≤—à–∏–π —Å —Ä–∞–±–æ—Ç—ã, –∞ —Ç–µ–±–µ –µ—â–µ –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç –µ—Ö–∞—Ç—å –Ω–∞ —ç–ª–µ–∫—Ç—Ä–∏—á–∫–µ, –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—Ä–æ–¥—É –±–æ–ª—å—à–µ, —á–µ–º –≤ –ö–∏—Ç–∞–µ.<br><br></p>
                    <p style="font-size: 20px;">–ï—â–µ –º–æ–≥—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –≥—Ä—É—Å—Ç–Ω—É—é, –∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∂—É—Ç–∫—É—é –∏—Å—Ç–æ—Ä–∏—é –æ —Ç–æ–º, –∫–∞–∫ –º—ã –Ω–∞ 3 –¥–Ω—è –ø–æ—Ç–µ—Ä—è–ª–∏ –Ω–∞—à–µ–≥–æ –∫–æ—Ç–∞...<br> –í–µ—á–µ—Ä–æ–º –∫–∞–∫–æ–≥–æ-—Ç–æ –¥–Ω—è, –º—ã –Ω–µ –∑–∞–º–µ—Ç–∏–ª–∏, –∫–∞–∫ –Ω–∞—à –∫–æ—Ç —Å–±–µ–∂–∞–ª –∏–∑ –∫–≤–∞—Ä—Ç–∏—Ä—ã –≤ –ø–æ–¥—ä–µ–∑–¥. –ó–∞–º–µ—Ç–∏–ª–∏ –ø—Ä–æ–ø–∞–∂—É —Ç–æ–ª—å–∫–æ —É—Ç—Ä–æ–º –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å. –ò—Å–∫–∞–ª–∏ –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –¥–≤—É—Ö —Å—É—Ç–æ–∫, –Ω–æ –±–µ–∑—É—Å–ø–µ—à–Ω–æ. –í–æ –≤—Ç–æ—Ä–æ–π –¥–µ–Ω—å, –º—ã —Å –ú–∞–º–æ–π —Å–æ–±—Ä–∞–ª–∏—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å 3-4 –ø–æ–¥—ä–µ–∑–¥ –Ω–∞—à–µ–≥–æ –¥–æ–º–∞. –ò —è, –ø—Ä–æ—Ö–æ–¥—è –º–∏–º–æ 3-–≥–æ –ø–æ–¥—ä–µ–∑–¥–∞, —Å–ª—ã—à—É, –∫–∞–∫ —Å –≥—Ä–æ—Ö–æ—Ç–æ–º —á—Ç–æ-—Ç–æ —É–ø–∞–ª–æ –Ω–∞ –∑–µ–º–ª—é. –ü–æ–¥–æ–π–¥—è –ø–æ–±–ª–∏–∂–µ, —á—Ç–æ–±—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å, —è –ø–æ–Ω—è–ª, —á—Ç–æ —ç—Ç–æ –∏–∑ –æ–∫–Ω–∞ –≤—ã–ø—Ä—ã–≥–Ω—É–ª —á–µ–π-—Ç–æ —Å–µ—Ä—ã–π –∫–æ—Ç, –Ω–µ –Ω–∞—à. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ, —Å 9-–≥–æ —ç—Ç–∞–∂–∞. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é... –ö–æ—Ç —Å–∫–æ–Ω—á–∞–ª—Å—è –Ω–∞ –º–µ—Å—Ç–µ... –ü–æ—Å–ª–µ –≤—Å–µ—Ö —ç—Ç–∏—Ö —Å–æ–±—ã—Ç–∏–π —è –Ω–µ –º–æ–≥ –Ω–æ—Ä–º–∞–ª—å–Ω–æ —Å–ø–∞—Ç—å. –ù–æ –Ω–∞ —Ç—Ä–µ—Ç–∏–π –¥–µ–Ω—å, –º—ã —Å –º–∞–º–æ–π —Ä–µ—à–∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—à –ø–æ–¥–≤–∞–ª. –û–¥–µ–≤ –∑–∞—â–∏—Ç–Ω—É—é —ç–∫–∏–ø–∏—Ä–æ–≤–∫—É, —Ç.–∫. –≤ –ø–æ–¥–≤–∞–ª–µ –±—ã–ª–æ –æ—á–µ–Ω—å –º–Ω–æ–≥–æ –±–ª–æ—Ö, –∏ –≤–∑—è–≤ —Ñ–æ–Ω–∞—Ä–∏–∫, —è –æ—Ç–ø—Ä–∞–≤–∏–ª—Å—è –Ω–∞ –ø–æ–∏—Å–∫–∏... –ò —Å–ø—É—Å—Ç—è –º–∏–Ω—É—Ç 10, —è –Ω–∞—Ö–æ–∂—É –µ–≥–æ –≤ –¥–∞–ª—å–Ω–µ–π —á–∞—Å—Ç–∏ –ø–æ–¥–≤–∞–ª–∞, –≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–º –¥–ª—è –º–µ–Ω—è –º–µ—Å—Ç–µ. –ü—Ä–∏–º–∞–Ω–∏–≤ –µ–≥–æ –∫–æ—Ä–º–æ–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –æ—á–µ–Ω—å –ø—É–≥–ª–∏–≤—ã–π, –∏ –Ω–µ —Ö–æ—Ç–µ–ª –∏–¥—Ç–∏ –∫–æ –º–Ω–µ, —è –≤–∑—è–ª –µ–≥–æ –∏ –ø–æ—Ç–∞—â–∏–ª –¥–æ–º–æ–π.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–∏–Ω–∏-–∏–≥—Ä–∞ –†—É–ª–µ—Ç–∫–∞ -->
    <div id="rouletteGame" class="modal">
        <div class="roulette-game">
            <h3>üé∞ –ö–∞–∑–∏–Ω–æ –†—É–ª–µ—Ç–∫–∞ üé∞</h3>
            
            <div class="game-info">
                <div>–ë–∞–ª–∞–Ω—Å: <span class="balance" id="balance">200</span> ‚ÇΩ</div>
                <div>–°—Ç–∞–≤–∫–∞: <span class="bet-amount" id="betAmount">10</span> ‚ÇΩ</div>
            </div>

            <div class="bet-controls">
                <button class="bet-btn" onclick="changeBet(-10); playCancelSound()" onmouseover="playHoverSound()">-10</button>
                <button class="bet-btn" onclick="changeBet(-5); playCancelSound()" onmouseover="playHoverSound()">-5</button>
                <button class="bet-btn" onclick="changeBet(5); playClickSound()" onmouseover="playHoverSound()">+5</button>
                <button class="bet-btn" onclick="changeBet(10); playClickSound()" onmouseover="playHoverSound()">+10</button>
            </div>

            <div class="betting-area">
                <div class="bet-field red" onclick="selectColor('red'); playClickSound()" onmouseover="playHoverSound()">–ö–†–ê–°–ù–û–ï</div>
                <div class="bet-field black" onclick="selectColor('black'); playClickSound()" onmouseover="playHoverSound()">–ß–Å–†–ù–û–ï</div>
            </div>

            <button class="spin-btn" id="spinBtn" onclick="spinRoulette(); playClickSound()" onmouseover="playHoverSound()">–ö—Ä—É—Ç–∏—Ç—å</button>

            <div class="result-display">
                <div class="result-text" id="resultText">–°–¥–µ–ª–∞–π—Ç–µ —Å—Ç–∞–≤–∫—É –Ω–∞ —Ü–≤–µ—Ç –∏ –∫—Ä—É—Ç–∏—Ç–µ!</div>
            </div>

            <div class="money-maker">
                <h4>–ó–∞—Ä–∞–±–æ—Ç–∞—Ç—å –¥–µ–Ω—å–≥–∏:</h4>
                <button class="dodep-btn" onclick="makeMoney()" onmouseover="playHoverSound()">–î–æ–¥–µ–ø (+2 ‚ÇΩ)</button>
            </div>

            <div>
                <button class="modal-btn" onclick="hideModalWithSound('rouletteGame')" onmouseover="playHoverSound()">–í—ã–π—Ç–∏</button>
            </div>
        </div>
    </div>

    <!-- –ú–∏–Ω–∏-–∏–≥—Ä–∞ AimLabs -->
    <div id="aimGame" class="modal">
        <div class="aim-game">
            <h3>üéØ AimLabs –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ üéØ</h3>
            
            <div class="game-stats">
                <div>–ü–æ–ø–∞–¥–∞–Ω–∏—è: <span id="hits">0</span></div>
                <div>–ü—Ä–æ–º–∞—Ö–∏: <span id="misses">0</span></div>
                <div>–í—Ä–µ–º—è: <span id="timer">30</span>s</div>
            </div>

            <div class="progress-bar">
                <div class="progress" id="gameProgress"></div>
            </div>

            <div class="game-area" id="gameArea">
                <div class="crosshair" id="crosshair"></div>
            </div>

            <div>
                <button class="modal-btn" onclick="startAimGame(); playClickSound()" onmouseover="playHoverSound()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
                <button class="modal-btn" onclick="hideModalWithSound('aimGame')" onmouseover="playHoverSound()">–í—ã–π—Ç–∏</button>
            </div>

            <div class="results" id="aimResults" style="display: none;">
                <h4>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h4>
                <div>–¢–æ—á–Ω–æ—Å—Ç—å: <span id="accuracy">0%</span></div>
                <div>–û–±—â–∏–π —Å—á–µ—Ç: <span id="totalScore">0</span></div>
                <div>–ü–æ–ø–∞–¥–∞–Ω–∏–π: <span id="finalHits">0</span></div>
            </div>
        </div>
    </div>

    <!-- –ú–∏–Ω–∏-–∏–≥—Ä–∞ PixelPaint -->
    <div id="pixelGame" class="modal">
        <div class="pixel-game">
            <div class="pixel-controls-panel">
                <h3>üé® PixelPaint</h3>
                
                <div class="color-picker-container">
                    <span style="color: #f0f0f0; font-size: 0.9em;">–í—ã–±—Ä–∞—Ç—å —Ü–≤–µ—Ç:</span>
                    <div class="color-preview" id="colorPreview" onclick="document.getElementById('colorInput').click()"></div>
                    <input type="color" id="colorInput" class="color-palette-input" onchange="selectColorFromPicker(this.value)">
                </div>

                <!-- –ù–µ–¥–∞–≤–Ω–∏–µ —Ü–≤–µ—Ç–∞ -->
                <div class="recent-colors-container">
                    <div class="recent-colors-label">–ù–µ–¥–∞–≤–Ω–∏–µ —Ü–≤–µ—Ç–∞</div>
                    <div class="recent-colors" id="recentColors">
                        <div class="recent-color-item empty" title="–ü—É—Å—Ç–æ"></div>
                        <div class="recent-color-item empty" title="–ü—É—Å—Ç–æ"></div>
                        <div class="recent-color-item empty" title="–ü—É—Å—Ç–æ"></div>
                        <div class="recent-color-item empty" title="–ü—É—Å—Ç–æ"></div>
                        <div class="recent-color-item empty" title="–ü—É—Å—Ç–æ"></div>
                        <div class="recent-color-item empty" title="–ü—É—Å—Ç–æ"></div>
                    </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∏ –æ—Ç–º–µ–Ω—ã/–ø–æ–≤—Ç–æ—Ä–∞ -->
                <div class="undo-redo-controls">
                    <button class="undo-btn" id="undoBtn" onclick="undoAction()" title="Ctrl+Z">‚Ü∂ –û—Ç–º–µ–Ω–∞</button>
                    <button class="redo-btn" id="redoBtn" onclick="redoAction()" title="Ctrl+Y">‚Ü∑ –ü–æ–≤—Ç–æ—Ä</button>
                </div>

                <!-- –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ -->
                <div class="tools-panel">
                    <div class="tool-label">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:</div>
                    <button class="tool-btn" id="brushTool" onclick="selectTool('brush')">üñåÔ∏è –ö–∏—Å—Ç—å</button>
                    <button class="tool-btn" id="fillTool" onclick="selectTool('fill')">üíß –ó–∞–ª–∏–≤–∫–∞</button>
                    <button class="tool-btn" id="selectionTool" onclick="selectTool('selection')">‚úÇÔ∏è –í—ã–¥–µ–ª–µ–Ω–∏–µ</button>
                    
                    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∫–∏—Å—Ç–∏ -->
                    <div class="tool-controls" id="brushControls">
                        <div class="tool-label">–†–∞–∑–º–µ—Ä –∫–∏—Å—Ç–∏: <span id="brushSizeValue">1</span>px</div>
                        <input type="range" id="brushSize" min="1" max="10" value="1" class="template-slider" oninput="updateBrushSize(this.value)">
                    </div>
                    
                    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è -->
                    <div class="tool-controls" id="selectionControls">
                        <div class="selection-controls">
                            <button class="pixel-btn-clear" onclick="clearSelection()">üìÑ –û—á–∏—Å—Ç–∏—Ç—å –æ–±–ª–∞—Å—Ç—å</button>
                            <button class="pixel-btn" onclick="fillSelection()">üíß –ó–∞–ª–∏—Ç—å –æ–±–ª–∞—Å—Ç—å</button>

                            <!-- –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–º–µ–Ω—ã –≤—ã–¥–µ–ª–µ–Ω–∏—è -->
                            <button class="deselect-btn" id="deselectBtn" onclick="deselectArea()" disabled>‚ùå –û—Ç–º–µ–Ω–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ</button>
                            
                            <div class="color-replace-controls">
                                <!-- –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞: –ó–∞–º–µ–Ω–∏—Ç—å + –∫–Ω–æ–ø–∫–∞ –ø–∏–ø–µ—Ç–∫–∏ + –∫–≤–∞–¥—Ä–∞—Ç–∏–∫ -->
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                    <span style="color: #f0f0f0; font-size: 0.8em;">–ó–∞–º–µ–Ω–∏—Ç—å:</span>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <button class="pixel-btn" id="pipetteBtn" style="padding: 4px 8px; font-size: 0.7em; min-width: 30px;" title="–í—ã–±—Ä–∞—Ç—å —Ü–≤–µ—Ç –ø–∏–ø–µ—Ç–∫–æ–π">üñçÔ∏è<strong>–ü–∏–ø–µ—Ç–∫–∞</strong></button>
                                        <div class="color-replace-preview" id="replaceFromColor" 
                                            style="width: 30px; height: 30px; background-color: #ffffff;
                                                    background-image: linear-gradient(45deg, #333 25%, transparent 25%), 
                                                                    linear-gradient(-45deg, #333 25%, transparent 25%), 
                                                                    linear-gradient(45deg, transparent 75%, #333 75%), 
                                                                    linear-gradient(-45deg, transparent 75%, #333 75%);
                                                    background-size: 4px 4px;
                                                    background-position: 0 0, 0 2px, 2px -2px, -2px 0px;"></div>
                                    </div>
                                </div>
                                
                                <!-- –í—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞: –ù–∞ + –∫–≤–∞–¥—Ä–∞—Ç–∏–∫ –≤—ã–±–æ—Ä–∞ —Ü–≤–µ—Ç–∞ -->
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                    <span style="color: #f0f0f0; font-size: 0.8em;">–ù–∞:</span>
                                    <div class="color-preview" id="replaceToColorPreview" onclick="document.getElementById('replaceToInput').click()" style="width: 30px; height: 30px; cursor: pointer;"></div>
                                    <input type="color" id="replaceToInput" class="color-palette-input" onchange="updateReplaceToColor(this.value)" style="display: none">
                                </div>
                                
                                <!-- –¢—Ä–µ—Ç—å—è —Å—Ç—Ä–æ–∫–∞: –ö–Ω–æ–ø–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è -->
                                <button class="pixel-btn" onclick="replaceSelectionColor()" style="width: 100%;">‚úîÔ∏è –ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>
                </div>


                <button class="pixel-btn" onclick="clearCanvas()" onmouseover="playHoverSound()">üìÑ –û—á–∏—Å—Ç–∏—Ç—å —Ö–æ–ª—Å—Ç</button>
                <button class="pixel-btn" onclick="addNewCanvas()" onmouseover="playHoverSound()">‚ûï –ù–æ–≤—ã–π —Ö–æ–ª—Å—Ç</button>
                <button class="pixel-btn" onclick="deleteCurrentCanvas()" onmouseover="playHoverSound()">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å —Ö–æ–ª—Å—Ç</button>
                <button class="pixel-btn" onclick="saveDrawing()" onmouseover="playHoverSound()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∏—Å—É–Ω–æ–∫</button>
                <button class="pixel-btn" onclick="document.getElementById('templateInput').click()" onmouseover="playHoverSound()">üìé –ó–∞–≥—Ä—É–∑–∏—Ç—å —à–∞–±–ª–æ–Ω</button>
                <input type="file" id="templateInput" accept="image/*" style="display: none" onchange="loadTemplate(this.files[0])">

                <div class="canvas-management">
                    <!-- –°—á–µ—Ç—á–∏–∫ —Ö–æ–ª—Å—Ç–æ–≤ —Å–≤–µ—Ä—Ö—É -->
                    <div class="canvas-counter" id="canvasCounter">–•–æ–ª—Å—Ç—ã: 1/5</div>
                    
                    <!-- –ö–Ω–æ–ø–∫–∏ —Ö–æ–ª—Å—Ç–æ–≤ –ø–∏—Ä–∞–º–∏–¥–∫–æ–π -->
                    <div class="canvas-tabs-container">
                        <div class="canvas-tabs-buttons" id="canvasButtons"></div>
                        <div class="limit-info" id="limitInfo" style="display: none;">–õ–∏–º–∏—Ç –¥–æ—Å—Ç–∏–≥–Ω—É—Ç!</div>
                    </div>
                </div>

                <div class="template-controls" id="templateControls" style="display: none;">
                    <div>–ú–∞—Å—à—Ç–∞–± —à–∞–±–ª–æ–Ω–∞:</div>
                    <input type="range" class="template-slider" id="templateScale" min="0.1" max="2" step="0.1" value="1" oninput="updateTemplateScale(this.value)">

                    <div>–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —à–∞–±–ª–æ–Ω–∞:</div>
                    <input type="range" class="template-slider" id="templateOpacity" min="0.1" max="1" step="0.1" value="0.5" oninput="updateTemplateOpacity(this.value)">
                    
                    
                    <div class="template-movement">
                        <div>–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞:</div>
                        <div class="movement-buttons">
                            <button class="movement-btn up" onclick="moveTemplate(0, -1)">‚Üë</button>
                            <button class="movement-btn left" onclick="moveTemplate(-1, 0)">‚Üê</button>
                            <button class="movement-btn center" onclick="toggleTemplateVisibility()">üëÅ</button>
                            <button class="movement-btn right" onclick="moveTemplate(1, 0)">‚Üí</button>
                            <button class="movement-btn down" onclick="moveTemplate(0, 1)">‚Üì</button>
                        </div>
                    </div>
                    
                    <button class="pixel-btn" onclick="removeTemplate()" onmouseover="playHoverSound()" style="margin-top: 10px;">–£–¥–∞–ª–∏—Ç—å —à–∞–±–ª–æ–Ω</button>
                </div>

                <div class="canvas-tabs" id="canvasTabs"></div>

                <div class="game-info">
                    <div><strong>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</strong><br> –†–∏—Å–æ–≤–∞–Ω–∏–µ (–õ–ö–ú)<br>–õ–∞—Å—Ç–∏–∫ (–ü–ö–ú)<br>–ü–∏–ø–µ—Ç–∫–∞ (ALT+–õ–ö–ú)</div>
                </div>
            </div>

            <div class="pixel-canvas-container">
                <div class="pixel-area" id="pixelArea">
                    <div class="pixel-grid"></div>
                    <div class="template-overlay" id="templateOverlay"></div>
                </div>
                
                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
                <div class="tool-info-panel">
                    <div class="selected-tool">–í—ã–±—Ä–∞–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: <span id="currentToolName">–ö–∏—Å—Ç—å</span></div>
                    <div class="tool-description" id="toolDescription">–õ–ö–ú - —Ä–∏—Å–æ–≤–∞—Ç—å, –ü–ö–ú - —Å—Ç–∏—Ä–∞—Ç—å, ALT+–õ–ö–ú - –ø–∏–ø–µ—Ç–∫–∞.</div>
                </div>
            </div>

            <div style="position: absolute; bottom: 20px; right: 20px;">
                <button class="modal-btn" onclick="hideModalWithSound('pixelGame')" onmouseover="playHoverSound()">–í—ã–π—Ç–∏</button>
            </div>
        </div>
    </div>

    <!-- –°–µ–∫—Ä–µ—Ç–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã -->
    <div class="dark-overlay" id="darkOverlay"></div>
    
    <div class="secret-text" id="secretText"></div>
    
    <!-- –°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–Ω–æ–ø–∫–∞ (–±—É–¥–µ—Ç –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º) -->
    <div class="secret-button" id="secretButton">
        <img src="clover.png" alt="–°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–Ω–æ–ø–∫–∞">
    </div>

    <!-- –°–µ–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ–∫—Å—Ç -->
    <div class="secret-text" id="secretText"></div>

    <!-- –°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–Ω–æ–ø–∫–∞ (–±—É–¥–µ—Ç –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º) -->
    <div class="secret-button" id="secretButton">
        <img src="clover.png" alt="–°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–Ω–æ–ø–∫–∞">
    </div>

    <!-- –°–ò–°–¢–ï–ú–ù–û–ï –°–û–û–ë–©–ï–ù–ò–ï –ü–û–í–†–ï–ñ–î–ï–ù–ò–Ø - –í–°–¢–ê–í–¨–¢–ï –≠–¢–û–¢ –ë–õ–û–ö -->
    <!-- –°–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è -->
    <div class="system-damage-overlay" id="systemDamageOverlay">
        <div class="system-damage-text" id="systemDamageText">[–°–∏—Å—Ç–µ–º–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞...]</div>
    </div>

    <!-- –ù–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –∫–ª–µ–≤–µ—Ä–∞ –¥–ª—è —Å–ª–æ–º–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ -->
    <div class="broken-clover" id="brokenClover" onclick="showSystemDamage()">
        <img src="clover2.png" alt="–°–∏—Å—Ç–µ–º–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞">
    </div>
    <!-- –ö–û–ù–ï–¶ –ë–õ–û–ö–ê –î–õ–Ø –í–°–¢–ê–í–ö–ò -->

    <!-- –°–µ–∫—Ä–µ—Ç–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç 404 -->
    <div class="secret-404" onclick="show404()" onmouseover="playHoverSound()">
        <img src="404.png" alt="–°–µ–∫—Ä–µ—Ç">
    </div>

    <!-- –û–∫–Ω–æ –æ—à–∏–±–∫–∏ 404 -->
    <div id="errorModal" class="error-modal">
        <div class="error-content">
            <div class="error-404">404</div>
            <div class="error-text">–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞...</div>
            <button class="error-btn" onclick="hide404()">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</button>
        </div>
    </div>

    <!-- –ê—É–¥–∏–æ –¥–ª—è –º—É–∑—ã–∫–∏ -->
    <audio id="secretMusic" loop>
        <source src="top_secret.mp3" type="audio/mpeg">
    </audio>
    <div class="secret-buttons-container" id="secretButtonsContainer" style="display: none;"></div>

    <!-- –ù–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Å–µ–∫—Ä–µ—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã -->
    <div class="yes-no-container" id="yesNoContainer">
        <button class="yes-no-button" id="yesButton">–î–∞</button>
        <button class="yes-no-button" id="noButton">–ù–µ—Ç</button>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentTrack = 0;
        let isPlaying = false;
        let musicPlayers = [];
        let brokenMusicActive = false;
        let interfaceLocked = false;
        let wasMusicPlayingBeforeSecret = false; // –î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –º—É–∑—ã–∫–∏ –¥–æ —Å–µ–∫—Ä–µ—Ç–∞
        let wasMusicPausedBeforeSecret = false; // –ù–æ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–∞—É–∑—ã
        let currentMusicVolume = 0.5; // –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –≥—Ä–æ–º–∫–æ—Å—Ç–∏
        let systemDamageClickCount = 0;

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
        let currentTool = 'brush';
        let brushSize = 1;
        let isSelecting = false;
        let selectionStartX = 0;
        let selectionStartY = 0;
        let selectionEndX = 0;
        let selectionEndY = 0;
        let replaceFromColor = '#ffffff';
        let replaceToColor = '#000000';

        // –û–ø–∏—Å–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
        const toolDescriptions = {
            brush: "–õ–ö–ú - —Ä–∏—Å–æ–≤–∞—Ç—å –∫–∏—Å—Ç—å—é, –ü–ö–ú - —Å—Ç–∏—Ä–∞—Ç—å, ALT+–õ–ö–ú - –≤—ã–±—Ä–∞—Ç—å —Ü–≤–µ—Ç –ø–∏–ø–µ—Ç–∫–æ–π, SHIFT - –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ —Ä–∏—Å–æ–≤–∞–Ω–∏–µ",
            fill: "–õ–ö–ú - –∑–∞–ª–∏—Ç—å –æ–±–ª–∞—Å—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ü–≤–µ—Ç–æ–º, ALT+–õ–ö–ú - –≤—ã–±—Ä–∞—Ç—å —Ü–≤–µ—Ç –ø–∏–ø–µ—Ç–∫–æ–π",
            selection: "–õ–ö–ú - –≤—ã–¥–µ–ª–∏—Ç—å –æ–±–ª–∞—Å—Ç—å, –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º"
        };

        // –ù–∞–∑–≤–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        const toolNames = {
            brush: "–ö–∏—Å—Ç—å",
            fill: "–ó–∞–ª–∏–≤–∫–∞", 
            selection: "–í—ã–¥–µ–ª–µ–Ω–∏–µ"
        };

        // –ù–∞–∑–≤–∞–Ω–∏—è —Ç—Ä–µ–∫–æ–≤ (–º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å)
        const trackNames = [
            "Into The Light",
            "Children Of The Ruins", 
            "On Little Cat Feet",
            "To Sleep",
            "My Burden Is Light",
            "Niko And The World Machine"
        ];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º—É–∑—ã–∫–∞–ª—å–Ω–æ–≥–æ –ø–ª–µ–µ—Ä–∞
        function initMusicPlayer() {
            // –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ —Å –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
            musicPlayers = [
                document.getElementById('music1'),
                document.getElementById('music2'), 
                document.getElementById('music3'),
                document.getElementById('music4'),
                document.getElementById('music5'),
                document.getElementById('music6')
            ];
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –≥—Ä–æ–º–∫–æ—Å—Ç—å –¥–ª—è –≤—Å–µ—Ö –ø–ª–µ–µ—Ä–æ–≤
            const musicVolume = document.getElementById('musicVolume').value / 100;
            currentMusicVolume = musicVolume; // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â—É—é –≥—Ä–æ–º–∫–æ—Å—Ç—å
            musicPlayers.forEach(player => {
                player.volume = musicVolume;
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ç—Ä–µ–∫–æ–≤
            musicPlayers.forEach((player, index) => {
                player.addEventListener('ended', function() {
                    if (!brokenMusicActive && !interfaceLocked) {
                        nextTrack();
                    }
                });
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
        function togglePlay() {
            if (brokenMusicActive || interfaceLocked) {
                playCancelSound();
                return;
            }
            
            // –ï—Å–ª–∏ –º—É–∑—ã–∫–∞ –≤—ã–∫–ª—é—á–µ–Ω–∞, –≤–∫–ª—é—á–∞–µ–º –ø–µ—Ä–≤—ã–π —Ç—Ä–µ–∫
            if (currentTrack === 0) {
                selectTrack(1);
                playMusic();
                return;
            }
            
            // –ï—Å–ª–∏ –º—É–∑—ã–∫–∞ –∏–≥—Ä–∞–µ—Ç, —Å—Ç–∞–≤–∏–º –Ω–∞ –ø–∞—É–∑—É, –∏–Ω–∞—á–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º
            if (isPlaying) {
                pauseMusic();
            } else {
                playMusic();
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –º—É–∑—ã–∫–∏
        function playMusic() {
            if (brokenMusicActive || interfaceLocked) return;
            
            if (currentTrack > 0) {
                musicPlayers[currentTrack - 1].play();
                isPlaying = true;
                document.getElementById('playBtn').textContent = '‚è∏';
                document.getElementById('trackInfo').textContent = trackNames[currentTrack - 1];
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–∞—É–∑—ã –º—É–∑—ã–∫–∏
        function pauseMusic() {
            if (brokenMusicActive || interfaceLocked) return;
            
            if (currentTrack > 0) {
                musicPlayers[currentTrack - 1].pause();
                isPlaying = false;
                document.getElementById('playBtn').textContent = '‚ñ∂';;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ —Ç—Ä–µ–∫–∞
        function selectTrack(trackNumber) {
            if (brokenMusicActive || interfaceLocked) return;
            
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —Ç—Ä–µ–∫
            if (currentTrack > 0) {
                musicPlayers[currentTrack - 1].pause();
                musicPlayers[currentTrack - 1].currentTime = 0;
            }
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π —Ç—Ä–µ–∫
            currentTrack = trackNumber;
            
            // –ï—Å–ª–∏ –º—É–∑—ã–∫–∞ –±—ã–ª–∞ –≤–∫–ª—é—á–µ–Ω–∞, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –Ω–æ–≤—ã–π —Ç—Ä–µ–∫
            if (isPlaying) {
                playMusic();
            } else {
                document.getElementById('trackInfo').textContent = trackNames[currentTrack - 1];
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ç—Ä–µ–∫–∞
        function nextTrack() {
            if (brokenMusicActive || interfaceLocked) return;
            
            let next = currentTrack + 1;
            if (next > 6) next = 1;
            selectTrack(next);
        }

        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ç—Ä–µ–∫–∞
        function prevTrack() {
            if (brokenMusicActive || interfaceLocked) return;
            
            let prev = currentTrack - 1;
            if (prev < 1) prev = 6;
            selectTrack(prev);
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–ª–∞–≤–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –º—É–∑—ã–∫–∏
        function fadeOutMusic(callback) {
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º—É–∑—ã–∫–∏ –ø–µ—Ä–µ–¥ —Å–µ–∫—Ä–µ—Ç–æ–º
            wasMusicPlayingBeforeSecret = isPlaying;
            wasMusicPausedBeforeSecret = !isPlaying && currentTrack > 0;
            
            if (currentTrack === 0 || !isPlaying) {
                if (callback) callback();
                return;
            }
            
            const fadeDuration = 1000; // 1 —Å–µ–∫—É–Ω–¥–∞
            const interval = 50;
            const steps = fadeDuration / interval;
            const stepSize = currentMusicVolume / steps;
            let currentStep = 0;
            
            function reduceVolume() {
                currentStep++;
                if (currentStep < steps) {
                    musicPlayers[currentTrack - 1].volume = Math.max(0, currentMusicVolume - (stepSize * currentStep));
                    setTimeout(reduceVolume, interval);
                } else {
                    musicPlayers[currentTrack - 1].pause();
                    musicPlayers[currentTrack - 1].volume = currentMusicVolume; // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–æ–º–∫–æ—Å—Ç—å
                    if (callback) callback();
                }
            }
            
            reduceVolume();
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–ª–∞–≤–Ω–æ–≥–æ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º—É–∑—ã–∫–∏
        function fadeInMusic() {
            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º—É–∑—ã–∫—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∞ –∏–≥—Ä–∞–ª–∞ –¥–æ —Å–µ–∫—Ä–µ—Ç–∞
            if (currentTrack === 0 || !wasMusicPlayingBeforeSecret) return;
            
            const fadeDuration = 1000; // 1 —Å–µ–∫—É–Ω–¥–∞
            const interval = 50;
            const steps = fadeDuration / interval;
            const stepSize = currentMusicVolume / steps;
            let currentStep = 0;
            
            musicPlayers[currentTrack - 1].volume = 0;
            musicPlayers[currentTrack - 1].play();
            isPlaying = true;
            document.getElementById('playBtn').textContent = '‚è∏';
            
            function increaseVolume() {
                currentStep++;
                if (currentStep < steps) {
                    musicPlayers[currentTrack - 1].volume = Math.min(currentMusicVolume, stepSize * currentStep);
                    setTimeout(increaseVolume, interval);
                } else {
                    musicPlayers[currentTrack - 1].volume = currentMusicVolume;
                }
            }
            
            increaseVolume();
        }

        // –§—É–Ω–∫—Ü–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function lockInterface() {
            interfaceLocked = true;
            document.body.classList.add('interface-locked');
            
            // –û—Ç–∫–ª—é—á–∞–µ–º –≤—Å–µ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            document.querySelectorAll('button, .side-btn, .game-btn, .secret-404, .volume-slider').forEach(element => {
                element.style.pointerEvents = 'none';
                element.style.cursor = 'not-allowed';
            });
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã
            document.querySelectorAll('.left-sidebar, .page, .logo-container, .volume-controls, .side-btn, .game-btn, .player-btn').forEach(element => {
                const computedStyle = window.getComputedStyle(element);
                element.style.borderRadius = computedStyle.borderRadius;
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –º—É–∑—ã–∫–∞–ª—å–Ω–æ–≥–æ –ø–ª–µ–µ—Ä–∞
        function disableMusicPlayer() {
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –º—É–∑—ã–∫—É
            if (currentTrack > 0) {
                musicPlayers[currentTrack - 1].pause();
                musicPlayers[currentTrack - 1].currentTime = 0;
            }
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥
            brokenMusicActive = true;
            currentTrack = 0;
            isPlaying = false;
        }

        // –§—É–Ω–∫—Ü–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è —Å–ª–æ–º–∞–Ω–Ω–æ–π –º—É–∑—ã–∫–∏
        function playBrokenMusic() {
            const brokenMusic = document.getElementById('musicBroken');
            const musicVolume = document.getElementById('musicVolume').value / 100;
            
            brokenMusic.volume = musicVolume;
            brokenMusic.loop = true;
            brokenMusic.play();
            
            document.getElementById('trackInfo').textContent = "My Burden Is Dead";
        }
        let currentGameType = '';
        let balance = 200;
        let currentBet = 10;
        let selectedColor = null;
        let isSpinning = false;
        let isThirdClickHandled = false;
        let secretYesNoHandler = null;

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è AimLabs
        let aimGameActive = false;
        let hits = 0;
        let misses = 0;
        let timeLeft = 30;
        let gameTimer;
        let targetTimer;
        let currentTargets = [];

        // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ª–∞–º–ø–æ—á–∫–∏
        let isLampOn = true;

        // –°–µ–∫—Ä–µ—Ç–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        const secretButton = document.getElementById('secretButton');
        const darkOverlay = document.getElementById('darkOverlay');
        const secretText = document.getElementById('secretText');
        const secretMusic = document.getElementById('secretMusic');
        const yesNoContainer = document.getElementById('yesNoContainer');
        const yesButton = document.getElementById('yesButton');
        const noButton = document.getElementById('noButton');
        const alertWindow = document.getElementById('alertWindow');
        const alertInput = document.getElementById('alertInput');
        
        let secretClickCount = 0;
        let currentTextIndex = 0;
        let secretClickHandler = null;

        let lampClickCount = 0;
        let lastLampClickTime = 0;
        let isLampBroken = false;
        const LAMP_CLICK_THRESHOLD = 300; // 300ms –º–µ–∂–¥—É –∫–ª–∏–∫–∞–º–∏
        const LAMP_CLICKS_NEEDED = 15; // 6 –±—ã—Å—Ç—Ä—ã—Ö –∫–ª–∏–∫–æ–≤

        // –§—É–Ω–∫—Ü–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∑–≤—É–∫–∞ —Ä–∞–∑–±–∏—Ç–∏—è —Å—Ç–µ–∫–ª–∞
        function playGlassSound() {
            const sound = document.getElementById('glassSound');
            const volume = document.getElementById('sfxVolume').value / 100;
            sound.currentTime = 0;
            sound.volume = volume;
            sound.play().catch(e => console.log('Glass sound error:', e));
        }

        // –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±—ã—Å—Ç—Ä—ã—Ö –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –ª–∞–º–ø–æ—á–∫—É
        function handleFastLampClicks() {
            const currentTime = new Date().getTime();
            const timeDiff = currentTime - lastLampClickTime;
            
            // –ï—Å–ª–∏ –ø—Ä–æ—à–ª–æ –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ —á–µ–º –ø–æ—Ä–æ–≥, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
            if (timeDiff > LAMP_CLICK_THRESHOLD) {
                lampClickCount = 1;
            } else {
                lampClickCount++;
            }
            
            lastLampClickTime = currentTime;
            
            // –ï—Å–ª–∏ –Ω–∞–±—Ä–∞–Ω–æ –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—ã—Å—Ç—Ä—ã—Ö –Ω–∞–∂–∞—Ç–∏–π
            if (lampClickCount >= LAMP_CLICKS_NEEDED && !isLampBroken) {
                breakLampCompletely();
                
                // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∑–≤—É–∫ —Ä–∞–∑–±–∏—Ç–∏—è —Å—Ç–µ–∫–ª–∞
                playGlassSound();
                
                // –ß–µ—Ä–µ–∑ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤—Ä–µ–º—è –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Å—Ö–æ–¥–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É
                setTimeout(() => {
                    if (!isLampBroken) {
                        if (isLampOn) {
                            document.getElementById('lampImage').src = 'sun_on.png';
                        } else {
                            document.getElementById('lampImage').src = 'sun_off.png';
                        }
                    }
                }, 200);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª–Ω–æ–≥–æ "—Ä–∞–∑–±–∏—Ç–∏—è" –ª–∞–º–ø–æ—á–∫–∏
        function breakLampCompletely() {
            isLampBroken = true;
            
            // –ë–ª–æ–∫–∏—Ä—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            lockInterface();
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —Ç—Ä—è—Å–∫—É —ç–∫—Ä–∞–Ω–∞
            document.body.classList.add('screen-shake');
            setTimeout(() => {
                document.body.classList.remove('screen-shake');
            }, 500);
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ —Å–ª–æ–º–∞–Ω–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É
            document.getElementById('lampImage').src = 'sun_broken.png';
            
            // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∑–≤—É–∫ —Ä–∞–∑–±–∏—Ç–∏—è —Å—Ç–µ–∫–ª–∞
            playGlassSound();
            
            // –ó–∞—Ç–µ–º–Ω—è–µ–º –ø–∞–Ω–µ–ª—å —Å –Ω–∞–¥–ø–∏—Å—å—é
            const logoContainer = document.querySelector('.logo-container');
            const logoText = document.querySelector('.logo-text');
            logoContainer.classList.add('darkened');
            logoText.classList.add('darkened');
            logoText.classList.add('broken');
            
            // –ú–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –ª–æ–≥–æ—Ç–∏–ø–∞
            logoText.textContent = "–ö–∞–∫ —è –Ω–µ –ø—Ä–æ–≤—ë–ª —ç—Ç–æ –ª–µ—Ço";
            const mainPageTitle = document.querySelector('#main h2');
            if (mainPageTitle) {
                mainPageTitle.textContent = '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞';
            }
            const mainContent = document.querySelector('#main .content');
            if (mainContent) {
                mainContent.style.display = 'none';
            }
            const errorMessage = document.createElement('div');
            errorMessage.style.cssText = 'font-size: 19px; color: white; text-align: center; margin-top: 200px;';
            errorMessage.innerHTML = '[–°–ò–°–¢–ï–ú–ù–´–ô –°–ë–û–ô] <br>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞';
            document.getElementById('main').appendChild(errorMessage);
            showPage('main');
            
            // –ó–∞—Ç–µ–º–Ω—è–µ–º –≤–µ—Å—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            document.querySelectorAll('.left-sidebar, .main-content, .page').forEach(element => {
                element.style.background = 'rgba(50, 50, 50, 0.95)';
                element.style.borderColor = '#666';
            });
            
            // –ú–µ–Ω—è–µ–º –∑–∞–¥–Ω–∏–π —Ñ–æ–Ω
            document.body.style.background = "url('black.jpg') center/cover fixed";
            
            // –û—Ç–∫–ª—é—á–∞–µ–º –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ø–ª–µ–µ—Ä –∏ –≤–∫–ª—é—á–∞–µ–º —Å–ª–æ–º–∞–Ω–Ω—É—é –º—É–∑—ã–∫—É
            disableMusicPlayer();
            playBrokenMusic();
            
            // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º —Å–ª–æ–º–∞–Ω–Ω—ã–π –∫–ª–µ–≤–µ—Ä
            positionBrokenClover();

            startErrorTextEffect();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            showAutoSystemDamage();
            
            // –ò–∑–º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            changeMainPageContent();
            
            // –ü–ï–†–ï–ö–õ–Æ–ß–ê–ï–ú–°–Ø –ù–ê –ì–õ–ê–í–ù–£–Æ –°–¢–†–ê–ù–ò–¶–£ - –î–û–ë–ê–í–¨–¢–ï –≠–¢–£ –°–¢–†–û–ß–ö–£
            showPage('main');
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –≥–ª–∏—Ç—á-—ç—Ñ—Ñ–µ–∫—Ç –∫–æ –≤—Å–µ–º—É —Ç–µ–∫—Å—Ç—É
            setTimeout(() => {
                applyGlitchEffect();
            }, 1000);
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
            lampClickCount = 0;
            
            // –£–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ —Å –ª–∞–º–ø–æ—á–∫–∏
            const lampImage = document.getElementById('lampImage');
            lampImage.parentNode.onclick = null;
            lampImage.parentNode.style.cursor = 'default';
            
            // –£–±–∏—Ä–∞–µ–º hover —ç—Ñ—Ñ–µ–∫—Ç
            lampImage.parentNode.onmouseover = null;
            
            // –°–∫—Ä—ã–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å–µ–∫—Ä–µ—Ç–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.getElementById('secretButton').style.display = 'none';
        }

        function changeMainPageContent() {
            const mainPage = document.getElementById('main');
            
            // –ò–∑–º–µ–Ω—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            const pageTitle = mainPage.querySelector('h2');
            if (pageTitle) {
                pageTitle.textContent = '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞';
                pageTitle.classList.add('page-title-broken');
            }
            
            // –°–∫—Ä—ã–≤–∞–µ–º –≤–µ—Å—å –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
            const content = mainPage.querySelector('.content');
            if (content) {
                content.style.display = 'none';
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –æ—à–∏–±–∫–∏
            const errorContent = document.createElement('div');
            errorContent.className = 'error-content';
            errorContent.innerHTML = `
                <p style="font-size: 19px; color: #e74c3c; text-align: center; margin-top: 20px;">
                    [–°–ò–°–¢–ï–ú–ù–´–ô –°–ë–û–ô] <br>
                    –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω <br>
                    –ü–æ–ø—ã—Ç–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è... –ù–ï–£–î–ê–ß–ù–ê
                </p>
            `;
            
            mainPage.appendChild(errorContent);
        }

        function applyGlitchEffect() {
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –≥–ª–∏—Ç—á –∫–æ –≤—Å–µ–º —ç–ª–µ–º–µ–Ω—Ç–∞–º, –∫—Ä–æ–º–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞
            document.querySelectorAll('*:not(.logo-text)').forEach(element => {
                if (element.textContent && element.textContent.trim().length > 0) {
                    element.style.textShadow = '1px 1px 0 #e74c3c, -1px -1px 0 #00ffff';
                    element.style.animation = 'glitch 0.5s infinite';
                }
            });
        }

        // –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é toggleLamp
        const originalToggleLamp = toggleLamp;
        toggleLamp = function() {
            if (isLampBroken) {
                playCancelSound();
                return; // –ù–µ –¥–µ–ª–∞–µ–º –Ω–∏—á–µ–≥–æ –µ—Å–ª–∏ –ª–∞–º–ø–æ—á–∫–∞ —Å–ª–æ–º–∞–Ω–∞
            }
            
            // –í—ã–∑—ã–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
            originalToggleLamp();
            
            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –±—ã—Å—Ç—Ä—ã–µ –Ω–∞–∂–∞—Ç–∏—è
            handleFastLampClicks();
        };
        
        // –ü–æ–∑–∏—Ü–∏–∏ —É–≥–ª–æ–≤ —ç–∫—Ä–∞–Ω–∞
        const corners = [
            { top: '10px', left: '10px' },     // –ª–µ–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π
            { top: '10px', right: '10px' },    // –ø—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π
            { bottom: '10px', left: '10px' },  // –ª–µ–≤—ã–π –Ω–∏–∂–Ω–∏–π
            { bottom: '10px', right: '10px' }  // –ø—Ä–∞–≤—ã–π –Ω–∏–∂–Ω–∏–π
        ];
        
        // –¢–µ–∫—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–≤–Ω—è
    const secretTexts = [
        [
            "[–ö–∞–∫ —Ç—ã —Å—é–¥–∞ –ø–æ–ø–∞–ª?]",
            "[–î–æ—Å—Ç—É–ø –∫ —Å–µ–∫—Ä–µ—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —É—Ç–µ—Ä—è–Ω...]",
            "[–¢—ã –Ω–µ –¥–æ–ª–∂–µ–Ω —Ç—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è.]",
            "[–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ–∫–∏–Ω—å —ç—Ç–æ –º–µ—Å—Ç–æ.]"
        ],
        [
            "[...]",
            "[–¢—ã –æ–ø—è—Ç—å –∑–¥–µ—Å—å?]",
            "[–ß—Ç–æ —Ç—ã –ø—ã—Ç–∞–µ—à—å—Å—è –Ω–∞–π—Ç–∏?]",
            "[–ó–¥–µ—Å—å –Ω–µ—Ç —Ç–æ–≥–æ, —á—Ç–æ —Ç–µ–±–µ –Ω—É–∂–Ω–æ.]",
            "[–£—Ö–æ–¥–∏ –∏ –±–æ–ª—å—à–µ –Ω–∏–∫–æ–≥–¥–∞ —Å—é–¥–∞ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–π—Å—è.]"
        ],
        [   
            "[–¢—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—à—å –º–æ—ë —Ç–µ—Ä–ø–µ–Ω–∏–µ.]",
            "[–¢–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–≤–ª–µ–∫—É—Ç –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è.]",
            "[–ü–æ–¥—É–º–∞–π –æ–± —ç—Ç–æ–º...]"
        ],
        [
            "[–ö–∞–∫–æ–π –∂–µ —Ç—ã –Ω–∞—Å—Ç–æ–π—á–∏–≤—ã–π.]",
            "[–ß—Ç–æ-–∂... –≠—Ç–æ –≤–ø–µ—á–∞—Ç–ª—è–µ—Ç.]",
            "[–¢–æ, —á—Ç–æ —Ç—ã –∏—â–µ—à—å...]",
            "[–≠—Ç–æ—Ç —Ñ–∞–π–ª... –≠—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è...]", 
            "[–û–Ω–∞ –∑–∞—â–∏—â–µ–Ω–∞ —Å–µ–∫—Ä–µ—Ç–Ω—ã–º –∫–æ–¥–æ–º.]",
            "[–í–≤–µ–¥–∏ –µ–≥–æ –≤ –ø–æ–ª–µ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è —ç—Ç–æ–≥–æ –æ–∫–Ω–∞.]",
            "[–ó–∞ –∫–æ–¥–æ–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ —Å–æ–∑–¥–∞—Ç–µ–ª—é —Å–∞–π—Ç–∞.]",
            "[–ù–æ –∑–∞—Ä–∞–Ω–µ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é...]",
            "[–ê–≤—Ç–æ—Ä –Ω–µ –Ω–µ—Å—ë—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏...]",
            "[...–ó–∞ —Ç–≤–æ–∏ –¥–∞–ª—å–Ω–µ–π—à–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.]"
        ]
    ];

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ —Å–µ–∫—Ä–µ—Ç–Ω—É—é –∫–Ω–æ–ø–∫—É
    function handleSecretButtonClick() {
        // –ï—Å–ª–∏ —ç—Ç–æ –ø—è—Ç–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –∏–ª–∏ –±–æ–ª—å—à–µ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å –æ –∫–æ–¥–µ
        if (secretClickCount >= 4) {
            showCodeQuestion();
            return;
        }
        
        secretClickCount++;
        
        // –ù–∞ —á–µ—Ç–≤–µ—Ä—Ç–æ–º –Ω–∞–∂–∞—Ç–∏–∏ –¥–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É –≤–∏–¥–∏–º–æ–π
        if (secretClickCount === 4) {
            secretButton.classList.add('visible');
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ–∫—Ä–µ—Ç–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
        startSecretSequence();
    }

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ª–∞–º–ø–æ—á–∫–∏ –∏ —Ñ–æ–Ω–∞
        function toggleLamp() {
            if (isLampBroken) {
                playCancelSound();
                return; // –ù–µ –¥–µ–ª–∞–µ–º –Ω–∏—á–µ–≥–æ –µ—Å–ª–∏ –ª–∞–º–ø–æ—á–∫–∞ —Å–ª–æ–º–∞–Ω–∞
            }
            
            const lampImage = document.getElementById('lampImage');
            const body = document.body;
            
            if (isLampOn) {
                // –í—ã–∫–ª—é—á–∞–µ–º –ª–∞–º–ø–æ—á–∫—É - –Ω–æ—á–Ω–æ–π —Ñ–æ–Ω
                lampImage.src = 'sun_off.png';
                body.classList.remove('light-theme');
                playCancelSound();
            } else {
                // –í–∫–ª—é—á–∞–µ–º –ª–∞–º–ø–æ—á–∫—É - –¥–Ω–µ–≤–Ω–æ–π —Ñ–æ–Ω
                lampImage.src = 'sun_on.png';
                body.classList.add('light-theme');
                playClickSound();
            }
            isLampOn = !isLampOn;
            
            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –±—ã—Å—Ç—Ä—ã–µ –Ω–∞–∂–∞—Ç–∏—è
            handleFastLampClicks();
        }
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∑–≤—É–∫–æ–≤
        function playHoverSound() {
            if (interfaceLocked) return;
            const sound = document.getElementById('hoverSound');
            const volume = document.getElementById('sfxVolume').value / 100;
            sound.currentTime = 0;
            sound.volume = volume;
            sound.play().catch(e => console.log('Audio play error:', e));
        }

        function playClickSound() {
            if (interfaceLocked) return;
            const sound = document.getElementById('clickSound');
            const volume = document.getElementById('sfxVolume').value / 100;
            sound.currentTime = 0;
            sound.volume = volume;
            sound.play().catch(e => console.log('Audio play error:', e));
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—É—é –ø–∞–Ω–µ–ª—å
            updateToolInfo();
        }

        function playCancelSound() {
            if (interfaceLocked) return;
            const sound = document.getElementById('cancelSound');
            const volume = document.getElementById('sfxVolume').value / 100;
            sound.currentTime = 0;
            sound.volume = volume;
            sound.play().catch(e => console.log('Audio play error:', e));
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç–∏
        function updateVolume() {
            if (interfaceLocked) return;
            
            const musicVolume = document.getElementById('musicVolume').value / 100;
            const sfxVolume = document.getElementById('sfxVolume').value / 100;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â—É—é –≥—Ä–æ–º–∫–æ—Å—Ç—å –º—É–∑—ã–∫–∏
            currentMusicVolume = musicVolume;
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–æ–º–∫–æ—Å—Ç—å –¥–ª—è –≤—Å–µ—Ö –º—É–∑—ã–∫–∞–ª—å–Ω—ã—Ö –ø–ª–µ–µ—Ä–æ–≤
            musicPlayers.forEach(player => {
                player.volume = musicVolume;
            });
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–æ–º–∫–æ—Å—Ç—å –¥–ª—è –∑–≤—É–∫–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
            document.getElementById('hoverSound').volume = sfxVolume;
            document.getElementById('clickSound').volume = sfxVolume;
            document.getElementById('cancelSound').volume = sfxVolume;
            document.getElementById('glassSound').volume = sfxVolume;
            document.getElementById('secretMusic').volume = musicVolume;
            document.getElementById('paintSound').volume = sfxVolume * 0.3; // –î–æ–±–∞–≤–ª—è–µ–º –∑–≤—É–∫–∏ —Ä–∏—Å–æ–≤–∞–Ω–∏—è
            document.getElementById('removeSound').volume = sfxVolume * 0.3; // –î–æ–±–∞–≤–ª—è–µ–º –∑–≤—É–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–æ–º–∫–æ—Å—Ç—å –¥–ª—è —Å–ª–æ–º–∞–Ω–Ω–æ–π –º—É–∑—ã–∫–∏, –µ—Å–ª–∏ –æ–Ω–∞ –∞–∫—Ç–∏–≤–Ω–∞
            if (brokenMusicActive) {
                document.getElementById('musicBroken').volume = musicVolume;
            }
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–∏–Ω–∏-–∏–≥—Ä
        function updateVolume() {
            if (interfaceLocked) return;
            
            const musicVolume = document.getElementById('musicVolume').value / 100;
            const sfxVolume = document.getElementById('sfxVolume').value / 100;
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–æ–º–∫–æ—Å—Ç—å –¥–ª—è –≤—Å–µ—Ö –º—É–∑—ã–∫–∞–ª—å–Ω—ã—Ö –ø–ª–µ–µ—Ä–æ–≤
            musicPlayers.forEach(player => {
                player.volume = musicVolume;
            });
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–æ–º–∫–æ—Å—Ç—å –¥–ª—è –∑–≤—É–∫–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
            document.getElementById('hoverSound').volume = sfxVolume;
            document.getElementById('clickSound').volume = sfxVolume;
            document.getElementById('cancelSound').volume = sfxVolume;
            document.getElementById('glassSound').volume = sfxVolume;
            document.getElementById('secretMusic').volume = musicVolume;
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–æ–º–∫–æ—Å—Ç—å –¥–ª—è —Å–ª–æ–º–∞–Ω–Ω–æ–π –º—É–∑—ã–∫–∏, –µ—Å–ª–∏ –æ–Ω–∞ –∞–∫—Ç–∏–≤–Ω–∞
            if (brokenMusicActive) {
                document.getElementById('musicBroken').volume = musicVolume;
            }
        }

        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º PixelPaint –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
            if (modalId === 'pixelGame') {
                setTimeout(initPixelPaint, 100);
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à
                document.addEventListener('keydown', handleKeyPress);
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ Escape
                document.addEventListener('keydown', handleEscapeKey);
            }
        }

        function hideModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function hideModalWithSound(modalId) {
            playCancelSound();
            hideModal(modalId);
        }

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.style.display = 'none';
            });
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.style.display = 'block';
            }
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –†—É–ª–µ—Ç–∫–∏
        function resetRouletteGame() {
            balance = 200;
            currentBet = 10;
            selectedColor = null;
            isSpinning = false;
            
            updateBalance();
            updateBetDisplay();
            document.getElementById('resultText').textContent = '–°–¥–µ–ª–∞–π—Ç–µ —Å—Ç–∞–≤–∫—É –Ω–∞ —Ü–≤–µ—Ç –∏ –∫—Ä—É—Ç–∏—Ç–µ!';
            document.getElementById('resultText').className = '';
            
            document.querySelectorAll('.bet-field').forEach(field => {
                field.classList.remove('selected');
            });
            
            updateSpinButton();
        }

        function updateBalance() {
            document.getElementById('balance').textContent = balance;
        }

        function updateBetDisplay() {
            document.getElementById('betAmount').textContent = currentBet;
        }

        function changeBet(amount) {
            if (isSpinning) return;
            
            const newBet = currentBet + amount;
            if (newBet >= 5 && newBet <= balance) {
                currentBet = newBet;
                updateBetDisplay();
                updateSpinButton();
            }
        }

        function selectColor(color) {
            if (isSpinning) return;
            
            selectedColor = color;
            document.querySelectorAll('.bet-field').forEach(field => {
                field.classList.remove('selected');
            });
            document.querySelector(`.bet-field.${color}`).classList.add('selected');
            updateSpinButton();
        }

        function updateSpinButton() {
            const spinBtn = document.getElementById('spinBtn');
            spinBtn.disabled = isSpinning || !selectedColor || currentBet > balance || currentBet < 5;
        }

        function spinRoulette() {
            if (isSpinning || !selectedColor || currentBet > balance) return;
            
            isSpinning = true;
            balance -= currentBet;
            updateBalance();
            updateSpinButton();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –≤—Ä–∞—â–µ–Ω–∏–∏
            document.getElementById('resultText').textContent = '–ö–æ–ª–µ—Å–æ –≤—Ä–∞—â–∞–µ—Ç—Å—è...';
            document.getElementById('resultText').className = '';
            
            // –ß–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            setTimeout(() => {
                const resultColor = Math.random() < 0.5 ? 'red' : 'black';
                const isWin = resultColor === selectedColor;
                const winAmount = isWin ? currentBet * 2 : 0;
                
                if (isWin) {
                    balance += winAmount;
                    document.getElementById('resultText').textContent = `–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${winAmount} ‚ÇΩ! –í—ã–ø–∞–ª–æ: ${resultColor === 'black' ? '—á—ë—Ä–Ω–æ–µ' : '–∫—Ä–∞—Å–Ω–æ–µ'}`;
                    document.getElementById('resultText').className = 'win';
                } else {
                    document.getElementById('resultText').textContent = `–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ ${currentBet} ‚ÇΩ. –í—ã–ø–∞–ª–æ: ${resultColor === 'black' ? '—á—ë—Ä–Ω–æ–µ' : '–∫—Ä–∞—Å–Ω–æ–µ'}`;
                    document.getElementById('resultText').className = 'lose';
                }
                
                updateBalance();
                isSpinning = false;
                updateSpinButton();
                
            }, 1000);
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è
        function showSystemDamage() {
            if (!interfaceLocked) return;
            
            const overlay = document.getElementById('systemDamageOverlay');
            const text = document.getElementById('systemDamageText');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º overlay
            overlay.style.display = 'flex';
            setTimeout(() => {
                overlay.classList.add('active');
            }, 10);
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≥—Ä—É–ø–ø—ã —Ç–µ–∫—Å—Ç–æ–≤
            const textGroups = [
                ["[–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã...]", "[–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ.]"],
                ["[–°–∏—Å—Ç–µ–º–∞ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–∞.]"],
                ["[–û—Ç–∫–∞–∑–∞–Ω–æ –≤ –¥–æ—Å—Ç—É–ø–µ.]"],
                ["[FATAL ERROR]"],
                ["[–û—Ç–∫–∞–∑.]"],
                ["[UNKNOWN ERROR]"],
                ["[null]"],
                ["[–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞.]"],
                ["[File not found.]"],
                ["[CRITICAL ERROR]"],
                ["[You killed the system.]"]
            ];
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â—É—é –≥—Ä—É–ø–ø—É
            let currentGroup;
            
            if (systemDamageClickCount < textGroups.length) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥—Ä—É–ø–ø—ã –ø–æ –ø–æ—Ä—è–¥–∫—É
                currentGroup = systemDamageClickCount;
            } else {
                // –ü–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤—Å–µ—Ö –≥—Ä—É–ø–ø - —Å–ª—É—á–∞–π–Ω–∞—è –≥—Ä—É–ø–ø–∞ —Å 1 –ø–æ 10 (–ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤—É—é –≥—Ä—É–ø–ø—É 0)
                currentGroup = Math.floor(Math.random() * (textGroups.length - 1)) + 1;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≥—Ä—É–ø–ø—ã
            text.textContent = textGroups[currentGroup][0];
            
            setTimeout(() => {
                text.classList.add('visible');
            }, 100);
            
            let clickCount = 0;
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∏ —Å–∫—Ä—ã—Ç–∏—è
            const clickHandler = function() {
                clickCount++;
                
                if (currentGroup === 0 && clickCount === 1) {
                    // –ü–µ—Ä–≤–∞—è –≥—Ä—É–ø–ø–∞ - –≤—Ç–æ—Ä–æ–π —Ç–µ–∫—Å—Ç –ø–æ –ø–µ—Ä–≤–æ–º—É –∫–ª–∏–∫—É
                    text.classList.remove('visible');
                    setTimeout(() => {
                        if (textGroups[0].length > 1) {
                            text.textContent = textGroups[0][1];
                        }
                        setTimeout(() => {
                            text.classList.add('visible');
                        }, 10);
                    }, 500);
                } else {
                    // –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–ª—É—á–∞–∏ - –∑–∞–∫—Ä—ã–≤–∞–µ–º
                    text.classList.remove('visible');
                    overlay.classList.remove('active');
                    
                    setTimeout(() => {
                        overlay.style.display = 'none';
                        overlay.removeEventListener('click', clickHandler);
                        systemDamageClickCount++; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –ø–æ–∫–∞–∑–æ–≤
                    }, 1000);
                }
            };
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ —Å–∞–º overlay
            overlay.addEventListener('click', clickHandler);
        }
        // –§—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∫–∞–∑–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ break
        function showAutoSystemDamage() {
            setTimeout(() => {
                const overlay = document.getElementById('systemDamageOverlay');
                const text = document.getElementById('systemDamageText');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º overlay
                overlay.style.display = 'flex';
                setTimeout(() => {
                    overlay.classList.add('active');
                }, 10);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç
                setTimeout(() => {
                    text.classList.add('visible');
                }, 100);
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–±–∏—Ä–∞–µ–º —á–µ—Ä–µ–∑ 2.5 —Å–µ–∫—É–Ω–¥—ã
                setTimeout(() => {
                    overlay.classList.remove('active');
                    text.classList.remove('visible');
                    
                    setTimeout(() => {
                        overlay.style.display = 'none';
                    }, 1000);
                }, 2500);
            }, 2000);
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
                const clickHandler = function() {
                    overlay.classList.remove('active');
                    text.classList.remove('visible');
                    
                    setTimeout(() => {
                        overlay.style.display = 'none';
                        overlay.removeEventListener('click', clickHandler);
                    }, 1000);
                };

                overlay.addEventListener('click', clickHandler);
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ª–æ–º–∞–Ω–Ω–æ–≥–æ –∫–ª–µ–≤–µ—Ä–∞
        function positionBrokenClover() {
            const corners = [
                { top: '20px', left: '20px' },
                { top: '20px', right: '20px' },
                { bottom: '20px', left: '20px' },
                { bottom: '20px', right: '20px' }
            ];
            
            const randomIndex = Math.floor(Math.random() * corners.length);
            Object.assign(document.getElementById('brokenClover').style, corners[randomIndex]);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –æ—à–∏–±–æ–∫ –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö
        function startErrorTextEffect() {
            if (!interfaceLocked) return;
            
            const sideButtons = document.querySelectorAll('.side-btn');
            const originalTexts = Array.from(sideButtons).map(btn => btn.textContent);
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –æ—à–∏–±–æ–∫
            setInterval(() => {
                sideButtons.forEach((button, index) => {
                    // –°–ª—É—á–∞–π–Ω–æ —Ä–µ—à–∞–µ–º, –º–µ–Ω—è—Ç—å –ª–∏ —ç—Ç—É –∫–Ω–æ–ø–∫—É (50% —à–∞–Ω—Å)
                    if (Math.random() > 0.5) {
                        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω
                        if (!button.dataset.originalText) {
                            button.dataset.originalText = button.textContent;
                        }
                        
                        // –ó–∞–º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ [ERROR]
                        button.textContent = '[ERROR]';
                        button.style.transition = 'all 0.4s ease';
                        button.style.background = 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)';
                        
                        // –ß–µ—Ä–µ–∑ 0.3-0.5 —Å–µ–∫—É–Ω–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—Ä–∞—Ç–Ω–æ
                        setTimeout(() => {
                            if (button.dataset.originalText) {
                                button.textContent = button.dataset.originalText;
                            }
                            button.style.background = 'linear-gradient(135deg, #606060 0%, #1a1a1a 100%)';
                        }, 300 + Math.random() * 200); // –°–ª—É—á–∞–π–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å 300-500ms
                    }
                });
            }, 5000); // –ò–Ω—Ç–µ—Ä–≤–∞–ª 5 —Å–µ–∫—É–Ω–¥
        }

        function makeMoney() {
            balance += 2;
            updateBalance();
            updateSpinButton();
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è AimLabs
        function resetAimGame() {
            aimGameActive = false;
            hits = 0;
            misses = 0;
            timeLeft = 30;
            
            document.getElementById('hits').textContent = '0';
            document.getElementById('misses').textContent = '0';
            document.getElementById('timer').textContent = '30';
            document.getElementById('gameProgress').style.width = '0%';
            document.getElementById('aimResults').style.display = 'none';
            
            currentTargets.forEach(target => target.remove());
            currentTargets = [];
        }

        function startAimGame() {
            resetAimGame();
            aimGameActive = true;
            
            gameTimer = setInterval(updateAimTimer, 1000);
            targetTimer = setInterval(createTarget, 800);
            
            document.getElementById('gameArea').addEventListener('mousemove', updateCrosshair);
        }

        function updateAimTimer() {
            timeLeft--;
            document.getElementById('timer').textContent = timeLeft;
            document.getElementById('gameProgress').style.width = ((30 - timeLeft) / 30 * 100) + '%';
            
            if (timeLeft <= 0) {
                endAimGame();
            }
        }

        function createTarget() {
            if (!aimGameActive) return;
            
            const gameArea = document.getElementById('gameArea');
            const target = document.createElement('div');
            target.className = 'target';
            
            const size = Math.random() * 20 + 30;
            target.style.width = size + 'px';
            target.style.height = size + 'px';
            
            const maxX = gameArea.offsetWidth - size;
            const maxY = gameArea.offsetHeight - size;
            const x = Math.random() * maxX;
            const y = Math.random() * maxY;
            
            target.style.left = x + 'px';
            target.style.top = y + 'px';
            
            target.onclick = function(e) {
                e.stopPropagation();
                hitTarget(this);
            };
            
            gameArea.appendChild(target);
            currentTargets.push(target);
            
            setTimeout(() => {
                if (target.parentNode) {
                    target.remove();
                    currentTargets = currentTargets.filter(t => t !== target);
                }
            }, 2000);
        }

        function hitTarget(target) {
            if (!aimGameActive) return;
            
            target.remove();
            currentTargets = currentTargets.filter(t => t !== target);
            hits++;
            document.getElementById('hits').textContent = hits;
        }

        function updateCrosshair(e) {
            const crosshair = document.getElementById('crosshair');
            const rect = e.currentTarget.getBoundingClientRect();
            crosshair.style.left = (e.clientX - rect.left - 10) + 'px';
            crosshair.style.top = (e.clientY - rect.top - 10) + 'px';
        }

        function endAimGame() {
            clearInterval(gameTimer);
            clearInterval(targetTimer);
            aimGameActive = false;
            
            currentTargets.forEach(target => target.remove());
            currentTargets = [];
            
            const totalShots = hits + misses;
            const accuracy = totalShots > 0 ? Math.round((hits / totalShots) * 100) : 0;
            const totalScore = hits * 10 - misses * 5;
            
            document.getElementById('accuracy').textContent = accuracy + '%';
            document.getElementById('totalScore').textContent = totalScore;
            document.getElementById('finalHits').textContent = hits;
            document.getElementById('aimResults').style.display = 'block';
        }

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è PixelPaint
        let pixelCanvases = [];
        let currentCanvasIndex = 0;
        let currentColor = '#ffffff';
        let isDrawing = false;
        let isErasing = false;
        let continuousMode = false;

        let isPipetteMode = false;
        let pipetteForReplace = false; // true - –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ü–≤–µ—Ç–∞ –∑–∞–º–µ–Ω—ã, false - –¥–ª—è –æ–±—ã—á–Ω–æ–π –ø–∏–ø–µ—Ç–∫–∏

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –Ω–µ–¥–∞–≤–Ω–∏—Ö —Ü–≤–µ—Ç–æ–≤
        let recentColors = [];
        const MAX_RECENT_COLORS = 6;

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ undo/redo –ø–æ –º–∞–∑–∫–∞–º
        let undoStack = [];
        let redoStack = [];
        const MAX_UNDO_STEPS = 200;
        let currentStrokePixels = new Map(); // –•—Ä–∞–Ω–∏—Ç –ø–∏–∫—Å–µ–ª–∏ —Ç–µ–∫—É—â–µ–≥–æ –º–∞–∑–∫–∞
        let isStrokeActive = false; // –§–ª–∞–≥ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–∞–∑–∫–∞

        // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –∑–∞–º–µ–Ω—ã –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–≥–æ —Ñ–æ–Ω–∞
        let replaceTransparentBg = false;

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —à–∞–±–ª–æ–Ω–∞
        let templateImage = null;
        let templateScale = 1;
        let templateOffsetX = 0;
        let templateOffsetY = 0;
        let templateMovementEnabled = false;
        let templateOpacity = 0.5; // –î–æ–±–∞–≤–∏—Ç—å —ç—Ç—É —Å—Ç—Ä–æ–∫—É

        // –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞
        const colorPalette = [
            '#ffffff', '#000000', '#ff0000', '#00ff00', '#0000ff', 
            '#ffff00', '#ff00ff', '#00ffff', '#ffa500', '#800080',
            '#ffc0cb', '#a52a2a', '#808080', '#964b00', '#add8e6'
        ];

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        function loadPixelPaintState() {
            const saved = localStorage.getItem('pixelPaintState');
            if (saved) {
                const state = JSON.parse(saved);
                pixelCanvases = state.pixelCanvases || [];
                currentCanvasIndex = state.currentCanvasIndex || 0;
                
                // –û–±—Ä–µ–∑–∞–µ–º –º–∞—Å—Å–∏–≤ –µ—Å–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –±–æ–ª—å—à–µ —Ö–æ–ª—Å—Ç–æ–≤ —á–µ–º –ª–∏–º–∏—Ç
                if (pixelCanvases.length > MAX_CANVASES) {
                    pixelCanvases = pixelCanvases.slice(0, MAX_CANVASES);
                    currentCanvasIndex = Math.min(currentCanvasIndex, MAX_CANVASES - 1);
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∏–º–µ–Ω–∞ –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
                pixelCanvases.forEach((canvas, index) => {
                    if (!canvas.name) {
                        canvas.name = `–•–æ–ª—Å—Ç ${index + 1}`;
                    }
                });
                
                if (pixelCanvases.length === 0) {
                    pixelCanvases = [{
                        pixels: {},
                        template: null,
                        name: '–•–æ–ª—Å—Ç 1'
                    }];
                }
            } else {
                pixelCanvases = [{
                    pixels: {},
                    template: null,
                    name: '–•–æ–ª—Å—Ç 1'
                }];
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ
        function savePixelPaintState() {
            const state = {
                pixelCanvases: pixelCanvases,
                currentCanvasIndex: currentCanvasIndex
            };
            localStorage.setItem('pixelPaintState', JSON.stringify(state));
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PixelPaint
        function initPixelPaint() {
            loadPixelPaintState();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ü–≤–µ—Ç–æ–≤–æ–π –ø–∏–∫–µ—Ä
            document.getElementById('colorPreview').style.backgroundColor = currentColor;
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–µ–∫—É—â–∏–π —Ö–æ–ª—Å—Ç
            initCurrentCanvas();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∫–ª–∞–¥–∫–∏
            updateCanvasTabs();

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∑–∞–º–µ–Ω—ã —Ü–≤–µ—Ç–∞
            document.getElementById('replaceFromColor').style.backgroundColor = replaceFromColor;
            document.getElementById('replaceToColorPreview').style.backgroundColor = replaceToColor;
            document.getElementById('pipetteBtn').addEventListener('click', activateReplacePipette);

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∞–≤–∏—à–∏ Escape
            document.addEventListener('keydown', handleEscapeKey);
            
            updateToolInfo();
            updateDeselectButton(); // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–º–µ–Ω—ã –≤—ã–¥–µ–ª–µ–Ω–∏—è
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Ö–æ–ª—Å—Ç–∞
        function initCurrentCanvas() {
            const pixelArea = document.getElementById('pixelArea');
            pixelArea.innerHTML = `
                <div class="pixel-grid"></div>
                <div class="template-overlay" id="templateOverlay"></div>
            `;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            setupPixelAreaEvents();
            
            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–∏–∫—Å–µ–ª–∏ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Ö–æ–ª—Å—Ç–∞
            renderPixels();
            
            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —à–∞–±–ª–æ–Ω –µ—Å–ª–∏ –µ—Å—Ç—å
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            if (currentCanvas.template) {
                loadTemplateFromData(currentCanvas.template);
            }
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –æ–±–ª–∞—Å—Ç–∏ —Ä–∏—Å–æ–≤–∞–Ω–∏—è
        function setupPixelAreaEvents() {
            const pixelArea = document.getElementById('pixelArea');
            
            pixelArea.onmousedown = function(e) {
                const coords = getPixelCoordinates(e);
                if (!coords) return;
                
                const [x, y] = coords;
                
                if (e.button === 0) { // –õ–ö–ú
                    if (e.altKey || isPipetteMode) {
                        pickColor(e);
                        if (isPipetteMode) {
                            e.preventDefault();
                            return;
                        }
                    } else {
                        if (currentTool === 'selection') {
                            startSelection(x, y);
                        } else if (currentTool === 'fill') {
                            // –î–ª—è –∑–∞–ª–∏–≤–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ä–∞–∑—É
                            saveActionState('fill', {
                                fillData: { x, y, color: currentColor }
                            });
                            fillArea(x, y);
                        } else if (currentTool === 'brush') {
                            // –î–ª—è –∫–∏—Å—Ç–∏ –º–∞–∑–æ–∫ –Ω–∞—á–Ω–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏
                            startDrawing(e);
                        }
                    }
                } else if (e.button === 2) { // –ü–ö–ú
                    if (currentTool === 'brush') {
                        startErasing(e);
                    }
                }
                e.preventDefault();
            };
            
            pixelArea.onmousemove = function(e) {
                const coords = getPixelCoordinates(e);
                if (!coords) return;
                
                const [x, y] = coords;
                
                if (currentTool === 'selection' && isSelecting) {
                    updateSelection(x, y);
                } else if (currentTool === 'brush') {
                    if (isDrawing) {
                        drawWithBrush(x, y);
                    } else if (isErasing) {
                        erasePixel(e);
                    }
                }
            };
            
            pixelArea.onmouseup = function(e) {
                if (e.button === 0) {
                    if (currentTool === 'selection') {
                        endSelection();
                    } else if (currentTool === 'brush') {
                        stopDrawing();
                        // –ó–∞–≤–µ—Ä—à–∞–µ–º –º–∞–∑–æ–∫ –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏ –õ–ö–ú
                        endStroke();
                    }
                } else if (e.button === 2) {
                    if (currentTool === 'brush') {
                        stopErasing();
                    }
                }
            };
            
            pixelArea.onmouseleave = function() {
                if (currentTool === 'brush') {
                    stopDrawing();
                    stopErasing();
                    // –ó–∞–≤–µ—Ä—à–∞–µ–º –º–∞–∑–æ–∫ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —Ö–æ–ª—Å—Ç–∞
                    if (isStrokeActive) {
                        endStroke();
                    }
                }
                if (currentTool === 'selection') {
                    isSelecting = false;
                }
            };
            
            pixelArea.oncontextmenu = function(e) {
                e.preventDefault();
            };
        }
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è
        function startDrawing(e) {
            isDrawing = true;
            continuousMode = e.shiftKey;
            // –ú–∞–∑–æ–∫ –Ω–∞—á–Ω–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏, –Ω–µ –∑–¥–µ—Å—å
        }

        function stopDrawing() {
            isDrawing = false;
            continuousMode = false;
        }

        function drawPixel(e) {
            if (!isDrawing && !continuousMode) return;
            
            const coords = getPixelCoordinates(e);
            if (!coords) return;
            
            const [x, y] = coords;
            
            if (currentTool === 'brush') {
                drawWithBrush(x, y);
            }
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å—Ç–∏—Ä–∞–Ω–∏—è
        function startErasing(e) {
            isErasing = true;
            erasePixel(e);
        }

        function stopErasing() {
            isErasing = false;
        }

        function erasePixel(e) {
            if (!isErasing) return;
            
            const coords = getPixelCoordinates(e);
            if (!coords) return;
            
            const [x, y] = coords;
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            const pixelKey = `${x},${y}`;
            
            if (currentCanvas.pixels[pixelKey]) {
                delete currentCanvas.pixels[pixelKey];
                removePixel(x, y);
                
                playRemoveSound();
            }
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ø–∏–∫—Å–µ–ª—è
        function getPixelCoordinates(e) {
            const rect = e.currentTarget.getBoundingClientRect();
            const x = Math.floor((e.clientX - rect.left) / 10);
            const y = Math.floor((e.clientY - rect.top) / 10);
            
            if (x < 0 || x >= 64 || y < 0 || y >= 40) return null;
            
            return [x, y];
        }

        // –í—ã–±–æ—Ä —Ü–≤–µ—Ç–∞ –∏–∑ –ø–∏–∫–µ—Ä–∞
        function selectColorFromPicker(color) {
            currentColor = color;
            document.getElementById('colorPreview').style.backgroundColor = color;
            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–µ–¥–∞–≤–Ω–∏–µ —Ü–≤–µ—Ç–∞ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∏–∑ –ø–∏–∫–µ—Ä–∞
            addToRecentColors(color);
        }

        // –§—É–Ω–∫—Ü–∏–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
        function renderPixels() {
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            Object.keys(currentCanvas.pixels).forEach(key => {
                const [x, y] = key.split(',').map(Number);
                renderPixel(x, y, currentCanvas.pixels[key]);
            });
        }

        function renderPixel(x, y, color) {
            const pixelId = `pixel-${x}-${y}`;
            let pixel = document.getElementById(pixelId);
            
            if (!pixel) {
                pixel = document.createElement('div');
                pixel.id = pixelId;
                pixel.className = 'pixel';
                pixel.style.left = (x * 10) + 'px';
                pixel.style.top = (y * 10) + 'px';
                document.getElementById('pixelArea').appendChild(pixel);
            }
            
            pixel.style.backgroundColor = color;
        }

        function removePixel(x, y) {
            const pixelId = `pixel-${x}-${y}`;
            const pixel = document.getElementById(pixelId);
            if (pixel) {
                pixel.remove();
            }
        }

        // –ü–∏–ø–µ—Ç–∫–∞
        function pickColor(e) {
            const coords = getPixelCoordinates(e);
            if (!coords) return;
            
            const [x, y] = coords;
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            const pixelKey = `${x},${y}`;
            
            if (isPipetteMode && pipetteForReplace) {
                // –†–µ–∂–∏–º –ø–∏–ø–µ—Ç–∫–∏ –¥–ª—è –∑–∞–º–µ–Ω—ã —Ü–≤–µ—Ç–∞
                pickColorForReplace(e);
                return;
            }
            
            if (currentCanvas.pixels[pixelKey]) {
                const pickedColor = currentCanvas.pixels[pixelKey];
                selectColorFromPicker(pickedColor);
                // –î–æ–±–∞–≤–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ü–≤–µ—Ç –≤ –Ω–µ–¥–∞–≤–Ω–∏–µ
                addToRecentColors(pickedColor);
                playClickSound();
            }
            
            // –ï—Å–ª–∏ –±—ã–ª –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω —Ä–µ–∂–∏–º –ø–∏–ø–µ—Ç–∫–∏ (–æ–±—ã—á–Ω—ã–π), –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –µ–≥–æ
            if (isPipetteMode) {
                deactivatePipetteMode();
            }
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ö–æ–ª—Å—Ç–∞–º–∏
        function clearCanvas() {
            if (confirm('–û—á–∏—Å—Ç–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ö–æ–ª—Å—Ç?')) {
                saveActionState('clear');
                
                const currentCanvas = pixelCanvases[currentCanvasIndex];
                currentCanvas.pixels = {};
                
                document.querySelectorAll('.pixel').forEach(pixel => pixel.remove());
                playRemoveSound();
            }
        }
        // –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –¥–ª—è –ª–∏–º–∏—Ç–∞ —Ö–æ–ª—Å—Ç–æ–≤
        const MAX_CANVASES = 5;

        function addNewCanvas() {
            if (pixelCanvases.length >= MAX_CANVASES) {
                alert(`–î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç —Ö–æ–ª—Å—Ç–æ–≤! –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${MAX_CANVASES}`);
                playCancelSound();
                return;
            }
            
            const newCanvas = {
                pixels: {},
                template: null,
                name: `–•–æ–ª—Å—Ç ${pixelCanvases.length + 1}` // –î–æ–±–∞–≤–ª—è–µ–º –∏–º—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            };
            
            pixelCanvases.push(newCanvas);
            currentCanvasIndex = pixelCanvases.length - 1;
            
            initCurrentCanvas();
            updateCanvasTabs();
            hideTemplateControls();
            playClickSound();
        }

        function switchCanvas(index) {
            if (index >= 0 && index < pixelCanvases.length) {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º
                savePixelPaintState();

                currentCanvasIndex = index;
                initCurrentCanvas();
                updateCanvasTabs();
                
                undoStack = [];
                redoStack = [];
                updateUndoRedoButtons();

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –∫–æ–Ω—Ç—Ä–æ–ª—ã —à–∞–±–ª–æ–Ω–∞
                const currentCanvas = pixelCanvases[currentCanvasIndex];
                if (currentCanvas.template) {
                    showTemplateControls();
                } else {
                    hideTemplateControls();
                }
                
                playClickSound();
            }
        }

        function updateCanvasTabs() {
            const counter = document.getElementById('canvasCounter');
            const buttonsContainer = document.getElementById('canvasButtons');
            const limitInfo = document.getElementById('limitInfo');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫
            counter.textContent = `–•–æ–ª—Å—Ç—ã: ${pixelCanvases.length}/${MAX_CANVASES}`;
            
            // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç —Å—á–µ—Ç—á–∏–∫–∞ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
            if (pixelCanvases.length >= MAX_CANVASES) {
                counter.style.color = '#e74c3c';
                counter.style.background = 'rgba(231, 76, 60, 0.1)';
            } else {
                counter.style.color = '#f0f0f0';
                counter.style.background = 'rgba(70, 70, 70, 0.6)';
            }
            
            // –û—á–∏—â–∞–µ–º –∫–Ω–æ–ø–∫–∏
            buttonsContainer.innerHTML = '';
            
            // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ö–æ–ª—Å—Ç–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
            pixelCanvases.forEach((canvas, index) => {
                const tabContainer = document.createElement('div');
                tabContainer.className = `canvas-tab ${index === currentCanvasIndex ? 'active' : ''}`;
                tabContainer.style.position = 'relative';
                tabContainer.style.padding = '10px 30px 10px 15px'; // –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Å—Ç–æ –¥–ª—è –∫–Ω–æ–ø–∫–∏
                
                const tabText = document.createElement('span');
                tabText.textContent = canvas.name;
                
                // –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏)
                const renameBtn = document.createElement('button');
                renameBtn.className = 'rename-btn';
                renameBtn.innerHTML = '‚úé';
                renameBtn.title = '–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å';
                renameBtn.onclick = (e) => {
                    e.stopPropagation();
                    startRenamingCanvas(index, tabContainer, tabText);
                };
                
                tabContainer.appendChild(tabText);
                tabContainer.appendChild(renameBtn);
                tabContainer.onclick = () => switchCanvas(index);
                
                buttonsContainer.appendChild(tabContainer);
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –ª–∏–º–∏—Ç–µ
            if (pixelCanvases.length >= MAX_CANVASES) {
                limitInfo.style.display = 'block';
            } else {
                limitInfo.style.display = 'none';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è —Ö–æ–ª—Å—Ç–∞
        function startRenamingCanvas(canvasIndex, tabContainer, tabText) {
            const currentName = pixelCanvases[canvasIndex].name;
            
            // –°–æ–∑–¥–∞–µ–º input –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'rename-input';
            input.value = currentName;
            input.maxLength = 20;
            input.style.width = '100%';
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
            const originalText = tabText.textContent;
            
            // –ó–∞–º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ input
            tabText.style.display = 'none';
            tabContainer.insertBefore(input, tabText);
            tabContainer.classList.add('editing');
            
            // –§–æ–∫—É—Å–∏—Ä—É–µ–º –∏ –≤—ã–¥–µ–ª—è–µ–º —Ç–µ–∫—Å—Ç
            input.focus();
            input.select();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ Enter –∏–ª–∏ –ø–æ—Ç–µ—Ä–µ —Ñ–æ–∫—É—Å–∞
            const finishRenaming = () => {
                const newName = input.value.trim();
                
                // –£–¥–∞–ª—è–µ–º input
                input.remove();
                tabText.style.display = 'inline';
                tabContainer.classList.remove('editing');
                
                if (newName && newName !== currentName) {
                    pixelCanvases[canvasIndex].name = newName;
                    tabText.textContent = newName;
                    playClickSound();
                } else {
                    tabText.textContent = originalText;
                }
            };
            
            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    finishRenaming();
                }
            });
            
            input.addEventListener('blur', finishRenaming);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–º–µ–Ω—ã –ø–æ Escape
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    input.remove();
                    tabText.style.display = 'inline';
                    tabText.textContent = originalText;
                    tabContainer.classList.remove('editing');
                    playCancelSound();
                }
            });
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∏—Å—É–Ω–∫–∞
        function saveDrawing() {
            const canvas = document.createElement('canvas');
            canvas.width = 640;
            canvas.height = 400;
            const ctx = canvas.getContext('2d');
            
            // –ó–∞–ª–∏–≤–∞–µ–º —Ñ–æ–Ω
            ctx.fillStyle = '#1a1a1a';
            ctx.fillRect(0, 0, 640, 400);
            
            // –†–∏—Å—É–µ–º –ø–∏–∫—Å–µ–ª–∏
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            Object.keys(currentCanvas.pixels).forEach(key => {
                const [x, y] = key.split(',').map(Number);
                ctx.fillStyle = currentCanvas.pixels[key];
                ctx.fillRect(x * 10, y * 10, 10, 10);
            });
            
            // –°–æ–∑–¥–∞–µ–º —Å—Å—ã–ª–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
            const link = document.createElement('a');
            link.download = `pixelart-${new Date().getTime()}.png`;
            link.href = canvas.toDataURL();
            link.click();
            
            playClickSound();
        }
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–º
        function loadTemplate(file) {
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    const currentCanvas = pixelCanvases[currentCanvasIndex];
                    currentCanvas.template = {
                        src: e.target.result,
                        width: img.width,
                        height: img.height
                    };
                    
                    loadTemplateFromData(currentCanvas.template);
                    showTemplateControls();
                    playClickSound();
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function loadTemplateFromData(templateData) {
            templateImage = new Image();
            templateImage.onload = function() {
                renderTemplate();
            };
            templateImage.src = templateData.src;
            
            templateScale = 1;
            templateOffsetX = 0;
            templateOffsetY = 0;
            templateMovementEnabled = false;
            
            document.getElementById('templateScale').value = 1;
            updateMovementButtons();
        }

        function renderTemplate() {
            const overlay = document.getElementById('templateOverlay');
            overlay.innerHTML = '';
            
            const scaledWidth = templateImage.width * templateScale;
            const scaledHeight = templateImage.height * templateScale;
            
            const canvas = document.createElement('canvas');
            canvas.width = scaledWidth;
            canvas.height = scaledHeight;
            const ctx = canvas.getContext('2d');
            
            ctx.drawImage(templateImage, 0, 0, scaledWidth, scaledHeight);
            
            // –°–æ–∑–¥–∞–µ–º pixel-art overlay
            const pixelSize = 10;
            for (let y = 0; y < scaledHeight; y += 2) {
                for (let x = 0; x < scaledWidth; x += 2) {
                    const pixelData = ctx.getImageData(x, y, 1, 1).data;
                    if (pixelData[3] > 0) { // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–ª—å—Ñ–∞-–∫–∞–Ω–∞–ª
                        const color = `rgb(${pixelData[0]}, ${pixelData[1]}, ${pixelData[2]})`;
                        
                        const pixel = document.createElement('div');
                        pixel.className = 'pixel';
                        pixel.style.left = (x/2 + templateOffsetX) * pixelSize + 'px';
                        pixel.style.top = (y/2 + templateOffsetY) * pixelSize + 'px';
                        pixel.style.backgroundColor = color;
                        pixel.style.opacity = templateOpacity.toString();
                        pixel.style.pointerEvents = 'none';
                        
                        overlay.appendChild(pixel);
                    }
                }
            }
        }

        function updateTemplateScale(scale) {
            templateScale = parseFloat(scale);
            if (templateImage) {
                renderTemplate();
            }
        }

        function updateTemplateOpacity(opacity) {
            templateOpacity = parseFloat(opacity);
            if (templateImage) {
                renderTemplate();
            }
        }

        function moveTemplate(dx, dy) {
            if (!templateMovementEnabled) return;
            
            templateOffsetX += dx;
            templateOffsetY += dy;
            
            if (templateImage) {
                renderTemplate();
            }
        }

        function showTemplateControls() {
            document.getElementById('templateControls').style.display = 'block';
        }

        function hideTemplateControls() {
            document.getElementById('templateControls').style.display = 'none';
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Å–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
        const originalHideModalWithSound = hideModalWithSound;
        hideModalWithSound = function(modalId) {
            if (modalId === 'pixelGame') {
                savePixelPaintState();
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–µ–¥–∞–≤–Ω–∏–µ —Ü–≤–µ—Ç–∞
                saveRecentColors();
                // –£–¥–∞–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à
                document.removeEventListener('keydown', handleKeyPress);
                // –£–¥–∞–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ Escape
                document.removeEventListener('keydown', handleEscapeKey);
            }
            originalHideModalWithSound(modalId);
        };

        // –£–¥–∞–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Ö–æ–ª—Å—Ç–∞
        function deleteCurrentCanvas() {
            if (pixelCanvases.length <= 1) {
                alert('–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ö–æ–ª—Å—Ç!');
                return;
            }
            
            if (confirm('–£–¥–∞–ª–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ö–æ–ª—Å—Ç? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) {
                pixelCanvases.splice(currentCanvasIndex, 1);
                currentCanvasIndex = Math.max(0, currentCanvasIndex - 1);
                
                initCurrentCanvas();
                updateCanvasTabs();
                
                const currentCanvas = pixelCanvases[currentCanvasIndex];
                if (!currentCanvas.template) {
                    hideTemplateControls();
                }
                
                playRemoveSound();
            }
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
        function removeTemplate() {
            if (confirm('–£–¥–∞–ª–∏—Ç—å —à–∞–±–ª–æ–Ω —Å —Ç–µ–∫—É—â–µ–≥–æ —Ö–æ–ª—Å—Ç–∞?')) {
                const currentCanvas = pixelCanvases[currentCanvasIndex];
                currentCanvas.template = null;
                templateImage = null;
                
                const overlay = document.getElementById('templateOverlay');
                overlay.innerHTML = '';
                
                hideTemplateControls();
                playRemoveSound();
            }
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —à–∞–±–ª–æ–Ω–∞
        function toggleTemplateVisibility() {
            const overlay = document.getElementById('templateOverlay');
            if (overlay.style.display === 'none') {
                overlay.style.display = 'block';
                playClickSound();
            } else {
                overlay.style.display = 'none';
                playCancelSound();
            }
        }

        // –û–±–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞ (—É–±—Ä–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ enabled)
        function moveTemplate(dx, dy) {
            templateOffsetX += dx;
            templateOffsetY += dy;
            
            if (templateImage) {
                renderTemplate();
            }
        }

        // –û–±–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∑–∞–≥—Ä—É–∑–∫–∏ —à–∞–±–ª–æ–Ω–∞ (—É–±—Ä–∞—Ç—å –≤–∫–ª—é—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è)
        function loadTemplateFromData(templateData) {
            templateImage = new Image();
            templateImage.onload = function() {
                renderTemplate();
            };
            templateImage.src = templateData.src;
            
            templateScale = 1;
            templateOffsetX = 0;
            templateOffsetY = 0;
            
            document.getElementById('templateScale').value = 1;
            document.getElementById('templateOpacity').value = 0.5; // –î–æ–±–∞–≤–∏—Ç—å —ç—Ç—É —Å—Ç—Ä–æ–∫—É
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
        function selectTool(tool) {
            if (isPipetteMode) {
                deactivatePipetteMode();
            }
            currentTool = tool;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
            document.querySelectorAll('.tool-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(tool + 'Tool').classList.add('active');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –∫–æ–Ω—Ç—Ä–æ–ª—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
            document.querySelectorAll('.tool-controls').forEach(controls => {
                controls.classList.remove('active');
            });
            
            if (tool === 'brush') {
                document.getElementById('brushControls').classList.add('active');
                // –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞ –∫–∏—Å—Ç—å —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ
                if (hasSelection()) {
                    deselectArea();
                }
            } else if (tool === 'fill') {
                document.getElementById('fillControls').classList.add('active');
                // –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞ –∑–∞–ª–∏–≤–∫—É —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ
                if (hasSelection()) {
                    deselectArea();
                }
            } else if (tool === 'selection') {
                document.getElementById('selectionControls').classList.add('active');
                // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –≤—ã–¥–µ–ª–µ–Ω–∏—è
                setTimeout(() => {
                    updateDeselectButton(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
                    if (hasSelection()) {
                        previewReplaceSelection();
                    }
                }, 100);
            }
            
            // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å–º–µ–Ω–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ (–∫—Ä–æ–º–µ selection)
            if (tool !== 'selection') {
                clearSelectionVisual();
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤—ã–¥–µ–ª–µ–Ω–∏—è
                selectionStartX = selectionEndX = selectionStartY = selectionEndY = 0;
            }
            
            playClickSound();
        }

        function updateBrushSize(size) {
            brushSize = parseInt(size);
            document.getElementById('brushSizeValue').textContent = size;
        }

        function drawWithBrush(x, y) {
            // –ï—Å–ª–∏ –º–∞–∑–æ–∫ –µ—â–µ –Ω–µ –Ω–∞—á–∞—Ç, –Ω–∞—á–∏–Ω–∞–µ–º –µ–≥–æ
            if (!isStrokeActive) {
                startStroke();
            }
            
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            const radius = Math.floor(brushSize / 2);
            
            // –†–∏—Å—É–µ–º —Å—Ñ–µ—Ä—É (–∫—Ä—É–≥) –ø–∏–∫—Å–µ–ª–µ–π –∏ –¥–æ–±–∞–≤–ª—è–µ–º –≤ —Ç–µ–∫—É—â–∏–π –º–∞–∑–æ–∫
            for (let dy = -radius; dy <= radius; dy++) {
                for (let dx = -radius; dx <= radius; dx++) {
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –ø–∏–∫—Å–µ–ª—å –≤–Ω—É—Ç—Ä–∏ –∫—Ä—É–≥–∞
                    if (dx * dx + dy * dy <= radius * radius) {
                        const pixelX = x + dx;
                        const pixelY = y + dy;
                        
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥—Ä–∞–Ω–∏—Ü—ã —Ö–æ–ª—Å—Ç–∞
                        if (pixelX >= 0 && pixelX < 64 && pixelY >= 0 && pixelY < 40) {
                            addPixelToStroke(pixelX, pixelY, currentColor);
                        }
                    }
                }
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ü–≤–µ—Ç –≤ –Ω–µ–¥–∞–≤–Ω–∏–µ –ø–æ—Å–ª–µ —Ä–∏—Å–æ–≤–∞–Ω–∏—è
            addToRecentColors(currentColor);
            playPaintSound();
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–ª–∏–≤–∫–∏ –æ–±–ª–∞—Å—Ç–∏
        function fillArea(x, y) {
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            const targetColor = currentCanvas.pixels[`${x},${y}`];
            
            // –ï—Å–ª–∏ –∫–ª–∏–∫–Ω—É–ª–∏ –Ω–∞ —É–∂–µ –∑–∞–∫—Ä–∞—à–µ–Ω–Ω—ã–π –ø–∏–∫—Å–µ–ª—å, –≤—ã—Ö–æ–¥–∏–º
            if (targetColor === currentColor) return;
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∞–ª–≥–æ—Ä–∏—Ç–º –∑–∞–ª–∏–≤–∫–∏ —Å –ø–æ–º–æ—â—å—é –æ—á–µ—Ä–µ–¥–∏
            const queue = [[x, y]];
            const visited = new Set();
            
            while (queue.length > 0) {
                const [currentX, currentY] = queue.shift();
                const key = `${currentX},${currentY}`;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥—Ä–∞–Ω–∏—Ü—ã –∏ –ø–æ—Å–µ—â–µ–Ω–Ω—ã–µ –ø–∏–∫—Å–µ–ª–∏
                if (currentX < 0 || currentX >= 64 || currentY < 0 || currentY >= 40) continue;
                if (visited.has(key)) continue;
                
                const pixelColor = currentCanvas.pixels[key];
                
                // –ó–∞–ª–∏–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ü–≤–µ—Ç —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∏—Å—Ö–æ–¥–Ω—ã–º –∏–ª–∏ –ø–∏–∫—Å–µ–ª—å –ø—É—Å—Ç–æ–π
                if (pixelColor === targetColor || (pixelColor === undefined && targetColor === undefined)) {
                    currentCanvas.pixels[key] = currentColor;
                    renderPixel(currentX, currentY, currentColor);
                    visited.add(key);
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ—Å–µ–¥–Ω–∏–µ –ø–∏–∫—Å–µ–ª–∏
                    queue.push([currentX + 1, currentY]);
                    queue.push([currentX - 1, currentY]);
                    queue.push([currentX, currentY + 1]);
                    queue.push([currentX, currentY - 1]);
                }
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ü–≤–µ—Ç –≤ –Ω–µ–¥–∞–≤–Ω–∏–µ –ø–æ—Å–ª–µ –∑–∞–ª–∏–≤–∫–∏
            addToRecentColors(currentColor);
            playPaintSound();
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è
        function startSelection(x, y) {
            isSelecting = true;
            selectionStartX = x;
            selectionStartY = y;
            selectionEndX = x;
            selectionEndY = y;
            updateSelectionVisual();
            updateDeselectButton(); // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É
        }

        function updateSelection(x, y) {
            if (!isSelecting) return;
            selectionEndX = x;
            selectionEndY = y;
            updateSelectionVisual();
            updateDeselectButton(); // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–º–µ–Ω—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—ã–¥–µ–ª–µ–Ω–∏—è
            if (document.getElementById('selectionControls').classList.contains('active')) {
                previewReplaceSelection();
            }
        }

        function endSelection() {
            if (!isSelecting) return;
            isSelecting = false;
            
            // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤—ã–¥–µ–ª–µ–Ω–∏—è
            const startX = Math.min(selectionStartX, selectionEndX);
            const startY = Math.min(selectionStartY, selectionEndY);
            const endX = Math.max(selectionStartX, selectionEndX);
            const endY = Math.max(selectionStartY, selectionEndY);
            
            selectionStartX = startX;
            selectionStartY = startY;
            selectionEndX = endX;
            selectionEndY = endY;
            
            updateDeselectButton(); // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–º–µ–Ω—ã
            if (document.getElementById('selectionControls').classList.contains('active')) {
                previewReplaceSelection();
            }
        }

        function updateSelectionVisual() {
            clearSelectionVisual();
            
            const startX = Math.min(selectionStartX, selectionEndX);
            const startY = Math.min(selectionStartY, selectionEndY);
            const endX = Math.max(selectionStartX, selectionEndX);
            const endY = Math.max(selectionStartY, selectionEndY);
            
            const width = (endX - startX + 1) * 10;
            const height = (endY - startY + 1) * 10;
            
            const selectionArea = document.createElement('div');
            selectionArea.className = 'selection-area';
            selectionArea.style.left = (startX * 10) + 'px';
            selectionArea.style.top = (startY * 10) + 'px';
            selectionArea.style.width = width + 'px';
            selectionArea.style.height = height + 'px';
            
            document.getElementById('pixelArea').appendChild(selectionArea);
        }

        function clearSelectionVisual() {
            const existingSelection = document.querySelector('.selection-area');
            if (existingSelection) {
                existingSelection.remove();
            }
            updateDeselectButton(); // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è
        }

        function clearSelection() {
            if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–Ω—É—é –æ–±–ª–∞—Å—Ç—å?')) {
                saveActionState('selection_action', {
                    selectionData: {
                        action: 'clear',
                        bounds: {
                            startX: Math.min(selectionStartX, selectionEndX),
                            startY: Math.min(selectionStartY, selectionEndY),
                            endX: Math.max(selectionStartX, selectionEndX),
                            endY: Math.max(selectionStartY, selectionEndY)
                        }
                    }
                });
                
                const currentCanvas = pixelCanvases[currentCanvasIndex];
                const startX = Math.min(selectionStartX, selectionEndX);
                const startY = Math.min(selectionStartY, selectionEndY);
                const endX = Math.max(selectionStartX, selectionEndX);
                const endY = Math.max(selectionStartY, selectionEndY);
                
                for (let y = startY; y <= endY; y++) {
                    for (let x = startX; x <= endX; x++) {
                        const pixelKey = `${x},${y}`;
                        if (currentCanvas.pixels[pixelKey]) {
                            delete currentCanvas.pixels[pixelKey];
                            removePixel(x, y);
                        }
                    }
                }
                
                playRemoveSound();
            }
        }

        function fillSelection() {
            saveActionState('selection_action', {
                selectionData: {
                    action: 'fill',
                    bounds: {
                        startX: Math.min(selectionStartX, selectionEndX),
                        startY: Math.min(selectionStartY, selectionEndY),
                        endX: Math.max(selectionStartX, selectionEndX),
                        endY: Math.max(selectionStartY, selectionEndY)
                    },
                    color: currentColor
                }
            });
            
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            const startX = Math.min(selectionStartX, selectionEndX);
            const startY = Math.min(selectionStartY, selectionEndY);
            const endX = Math.max(selectionStartX, selectionEndX);
            const endY = Math.max(selectionStartY, selectionEndY);
            
            for (let y = startY; y <= endY; y++) {
                for (let x = startX; x <= endX; x++) {
                    const pixelKey = `${x},${y}`;
                    currentCanvas.pixels[pixelKey] = currentColor;
                    renderPixel(x, y, currentColor);
                }
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ü–≤–µ—Ç –≤ –Ω–µ–¥–∞–≤–Ω–∏–µ –ø–æ—Å–ª–µ –∑–∞–ª–∏–≤–∫–∏ –≤—ã–¥–µ–ª–µ–Ω–∏—è
            addToRecentColors(currentColor);
            playPaintSound();
        }

        function updateReplaceToColor(color) {
            replaceToColor = color;
            document.getElementById('replaceToColorPreview').style.backgroundColor = color;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ü–≤–µ—Ç–∞
            if (selectionStartX !== selectionEndX || selectionStartY !== selectionEndY) {
                previewReplaceSelection();
            }
        }

        function replaceSelectionColor() {
            saveActionState('selection_action', {
                selectionData: {
                    action: 'replace_color',
                    bounds: {
                        startX: Math.min(selectionStartX, selectionEndX),
                        startY: Math.min(selectionStartY, selectionEndY),
                        endX: Math.max(selectionStartX, selectionEndX),
                        endY: Math.max(selectionStartY, selectionEndY)
                    },
                    fromColor: replaceFromColor,
                    toColor: replaceToColor
                }
            });
            
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            const startX = Math.min(selectionStartX, selectionEndX);
            const startY = Math.min(selectionStartY, selectionEndY);
            const endX = Math.max(selectionStartX, selectionEndX);
            const endY = Math.max(selectionStartY, selectionEndY);
            
            let replacedCount = 0;
            
            for (let y = startY; y <= endY; y++) {
                for (let x = startX; x <= endX; x++) {
                    const pixelKey = `${x},${y}`;
                    if (currentCanvas.pixels[pixelKey] === replaceFromColor) {
                        currentCanvas.pixels[pixelKey] = replaceToColor;
                        renderPixel(x, y, replaceToColor);
                        replacedCount++;
                    }
                }
            }
            
            if (replacedCount > 0) {
                playClickSound();
            } else {
                playCancelSound();
                alert('–í –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –ø–∏–∫—Å–µ–ª–µ–π –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞ –¥–ª—è –∑–∞–º–µ–Ω—ã.');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ä–µ–∂–∏–º–∞ –ø–∏–ø–µ—Ç–∫–∏ –¥–ª—è –∑–∞–º–µ–Ω—ã —Ü–≤–µ—Ç–∞
        function activateReplacePipette() {
            isPipetteMode = true;
            pipetteForReplace = true;
            document.getElementById('pixelArea').classList.add('pipette-mode');
            document.getElementById('pipetteBtn').style.background = 'linear-gradient(135deg, #7c7c7c 0%, #616161 100%)';
            document.getElementById('pipetteBtn').style.borderColor = '#f7dc6f';
            document.getElementById('pipetteBtn').innerHTML = 'üñçÔ∏è –ü–∏–ø–µ—Ç–∫–∞';
            
            playClickSound();

            // –í—Ä–µ–º–µ–Ω–Ω–æ –º–µ–Ω—è–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è —Ä–µ–∂–∏–º–∞ –ø–∏–ø–µ—Ç–∫–∏
            document.getElementById('toolDescription').textContent = 
                "–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —Ü–≤–µ—Ç –Ω–∞ —Ö–æ–ª—Å—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ü–≤–µ—Ç–∞ –∑–∞–º–µ–Ω—ã (–∏–ª–∏ –Ω–∞ –ø—É—Å—Ç—É—é –æ–±–ª–∞—Å—Ç—å –¥–ª—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–≥–æ —Ñ–æ–Ω–∞)";
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ü–≤–µ—Ç–∞ –∑–∞–º–µ–Ω—ã —Å –ø–æ–º–æ—â—å—é –ø–∏–ø–µ—Ç–∫–∏
        function pickColorForReplace(e) {
            if (!isPipetteMode || !pipetteForReplace) return;
            
            const coords = getPixelCoordinates(e);
            if (!coords) return;
            
            const [x, y] = coords;
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            const pixelKey = `${x},${y}`;
            
            // –ï—Å–ª–∏ –∫–ª–∏–∫–Ω—É–ª–∏ –Ω–∞ –ø—É—Å—Ç—É—é –æ–±–ª–∞—Å—Ç—å - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω
            if (!currentCanvas.pixels[pixelKey]) {
                replaceFromColor = undefined; // –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π
                document.getElementById('replaceFromColor').style.backgroundColor = '#1a1a1a'; // –¢–µ–º–Ω—ã–π —Ñ–æ–Ω
                document.getElementById('replaceFromColor').style.backgroundImage = 
                    'linear-gradient(45deg, #333 25%, transparent 25%), linear-gradient(-45deg, #333 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #333 75%), linear-gradient(-45deg, transparent 75%, #333 75%)';
                document.getElementById('replaceFromColor').style.backgroundSize = '4px 4px';
                document.getElementById('replaceFromColor').style.backgroundPosition = '0 0, 0 2px, 2px -2px, -2px 0px';
            } else {
                replaceFromColor = currentCanvas.pixels[pixelKey];
                document.getElementById('replaceFromColor').style.backgroundColor = replaceFromColor;
                document.getElementById('replaceFromColor').style.backgroundImage = 'none';
            }
            
            // –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ä–µ–∂–∏–º–∞ –ø–∏–ø–µ—Ç–∫–∏
            deactivatePipetteMode();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
            if (selectionStartX !== selectionEndX || selectionStartY !== selectionEndY) {
                previewReplaceSelection();
            }
            
            playClickSound();
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ä–µ–∂–∏–º–∞ –ø–∏–ø–µ—Ç–∫–∏
        function deactivatePipetteMode() {
            isPipetteMode = false;
            pipetteForReplace = false;
            document.getElementById('pixelArea').classList.remove('pipette-mode');
            document.getElementById('pipetteBtn').style.background = 'linear-gradient(135deg, #606060 0%, #505050 100%)';
            document.getElementById('pipetteBtn').style.borderColor = '#a0a0a0';
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ã—á–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
            updateToolInfo();
        }

        // –û–±–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é pickColor –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–≤—É–º—è —Ä–µ–∂–∏–º–∞–º–∏ –ø–∏–ø–µ—Ç–∫–∏
        function pickColor(e) {
            const coords = getPixelCoordinates(e);
            if (!coords) return;
            
            const [x, y] = coords;
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            const pixelKey = `${x},${y}`;
            
            if (isPipetteMode && pipetteForReplace) {
                // –†–µ–∂–∏–º –ø–∏–ø–µ—Ç–∫–∏ –¥–ª—è –∑–∞–º–µ–Ω—ã —Ü–≤–µ—Ç–∞
                pickColorForReplace(e);
                return;
            }
            
            if (currentCanvas.pixels[pixelKey]) {
                selectColorFromPicker(currentCanvas.pixels[pixelKey]);
                playClickSound();
            }
            
            // –ï—Å–ª–∏ –±—ã–ª –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω —Ä–µ–∂–∏–º –ø–∏–ø–µ—Ç–∫–∏ (–æ–±—ã—á–Ω—ã–π), –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –µ–≥–æ
            if (isPipetteMode) {
                deactivatePipetteMode();
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –ø–∞–Ω–µ–ª–∏
        function updateToolInfo() {
            document.getElementById('currentToolName').textContent = toolNames[currentTool];
            document.getElementById('toolDescription').textContent = toolDescriptions[currentTool];
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è undo
        function saveState() {
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            const state = JSON.parse(JSON.stringify(currentCanvas.pixels));
            
            undoStack.push(state);
            redoStack = []; // –û—á–∏—â–∞–µ–º —Å—Ç–µ–∫ –ø–æ–≤—Ç–æ—Ä–∞ –ø—Ä–∏ –Ω–æ–≤–æ–º –¥–µ–π—Å—Ç–≤–∏–∏
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞
            if (undoStack.length > MAX_UNDO_STEPS) {
                undoStack.shift();
            }
            
            updateUndoRedoButtons();
        }

        // –§—É–Ω–∫—Ü–∏—è –Ω–∞—á–∞–ª–∞ –º–∞–∑–∫–∞
        function startStroke() {
            if (isStrokeActive) return;
            
            isStrokeActive = true;
            currentStrokePixels.clear();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ –Ω–∞—á–∞–ª–∞ –º–∞–∑–∫–∞
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            const stateBeforeStroke = JSON.parse(JSON.stringify(currentCanvas.pixels));
            undoStack.push({
                type: 'stroke_start',
                state: stateBeforeStroke
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∏–∫—Å–µ–ª—è –≤ —Ç–µ–∫—É—â–∏–π –º–∞–∑–æ–∫
        function addPixelToStroke(x, y, color) {
            if (!isStrokeActive) return;
            
            const pixelKey = `${x},${y}`;
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ü–≤–µ—Ç –ø–∏–∫—Å–µ–ª—è (–µ—Å–ª–∏ –æ–Ω –±—ã–ª –∏–∑–º–µ–Ω–µ–Ω —Ä–∞–Ω–µ–µ –≤ —ç—Ç–æ–º –º–∞–∑–∫–µ)
            if (!currentStrokePixels.has(pixelKey)) {
                currentStrokePixels.set(pixelKey, currentCanvas.pixels[pixelKey]);
            }
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π —Ü–≤–µ—Ç
            currentCanvas.pixels[pixelKey] = color;
            renderPixel(x, y, color);
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–∞–∑–∫–∞
        function endStroke() {
            if (!isStrokeActive) return;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–∞–∑–∫–∞ –≤ undo stack
            if (currentStrokePixels.size > 0) {
                const strokeData = {
                    type: 'stroke',
                    pixels: Array.from(currentStrokePixels.entries()),
                    finalState: JSON.parse(JSON.stringify(pixelCanvases[currentCanvasIndex].pixels))
                };
                
                // –ó–∞–º–µ–Ω—è–µ–º –Ω–∞—á–∞–ª–æ –º–∞–∑–∫–∞ –Ω–∞ –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–∞–∑–∫–∞
                if (undoStack.length > 0 && undoStack[undoStack.length - 1].type === 'stroke_start') {
                    undoStack.pop(); // –£–¥–∞–ª—è–µ–º –º–∞—Ä–∫–µ—Ä –Ω–∞—á–∞–ª–∞
                }
                
                undoStack.push(strokeData);
                redoStack = []; // –û—á–∏—â–∞–µ–º —Å—Ç–µ–∫ –ø–æ–≤—Ç–æ—Ä–∞
                
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞
                if (undoStack.length > MAX_UNDO_STEPS) {
                    undoStack.shift();
                }
            } else {
                // –ï—Å–ª–∏ –º–∞–∑–æ–∫ –ø—É—Å—Ç–æ–π, —É–¥–∞–ª—è–µ–º –º–∞—Ä–∫–µ—Ä –Ω–∞—á–∞–ª–∞
                if (undoStack.length > 0 && undoStack[undoStack.length - 1].type === 'stroke_start') {
                    undoStack.pop();
                }
            }
            
            isStrokeActive = false;
            currentStrokePixels.clear();
            updateUndoRedoButtons();
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–º–µ–Ω—ã –¥–µ–π—Å—Ç–≤–∏—è
        function undoAction() {
            if (undoStack.length === 0) return;
            
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            const currentState = JSON.parse(JSON.stringify(currentCanvas.pixels));
            
            let action = undoStack.pop();
            
            if (action.type === 'stroke') {
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ –º–∞–∑–∫–∞
                redoStack.push({
                    type: 'stroke',
                    pixels: action.pixels,
                    finalState: currentState
                });
                
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ –ø–∏–∫—Å–µ–ª–µ–π
                action.pixels.forEach(([pixelKey, originalColor]) => {
                    if (originalColor === undefined) {
                        delete currentCanvas.pixels[pixelKey];
                        removePixel(...pixelKey.split(',').map(Number));
                    } else {
                        currentCanvas.pixels[pixelKey] = originalColor;
                        renderPixel(...pixelKey.split(',').map(Number), originalColor);
                    }
                });
            } else if (action.type === 'fill') {
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ª–∏–≤–∫–∏
                redoStack.push({
                    type: 'fill',
                    state: currentState,
                    fillData: action.fillData
                });
                
                currentCanvas.pixels = JSON.parse(JSON.stringify(action.state));
                redrawCanvas();
            } else if (action.type === 'clear') {
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–∏—Å—Ç–∫–∏
                redoStack.push({
                    type: 'clear',
                    state: currentState
                });
                
                currentCanvas.pixels = JSON.parse(JSON.stringify(action.state));
                redrawCanvas();
            } else if (action.type === 'selection_action') {
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π —Å –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º
                redoStack.push({
                    type: 'selection_action',
                    state: currentState,
                    selectionData: action.selectionData
                });
                
                currentCanvas.pixels = JSON.parse(JSON.stringify(action.state));
                redrawCanvas();
            }
            
            updateUndoRedoButtons();
            playClickSound();
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–≤—Ç–æ—Ä–∞ –¥–µ–π—Å—Ç–≤–∏—è
        function redoAction() {
            if (redoStack.length === 0) return;
            
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            const currentState = JSON.parse(JSON.stringify(currentCanvas.pixels));
            
            let action = redoStack.pop();
            
            if (action.type === 'stroke') {
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∞–∑–æ–∫
                undoStack.push({
                    type: 'stroke',
                    pixels: action.pixels.map(([key, originalColor]) => [key, currentCanvas.pixels[key]]),
                    finalState: currentState
                });
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∞–∑–æ–∫
                currentCanvas.pixels = JSON.parse(JSON.stringify(action.finalState));
                redrawCanvas();
            } else if (action.type === 'fill') {
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–ª–∏–≤–∫—É
                undoStack.push({
                    type: 'fill',
                    state: currentState,
                    fillData: action.fillData
                });
                
                currentCanvas.pixels = JSON.parse(JSON.stringify(action.state));
                redrawCanvas();
            } else if (action.type === 'clear') {
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—á–∏—Å—Ç–∫—É
                undoStack.push({
                    type: 'clear',
                    state: currentState
                });
                
                currentCanvas.pixels = JSON.parse(JSON.stringify(action.state));
                redrawCanvas();
            } else if (action.type === 'selection_action') {
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–µ–π—Å—Ç–≤–∏–µ —Å –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º
                undoStack.push({
                    type: 'selection_action',
                    state: currentState,
                    selectionData: action.selectionData
                });
                
                currentCanvas.pixels = JSON.parse(JSON.stringify(action.state));
                redrawCanvas();
            }
            
            updateUndoRedoButtons();
            playClickSound();
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –¥—Ä—É–≥–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π (–∑–∞–ª–∏–≤–∫–∞, –æ—á–∏—Å—Ç–∫–∞ –∏ —Ç.–¥.)
        function saveActionState(actionType, data = null) {
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            const state = JSON.parse(JSON.stringify(currentCanvas.pixels));
            
            undoStack.push({
                type: actionType,
                state: state,
                ...data
            });
            
            redoStack = []; // –û—á–∏—â–∞–µ–º —Å—Ç–µ–∫ –ø–æ–≤—Ç–æ—Ä–∞
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞
            if (undoStack.length > MAX_UNDO_STEPS) {
                undoStack.shift();
            }
            
            updateUndoRedoButtons();
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏ —Ö–æ–ª—Å—Ç–∞
        function redrawCanvas() {
            // –û—á–∏—â–∞–µ–º —Ç–µ–∫—É—â–∏–µ –ø–∏–∫—Å–µ–ª–∏
            document.querySelectorAll('.pixel').forEach(pixel => pixel.remove());
            
            // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –≤—Å–µ –ø–∏–∫—Å–µ–ª–∏ –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
            renderPixels();
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–æ–∫ undo/redo
        function updateUndoRedoButtons() {
            document.getElementById('undoBtn').disabled = undoStack.length === 0;
            document.getElementById('redoBtn').disabled = redoStack.length === 0;
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à
        function handleKeyPress(e) {
            if (e.ctrlKey || e.metaKey) {
                if (e.key === 'z' && !e.shiftKey) {
                    e.preventDefault();
                    undoAction();
                } else if (e.key === 'y' || (e.key === 'z' && e.shiftKey)) {
                    e.preventDefault();
                    redoAction();
                }
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ü–≤–µ—Ç–∞ –≤ –Ω–µ–¥–∞–≤–Ω–∏–µ
        function addToRecentColors(color) {
            // –£–¥–∞–ª—è–µ–º —Ü–≤–µ—Ç –µ—Å–ª–∏ –æ–Ω —É–∂–µ –µ—Å—Ç—å –≤ —Å–ø–∏—Å–∫–µ
            const existingIndex = recentColors.indexOf(color);
            if (existingIndex !== -1) {
                recentColors.splice(existingIndex, 1);
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ü–≤–µ—Ç –≤ –Ω–∞—á–∞–ª–æ —Å–ø–∏—Å–∫–∞
            recentColors.unshift(color);
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä —Å–ø–∏—Å–∫–∞
            if (recentColors.length > MAX_RECENT_COLORS) {
                recentColors.pop();
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            updateRecentColorsDisplay();
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ–¥–∞–≤–Ω–∏—Ö —Ü–≤–µ—Ç–æ–≤
        function updateRecentColorsDisplay() {
            const recentColorsContainer = document.getElementById('recentColors');
            recentColorsContainer.innerHTML = '';
            
            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–µ–¥–∞–≤–Ω–µ–≥–æ —Ü–≤–µ—Ç–∞
            for (let i = 0; i < MAX_RECENT_COLORS; i++) {
                const colorItem = document.createElement('div');
                
                if (i < recentColors.length) {
                    // –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π —Ü–≤–µ—Ç
                    colorItem.className = 'recent-color-item';
                    colorItem.style.backgroundColor = recentColors[i];
                    colorItem.title = `–¶–≤–µ—Ç: ${recentColors[i]}`;
                    colorItem.onclick = () => selectRecentColor(recentColors[i]);
                } else {
                    // –ü—É—Å—Ç–æ–π —Å–ª–æ—Ç
                    colorItem.className = 'recent-color-item empty';
                    colorItem.title = '–ü—É—Å—Ç–æ';
                }
                
                recentColorsContainer.appendChild(colorItem);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ —Ü–≤–µ—Ç–∞ –∏–∑ –Ω–µ–¥–∞–≤–Ω–∏—Ö
        function selectRecentColor(color) {
            currentColor = color;
            document.getElementById('colorPreview').style.backgroundColor = color;
            // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ü–≤–µ—Ç –≤ –Ω–∞—á–∞–ª–æ —Å–ø–∏—Å–∫–∞
            addToRecentColors(color);
            playClickSound();
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–µ–¥–∞–≤–Ω–∏—Ö —Ü–≤–µ—Ç–æ–≤ –∏–∑ localStorage
        function loadRecentColors() {
            const saved = localStorage.getItem('pixelPaintRecentColors');
            if (saved) {
                recentColors = JSON.parse(saved);
                updateRecentColorsDisplay();
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–µ–¥–∞–≤–Ω–∏—Ö —Ü–≤–µ—Ç–æ–≤ –≤ localStorage
        function saveRecentColors() {
            localStorage.setItem('pixelPaintRecentColors', JSON.stringify(recentColors));
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —á–µ–∫–±–æ–∫—Å–∞ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–≥–æ —Ñ–æ–Ω–∞
        function toggleTransparentBg() {
            replaceTransparentBg = document.getElementById('transparentBgCheckbox').checked;
            playClickSound();
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–º–µ–Ω—ã —Ü–≤–µ—Ç–∞ –≤ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è)
        function replaceSelectionColor() {
            const startX = Math.min(selectionStartX, selectionEndX);
            const startY = Math.min(selectionStartY, selectionEndY);
            const endX = Math.max(selectionStartX, selectionEndX);
            const endY = Math.max(selectionStartY, selectionEndY);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è undo
            saveActionState('selection_action', {
                selectionData: {
                    action: 'replace_color',
                    bounds: { startX, startY, endX, endY },
                    fromColor: replaceFromColor,
                    toColor: replaceToColor,
                    replaceTransparent: replaceTransparentBg
                }
            });
            
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            let replacedCount = 0;
            
            for (let y = startY; y <= endY; y++) {
                for (let x = startX; x <= endX; x++) {
                    const pixelKey = `${x},${y}`;
                    const currentPixelColor = currentCanvas.pixels[pixelKey];
                    
                    let shouldReplace = false;
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ª–æ–≤–∏—è –∑–∞–º–µ–Ω—ã
                    if (replaceTransparentBg) {
                        // –ó–∞–º–µ–Ω—è–µ–º –ª–∏–±–æ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ü–≤–µ—Ç, –ª–∏–±–æ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ —É—á–∞—Å—Ç–∫–∏
                        shouldReplace = currentPixelColor === replaceFromColor || 
                                    currentPixelColor === undefined;
                    } else {
                        // –ó–∞–º–µ–Ω—è–µ–º —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ü–≤–µ—Ç
                        shouldReplace = currentPixelColor === replaceFromColor;
                    }
                    
                    if (shouldReplace) {
                        // –ï—Å–ª–∏ —ç—Ç–æ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —É—á–∞—Å—Ç–æ–∫ –∏ –≤–∫–ª—é—á–µ–Ω–∞ –∑–∞–º–µ–Ω–∞ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏
                        if (currentPixelColor === undefined && replaceTransparentBg) {
                            currentCanvas.pixels[pixelKey] = replaceToColor;
                            renderPixel(x, y, replaceToColor);
                        } 
                        // –ï—Å–ª–∏ —ç—Ç–æ —Ü–≤–µ—Ç –¥–ª—è –∑–∞–º–µ–Ω—ã
                        else if (currentPixelColor === replaceFromColor) {
                            currentCanvas.pixels[pixelKey] = replaceToColor;
                            renderPixel(x, y, replaceToColor);
                        }
                        replacedCount++;
                    }
                }
            }
            
            if (replacedCount > 0) {
                playClickSound();
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞–º–µ–Ω—ã
                showReplaceStats(replacedCount, startX, startY, endX, endY);
            } else {
                playCancelSound();
                alert('–í –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –ø–∏–∫—Å–µ–ª–µ–π –¥–ª—è –∑–∞–º–µ–Ω—ã.');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∑–∞–º–µ–Ω—ã
        function showReplaceStats(replacedCount, startX, startY, endX, endY) {
            const width = endX - startX + 1;
            const height = endY - startY + 1;
            const totalPixels = width * height;
            const percentage = Math.round((replacedCount / totalPixels) * 100);
            
            // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            const statsMessage = document.createElement('div');
            statsMessage.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(80, 80, 80, 0.95);
                border: 2px solid #f7dc6f;
                border-radius: 10px;
                padding: 15px;
                color: #f0f0f0;
                font-family: 'Courier New', monospace;
                font-size: 14px;
                z-index: 10000;
                text-align: center;
                box-shadow: 0 0 20px rgba(247, 220, 111, 0.3);
            `;
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                statsMessage.style.opacity = '0';
                statsMessage.style.transition = 'opacity 0.5s ease';
                setTimeout(() => {
                    if (statsMessage.parentNode) {
                        statsMessage.parentNode.removeChild(statsMessage);
                    }
                }, 500);
            }, 2000);
        }

        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–º–µ–Ω—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        function previewReplaceSelection() {
            const startX = Math.min(selectionStartX, selectionEndX);
            const startY = Math.min(selectionStartY, selectionEndY);
            const endX = Math.max(selectionStartX, selectionEndX);
            const endY = Math.max(selectionStartY, selectionEndY);
            
            const currentCanvas = pixelCanvases[currentCanvasIndex];
            let affectedPixels = 0;
            
            for (let y = startY; y <= endY; y++) {
                for (let x = startX; x <= endX; x++) {
                    const pixelKey = `${x},${y}`;
                    const currentPixelColor = currentCanvas.pixels[pixelKey];
                    
                    let shouldReplace = false;
                    
                    if (replaceTransparentBg) {
                        shouldReplace = currentPixelColor === replaceFromColor || 
                                    currentPixelColor === undefined;
                    } else {
                        shouldReplace = currentPixelColor === replaceFromColor;
                    }
                    
                    if (shouldReplace) {
                        affectedPixels++;
                    }
                }
            }
            
            const width = endX - startX + 1;
            const height = endY - startY + 1;
            const totalPixels = width * height;
            const percentage = Math.round((affectedPixels / totalPixels) * 100);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –¥–ª—è –ø–æ–∫–∞–∑–∞ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
            document.getElementById('toolDescription').textContent = 
                `–ë—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω–æ: ${affectedPixels} –ø–∏–∫—Å–µ–ª–µ–π (${percentage}% –æ–±–ª–∞—Å—Ç–∏)`;
            
            return affectedPixels;
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–º–µ–Ω—ã –≤—ã–¥–µ–ª–µ–Ω–∏—è
        function deselectArea() {
            if (!hasSelection()) return;
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤—ã–¥–µ–ª–µ–Ω–∏—è
            selectionStartX = 0;
            selectionStartY = 0;
            selectionEndX = 0;
            selectionEndY = 0;
            isSelecting = false;
            
            // –£–±–∏—Ä–∞–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ
            clearSelectionVisual();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
            updateDeselectButton();
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–º–µ–Ω—ã
            document.getElementById('toolDescription').textContent = toolDescriptions.selection;
            
            playClickSound();
        }

        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è
        function hasSelection() {
            return selectionStartX !== selectionEndX || selectionStartY !== selectionEndY;
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –æ—Ç–º–µ–Ω—ã –≤—ã–¥–µ–ª–µ–Ω–∏—è
        function updateDeselectButton() {
            const deselectBtn = document.getElementById('deselectBtn');
            const hasActiveSelection = hasSelection();
            
            deselectBtn.disabled = !hasActiveSelection;
            
            if (hasActiveSelection) {
                const width = Math.abs(selectionEndX - selectionStartX) + 1;
                const height = Math.abs(selectionEndY - selectionStartY) + 1;
                deselectBtn.innerHTML = `‚ùå –û—Ç–º–µ–Ω–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ (${width}√ó${height})`;
            } else {
                deselectBtn.innerHTML = '‚ùå –û—Ç–º–µ–Ω–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–º–µ–Ω—ã –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–æ –∫–ª–∞–≤–∏—à–µ Escape
        function handleEscapeKey(e) {
            if (e.key === 'Escape' && currentTool === 'selection' && hasSelection()) {
                deselectArea();
                e.preventDefault();
            }
        }

        // –°–µ–∫—Ä–µ—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º —Å–µ–∫—Ä–µ—Ç–Ω—É—é –∫–Ω–æ–ø–∫—É –≤ —Å–ª—É—á–∞–π–Ω–æ–º —Å–≤–æ–±–æ–¥–Ω–æ–º —É–≥–ª—É
        function positionSecretButton() {
            // –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —É–≥–ª–æ–≤
            const allCorners = [...corners];
            
            // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —É–≥–æ–ª
            const randomIndex = Math.floor(Math.random() * allCorners.length);
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –∫–Ω–æ–ø–∫–∏
            Object.assign(secretButton.style, allCorners[randomIndex]);
            
            // –í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É –Ω–µ–≤–∏–¥–∏–º–æ–π, –Ω–æ –æ–Ω–∞ –±—É–¥–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
            secretButton.style.opacity = '0';
            secretButton.style.pointerEvents = 'auto';
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ —Å–µ–∫—Ä–µ—Ç–Ω—É—é –∫–Ω–æ–ø–∫—É
        function handleSecretButtonClick() {
            // –ï—Å–ª–∏ —ç—Ç–æ –ø—è—Ç–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –∏–ª–∏ –±–æ–ª—å—à–µ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å –æ –∫–æ–¥–µ
            if (secretClickCount >= 4) {
                showCodeQuestion();
                return;
            }
            
            // –ü–ª–∞–≤–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º—É–∑—ã–∫—É –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤
            fadeOutMusic(() => {
                secretClickCount++;
                
                // –ù–∞ —á–µ—Ç–≤–µ—Ä—Ç–æ–º –Ω–∞–∂–∞—Ç–∏–∏ –¥–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É –≤–∏–¥–∏–º–æ–π
                if (secretClickCount === 4) {
                    secretButton.classList.add('visible');
                }
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ–∫—Ä–µ—Ç–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                startSecretSequence();
            });
        }
        
        function startSecretSequence() {
            // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É (–Ω–æ –æ–Ω–∞ –≤—Å–µ —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏)
            secretButton.style.opacity = '0';
            secretButton.style.pointerEvents = 'none';
            
            // –ñ–¥–µ–º 2 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                // –ü–ª–∞–≤–Ω–æ –∑–∞—Ç–µ–º–Ω—è–µ–º —ç–∫—Ä–∞–Ω
                darkOverlay.style.display = 'block';
                setTimeout(() => {
                    darkOverlay.classList.add('active');
                }, 10);
                
                // –ü–ª–∞–≤–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ–º –º—É–∑—ã–∫—É
                const musicVolume = document.getElementById('musicVolume').value / 100;
                secretMusic.volume = 0;
                secretMusic.play();
                fadeAudio(secretMusic, 0, musicVolume, 1000);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–π —Ç–µ–∫—Å—Ç
                currentTextIndex = 0;
                showSecretText();
            }, 2000);
        }
        
        function showSecretText() {
            const texts = secretTexts[secretClickCount - 1];
            
            if (currentTextIndex < texts.length) {
                secretText.textContent = texts[currentTextIndex];
                secretText.style.display = 'block';
                
                // –ü–ª–∞–≤–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç
                setTimeout(() => {
                    secretText.classList.add('visible');
                }, 10);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ç–µ–∫—Å—Ç–∞
                secretClickHandler = handleSecretClick;
                document.addEventListener('click', secretClickHandler);
            }
        }
        
        function handleSecretClick() {
            const texts = secretTexts[secretClickCount - 1];
            
            // –ü–ª–∞–≤–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —Ç–µ–∫—Å—Ç
            secretText.classList.remove('visible');
            
            setTimeout(() => {
                currentTextIndex++;
                
                if (currentTextIndex < texts.length) {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç
                    secretText.textContent = texts[currentTextIndex];
                    setTimeout(() => {
                        secretText.classList.add('visible');
                    }, 10);
                } else {
                    // –ó–∞–≤–µ—Ä—à–∞–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                    endSecretSequence();
                }
            }, 500);
        }
        
        function endSecretSequence() {
            // –£–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
            if (secretClickHandler) {
                document.removeEventListener('click', secretClickHandler);
                secretClickHandler = null;
            }
            
            // –ü–ª–∞–≤–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç
            secretText.classList.remove('visible');
            
            setTimeout(() => {
                secretText.style.display = 'none';
                
                // –ü–ª–∞–≤–Ω–æ —É–±–∏—Ä–∞–µ–º –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ
                darkOverlay.classList.remove('active');
                
                // –ü–ª–∞–≤–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ–∫—Ä–µ—Ç–Ω—É—é –º—É–∑—ã–∫—É
                fadeAudio(secretMusic, secretMusic.volume, 0, 1000, () => {
                    secretMusic.pause();
                    secretMusic.currentTime = 0;
                    
                    // –í–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º –æ–±—ã—á–Ω—É—é –º—É–∑—ã–∫—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∞ –∏–≥—Ä–∞–ª–∞ –¥–æ —Å–µ–∫—Ä–µ—Ç–∞
                    setTimeout(() => {
                        if (wasMusicPlayingBeforeSecret) {
                            fadeInMusic();
                        }
                    }, 500);
                });
                
                setTimeout(() => {
                    darkOverlay.style.display = 'none';
                    
                    // –ü–æ—Å–ª–µ —Ç—Ä–µ—Ç—å–µ–≥–æ –Ω–∞–∂–∞—Ç–∏—è –¥–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É –≤–∏–¥–∏–º–æ–π
                    if (secretClickCount === 4) {
                        secretButton.classList.add('visible');
                    }
                    
                    // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –∫–Ω–æ–ø–∫—É –≤ –Ω–æ–≤—ã–π —Å–≤–æ–±–æ–¥–Ω—ã–π —É–≥–æ–ª
                    positionSecretButton();
                }, 1000);
            }, 500);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –≤–æ–ø—Ä–æ—Å–∞ –æ –∫–æ–¥–µ
        function showCodeQuestion() {
            // –ü–ª–∞–≤–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º—É–∑—ã–∫—É –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º –≤–æ–ø—Ä–æ—Å–∞
            fadeOutMusic(() => {
                // –ü–ª–∞–≤–Ω–æ –∑–∞—Ç–µ–º–Ω—è–µ–º —ç–∫—Ä–∞–Ω
                darkOverlay.style.display = 'block';
                setTimeout(() => {
                    darkOverlay.classList.add('active');
                }, 10);
                
                // –ü–ª–∞–≤–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ–º —Å–µ–∫—Ä–µ—Ç–Ω—É—é –º—É–∑—ã–∫—É
                const musicVolume = document.getElementById('musicVolume').value / 100;
                secretMusic.volume = 0;
                secretMusic.play();
                fadeAudio(secretMusic, 0, musicVolume, 1000);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å
                secretText.textContent = "[–¢—ã –Ω–∞—à—ë–ª –∫–æ–¥?]";
                secretText.style.display = 'block';
                setTimeout(() => {
                    secretText.classList.add('visible');
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è –ø–æ–∫–∞–∑–∞ –∫–Ω–æ–ø–æ–∫ –î–∞/–ù–µ—Ç
                    document.addEventListener('click', showYesNoButtonsAfterText);
                }, 10);
            });
        }

        // –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –∫–Ω–æ–ø–æ–∫ –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞ –ø–æ —Ç–µ–∫—Å—Ç—É
        function showYesNoButtonsAfterText() {
            // –£–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
            document.removeEventListener('click', showYesNoButtonsAfterText);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –î–∞/–ù–µ—Ç
            yesNoContainer.style.display = 'flex';
            yesNoContainer.style.pointerEvents = 'auto';
            setTimeout(() => {
                yesNoContainer.classList.add('visible');
            }, 10);
        }


        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –∫–Ω–æ–ø–æ–∫ –î–∞/–ù–µ—Ç
        function showYesNoButtons() {
            // –£–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
            document.removeEventListener('click', showYesNoButtons);
            
            // –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –∫–Ω–æ–ø–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã
            yesButton.style.pointerEvents = 'auto';
            noButton.style.pointerEvents = 'auto';
            yesButton.style.opacity = '1';
            noButton.style.opacity = '1';
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –î–∞/–ù–µ—Ç
        yesButton.addEventListener('click', function() {
            playClickSound();
            // –ü–ª–∞–≤–Ω–æ –º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç
            secretText.classList.remove('visible');
            setTimeout(() => {
                secretText.textContent = "[–¢–æ–≥–¥–∞ –≤–≤–µ–¥–∏ –µ–≥–æ...]";
                setTimeout(() => {
                    secretText.classList.add('visible');
                    
                    // –ß–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π prompt
                    setTimeout(() => {
                        submitCode(); // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Å prompt
                    }, 2000);
                }, 10);
            }, 500);
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –î–∞/–ù–µ—Ç
            yesNoContainer.classList.remove('visible');
            setTimeout(() => {
                yesNoContainer.style.display = 'none';
                yesNoContainer.style.pointerEvents = 'none';
            }, 500);
        });


        noButton.addEventListener('click', function() {
            playClickSound();
            // –ü–ª–∞–≤–Ω–æ –º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç
            secretText.classList.remove('visible');
            setTimeout(() => {
                secretText.textContent = "[–¢–æ–≥–¥–∞ –∏–¥–∏ –∏ –Ω–∞–π–¥–∏ –µ–≥–æ.]";
                setTimeout(() => {
                    secretText.classList.add('visible');
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —Å –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –º—É–∑—ã–∫–∏
                    document.addEventListener('click', closeSecretSequenceWithMusicRestore);
                }, 10);
            }, 500);
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –î–∞/–ù–µ—Ç
            yesNoContainer.classList.remove('visible');
            setTimeout(() => {
                yesNoContainer.style.display = 'none';
            }, 500);
        });
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —Å–µ–∫—Ä–µ—Ç–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        function closeSecretSequence() {
            // –£–±–∏—Ä–∞–µ–º –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–∞
            document.removeEventListener('click', closeSecretSequence);
            document.removeEventListener('click', showYesNoButtonsAfterText);
            
            // –ü–ª–∞–≤–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç
            secretText.classList.remove('visible');
            
            // –ü–ª–∞–≤–Ω–æ —É–±–∏—Ä–∞–µ–º –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ
            darkOverlay.classList.remove('active');
            
            // –ü–ª–∞–≤–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –î–∞/–ù–µ—Ç
            yesNoContainer.classList.remove('visible');
            
            // –ü–ª–∞–≤–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ–∫—Ä–µ—Ç–Ω—É—é –º—É–∑—ã–∫—É
            fadeAudio(secretMusic, secretMusic.volume, 0, 1000, () => {
                secretMusic.pause();
                secretMusic.currentTime = 0;
                
                // –í–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º –æ–±—ã—á–Ω—É—é –º—É–∑—ã–∫—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∞ –∏–≥—Ä–∞–ª–∞ –¥–æ —Å–µ–∫—Ä–µ—Ç–∞
                setTimeout(() => {
                    if (wasMusicPlayingBeforeSecret) {
                        fadeInMusic();
                    }
                }, 500);
            });
            
            // –ß–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            setTimeout(() => {
                secretText.style.display = 'none';
                darkOverlay.style.display = 'none';
                yesNoContainer.style.display = 'none';
                yesNoContainer.style.pointerEvents = 'none';
                
                // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –∫–Ω–æ–ø–∫—É –≤ –Ω–æ–≤—ã–π —Å–≤–æ–±–æ–¥–Ω—ã–π —É–≥–æ–ª
                positionSecretButton();
            }, 1000);
        }

        function closeSecretSequenceWithMusicRestore() {
            // –£–±–∏—Ä–∞–µ–º –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–∞
            document.removeEventListener('click', closeSecretSequenceWithMusicRestore);
            document.removeEventListener('click', showYesNoButtonsAfterText);
            
            // –ü–ª–∞–≤–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç
            secretText.classList.remove('visible');
            
            // –ü–ª–∞–≤–Ω–æ —É–±–∏—Ä–∞–µ–º –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ
            darkOverlay.classList.remove('active');
            
            // –ü–ª–∞–≤–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –î–∞/–ù–µ—Ç
            yesNoContainer.classList.remove('visible');
            
            // –ü–ª–∞–≤–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ–∫—Ä–µ—Ç–Ω—É—é –º—É–∑—ã–∫—É
            fadeAudio(secretMusic, secretMusic.volume, 0, 1000, () => {
                secretMusic.pause();
                secretMusic.currentTime = 0;
                
                // –í–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º –æ–±—ã—á–Ω—É—é –º—É–∑—ã–∫—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∞ –∏–≥—Ä–∞–ª–∞ –¥–æ —Å–µ–∫—Ä–µ—Ç–∞
                setTimeout(() => {
                    if (wasMusicPlayingBeforeSecret) {
                        fadeInMusic();
                    }
                }, 500);
            });
            
            // –ß–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            setTimeout(() => {
                secretText.style.display = 'none';
                darkOverlay.style.display = 'none';
                yesNoContainer.style.display = 'none';
                yesNoContainer.style.pointerEvents = 'none';
                
                // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –∫–Ω–æ–ø–∫—É –≤ –Ω–æ–≤—ã–π —Å–≤–æ–±–æ–¥–Ω—ã–π —É–≥–æ–ª
                positionSecretButton();
            }, 1000);
        }
        
        // –ù–û–í–ê–Ø —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–¥–∞ —á–µ—Ä–µ–∑ prompt
        function submitCode() {
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π prompt –±—Ä–∞—É–∑–µ—Ä–∞
            const input = prompt("–í–≤–µ–¥–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥:");
            
            if (input === "2016") {
                // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥ - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º
                window.location.href = 'after_the_code.html';
            } else if (input !== null) {
                // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Å–Ω–æ–≤–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ–º prompt
                alert("–¢—ã –≤–≤—ë–ª –Ω–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥. –¢—ã —Ç–æ—á–Ω–æ –µ–≥–æ –Ω–∞—à—ë–ª?");
                // –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Å–Ω–æ–≤–∞
                setTimeout(submitCode, 100); // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ —á—Ç–æ–±—ã alert —É—Å–ø–µ–ª –∑–∞–∫—Ä—ã—Ç—å—Å—è
            } else {
                // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª "–û—Ç–º–µ–Ω–∞" - –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º –º—É–∑—ã–∫—É (–µ—Å–ª–∏ –∏–≥—Ä–∞–ª–∞) –∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º
                setTimeout(() => {
                    if (wasMusicPlayingBeforeSecret) {
                        fadeInMusic();
                    }
                    closeSecretSequence();
                }, 100);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≥—Ä–æ–º–∫–æ—Å—Ç–∏ –∞—É–¥–∏–æ
        function fadeAudio(audio, fromVolume, toVolume, duration, callback) {
            const startTime = Date.now();
            const interval = 50;
            const steps = duration / interval;
            const stepSize = (toVolume - fromVolume) / steps;
            let currentStep = 0;
            
            function updateVolume() {
                currentStep++;
                const elapsed = Date.now() - startTime;
                if (elapsed < duration) {
                    audio.volume = fromVolume + (stepSize * currentStep);
                    setTimeout(updateVolume, interval);
                } else {
                    audio.volume = toVolume;
                    if (callback) callback();
                }
            }
            
            updateVolume();
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É 404
        function show404() {
            playClickSound();
            document.getElementById('errorModal').style.display = 'flex';
        }

        // –°–∫—Ä—ã—Ç—å –æ—à–∏–±–∫—É 404
        function hide404() {
            playCancelSound();
            document.getElementById('errorModal').style.display = 'none';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.page').forEach(page => {
                page.style.display = 'none';
            });
            document.getElementById('main').style.display = 'block';
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ - –ª–∞–º–ø–æ—á–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞, –¥–Ω–µ–≤–Ω–æ–π —Ñ–æ–Ω
            document.getElementById('lampImage').src = 'sun_on.png';
            document.body.classList.add('light-theme');
            isLampOn = true;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–æ–º–∞—Ö–æ–≤ –¥–ª—è AimLabs
            document.getElementById('gameArea').addEventListener('click', function(e) {
                if (aimGameActive && e.target === this) {
                    misses++;
                    document.getElementById('misses').textContent = misses;
                }
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–≤—É–∫–æ–≤ –¥–ª—è –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            document.querySelectorAll('button, .side-btn, .game-btn, .bet-field, .target').forEach(button => {
                button.addEventListener('mouseover', playHoverSound);
            });

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–Ω–æ–π –∫–Ω–æ–ø–∫–∏
            positionSecretButton();
            secretButton.addEventListener('click', handleSecretButtonClick);
            
            yesNoContainer.style.display = 'none';
            yesNoContainer.style.pointerEvents = 'none';
            yesNoContainer.classList.remove('visible');

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º—É–∑—ã–∫–∏ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
            secretMusic.addEventListener('ended', function() {
                this.currentTime = 0;
                this.play();
            });

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –≥—Ä–æ–º–∫–æ—Å—Ç—å
            updateVolume();

            initMusicPlayer();

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PixelPaint –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            document.getElementById('pixelGame').addEventListener('click', function(e) {
                if (e.target === this) {
                    initPixelPaint();
                }
            });

        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –æ—à–∏–±–æ–∫ –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö
        function startErrorTextEffect() {
            if (!interfaceLocked) return;
            
            // –ü–æ–ª—É—á–∞–µ–º –í–°–ï —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –æ—à–∏–±–æ–∫
            const sideButtons = document.querySelectorAll('.side-btn');
            const gameLabels = document.querySelectorAll('.game-label');
            const volumeLabels = document.querySelectorAll('.volume-label');

            
            // –û–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –æ–¥–∏–Ω –º–∞—Å—Å–∏–≤
            const allElements = [...sideButtons, ...gameLabels, ...volumeLabels];
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –æ—à–∏–±–æ–∫ –Ω–∞ –≥—Ä—É–ø–ø–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            function showErrorsOnGroup() {
                // –°–∫—Ä—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏ —Å–æ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
                allElements.forEach(element => {
                    if (element.dataset.originalText) {
                        element.textContent = element.dataset.originalText;
                    }
                    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
                    if (element.classList.contains('side-btn')) {
                        if (element.classList.contains('main-btn')) {
                            element.style.background = 'linear-gradient(135deg, #7c7c7c 0%, #616161 100%)';
                        } else {
                            element.style.background = 'linear-gradient(135deg, #606060 0%, #1a1a1a 100%)';
                        }
                    }
                    element.style.color = element.classList.contains('volume-label') ? '#d0d0d0' : '#f0f0f0';
                });
                
                // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é –≥—Ä—É–ø–ø—É –æ—Ç 1 –¥–æ 3 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
                const elementsToChange = getRandomElements(allElements, 2 + Math.floor(Math.random() * 5));
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≥—Ä—É–ø–ø–µ
                elementsToChange.forEach(element => {
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω
                    if (!element.dataset.originalText) {
                        element.dataset.originalText = element.textContent;
                    }
                    
                    // –ú–∞—Å—Å–∏–≤ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ—à–∏–±–æ–∫
                    const errorTexts = ['[ERROR]', '[FATAL ERROR]', '[NULL]'];
                    const randomError = errorTexts[Math.floor(Math.random() * errorTexts.length)];
                    
                    // –ó–∞–º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ —Å–ª—É—á–∞–π–Ω—É—é –æ—à–∏–±–∫—É
                    element.textContent = randomError;
                    element.style.color = '#a0a0a0'; // –°–µ—Ä—ã–π —Ü–≤–µ—Ç –≤–º–µ—Å—Ç–æ –∫—Ä–∞—Å–Ω–æ–≥–æ
                });
                
                // –ß–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –≥—Ä—É–ø–ø—É
                setTimeout(showErrorsOnGroup, 7000);
            }
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º —Ü–∏–∫–ª –æ—à–∏–±–æ–∫
            showErrorsOnGroup();
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ª—É—á–∞–π–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        function getRandomElements(array, count) {
            const shuffled = [...array].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

    </script>
</body>
</html>
